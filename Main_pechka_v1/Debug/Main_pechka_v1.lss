
AVRASM ver. 2.2.8  E:\Google_disk_my\Job\Projects\Sacumi\Linear_module_controller\Microchip Studio\Sketches\Main_pechka_v1\Main_pechka_v1\main.asm Fri Jun 10 01:34:19 2022

[builtin](2): Including file 'E:/Programms\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.6.364\avrasm\inc\m32def.inc'
E:\Google_disk_my\Job\Projects\Sacumi\Linear_module_controller\Microchip Studio\Sketches\Main_pechka_v1\Main_pechka_v1\main.asm(7): Including file 'E:/Programms\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.6.364\avrasm\inc\m32def.inc'
[builtin](2): Including file 'E:/Programms\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.6.364\avrasm\inc\m32def.inc'
E:\Google_disk_my\Job\Projects\Sacumi\Linear_module_controller\Microchip Studio\Sketches\Main_pechka_v1\Main_pechka_v1\main.asm(7): Including file 'E:/Programms\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.6.364\avrasm\inc\m32def.inc'
                                 
                                 
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATmega32.xml ************
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "m32def.inc"
                                 ;* Title             : Register/Bit Definitions for the ATmega32
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATmega32
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _M32DEF_INC_
                                 #define _M32DEF_INC_
                                 
                                 
                                 #pragma partinc 0
                                 
                                 ; ***** SPECIFY DEVICE ***************************************************
                                 .device ATmega32
                                 #pragma AVRPART ADMIN PART_NAME ATmega32
                                 .equ	SIGNATURE_000	= 0x1e
                                 .equ	SIGNATURE_001	= 0x95
                                 .equ	SIGNATURE_002	= 0x02
                                 
                                 #pragma AVRPART CORE CORE_VERSION V2E
                                 
                                 
                                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                                 ; NOTE:
                                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                                 ; and cannot be used with IN/OUT instructions
                                 .equ	SREG	= 0x3f
                                 .equ	SPL	= 0x3d
                                 .equ	SPH	= 0x3e
                                 .equ	OCR0	= 0x3c
                                 .equ	GICR	= 0x3b
                                 .equ	GIFR	= 0x3a
                                 .equ	TIMSK	= 0x39
                                 .equ	TIFR	= 0x38
                                 .equ	SPMCR	= 0x37
                                 .equ	TWCR	= 0x36
                                 .equ	MCUCR	= 0x35
                                 .equ	MCUCSR	= 0x34
                                 .equ	TCCR0	= 0x33
                                 .equ	TCNT0	= 0x32
                                 .equ	OSCCAL	= 0x31
                                 .equ	OCDR	= 0x31
                                 .equ	SFIOR	= 0x30
                                 .equ	TCCR1A	= 0x2f
                                 .equ	TCCR1B	= 0x2e
                                 .equ	TCNT1L	= 0x2c
                                 .equ	TCNT1H	= 0x2d
                                 .equ	OCR1AL	= 0x2a
                                 .equ	OCR1AH	= 0x2b
                                 .equ	OCR1BL	= 0x28
                                 .equ	OCR1BH	= 0x29
                                 .equ	ICR1L	= 0x26
                                 .equ	ICR1H	= 0x27
                                 .equ	TCCR2	= 0x25
                                 .equ	TCNT2	= 0x24
                                 .equ	OCR2	= 0x23
                                 .equ	ASSR	= 0x22
                                 .equ	WDTCR	= 0x21
                                 .equ	UBRRH	= 0x20
                                 .equ	UCSRC	= 0x20
                                 .equ	EEARL	= 0x1e
                                 .equ	EEARH	= 0x1f
                                 .equ	EEDR	= 0x1d
                                 .equ	EECR	= 0x1c
                                 .equ	PORTA	= 0x1b
                                 .equ	DDRA	= 0x1a
                                 .equ	PINA	= 0x19
                                 .equ	PORTB	= 0x18
                                 .equ	DDRB	= 0x17
                                 .equ	PINB	= 0x16
                                 .equ	PORTC	= 0x15
                                 .equ	DDRC	= 0x14
                                 .equ	PINC	= 0x13
                                 .equ	PORTD	= 0x12
                                 .equ	DDRD	= 0x11
                                 .equ	PIND	= 0x10
                                 .equ	SPDR	= 0x0f
                                 .equ	SPSR	= 0x0e
                                 .equ	SPCR	= 0x0d
                                 .equ	UDR	= 0x0c
                                 .equ	UCSRA	= 0x0b
                                 .equ	UCSRB	= 0x0a
                                 .equ	UBRRL	= 0x09
                                 .equ	ACSR	= 0x08
                                 .equ	ADMUX	= 0x07
                                 .equ	ADCSRA	= 0x06
                                 .equ	ADCH	= 0x05
                                 .equ	ADCL	= 0x04
                                 .equ	TWDR	= 0x03
                                 .equ	TWAR	= 0x02
                                 .equ	TWSR	= 0x01
                                 .equ	TWBR	= 0x00
                                 
                                 
                                 ; ***** BIT DEFINITIONS **************************************************
                                 
                                 ; ***** EEPROM ***********************
                                 ; EEDR - EEPROM Data Register
                                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                                 
                                 ; EECR - EEPROM Control Register
                                 .equ	EERE	= 0	; EEPROM Read Enable
                                 .equ	EEWE	= 1	; EEPROM Write Enable
                                 .equ	EEMWE	= 2	; EEPROM Master Write Enable
                                 .equ	EERIE	= 3	; EEPROM Ready Interrupt Enable
                                 
                                 
                                 ; ***** WATCHDOG *********************
                                 ; WDTCR - Watchdog Timer Control Register
                                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                                 .equ	WDE	= 3	; Watch Dog Enable
                                 .equ	WDTOE	= 4	; RW
                                 .equ	WDDE	= WDTOE	; For compatibility
                                 
                                 
                                 ; ***** EXTERNAL_INTERRUPT ***********
                                 ; GICR - General Interrupt Control Register
                                 .equ	GIMSK	= GICR	; For compatibility
                                 .equ	IVCE	= 0	; Interrupt Vector Change Enable
                                 .equ	IVSEL	= 1	; Interrupt Vector Select
                                 .equ	INT2	= 5	; External Interrupt Request 2 Enable
                                 .equ	INT0	= 6	; External Interrupt Request 0 Enable
                                 .equ	INT1	= 7	; External Interrupt Request 1 Enable
                                 
                                 ; GIFR - General Interrupt Flag Register
                                 .equ	INTF2	= 5	; External Interrupt Flag 2
                                 .equ	INTF0	= 6	; External Interrupt Flag 0
                                 .equ	INTF1	= 7	; External Interrupt Flag 1
                                 
                                 ; MCUCR - General Interrupt Control Register
                                 .equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                                 .equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                                 .equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                                 .equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                                 
                                 ; MCUCSR - MCU Control And Status Register
                                 .equ	ISC2	= 6	; Interrupt Sense Control 2
                                 
                                 
                                 ; ***** TIMER_COUNTER_0 **************
                                 ; TCCR0 - Timer/Counter Control Register
                                 .equ	CS00	= 0	; Clock Select 1
                                 .equ	CS01	= 1	; Clock Select 1
                                 .equ	CS02	= 2	; Clock Select 2
                                 .equ	WGM01	= 3	; Waveform Generation Mode 1
                                 .equ	CTC0	= WGM01	; For compatibility
                                 .equ	COM00	= 4	; Compare match Output Mode 0
                                 .equ	COM01	= 5	; Compare Match Output Mode 1
                                 .equ	WGM00	= 6	; Waveform Generation Mode
                                 .equ	PWM0	= WGM00	; For compatibility
                                 .equ	FOC0	= 7	; Force Output Compare
                                 
                                 ; TCNT0 - Timer/Counter Register
                                 .equ	TCNT0_0	= 0	; 
                                 .equ	TCNT0_1	= 1	; 
                                 .equ	TCNT0_2	= 2	; 
                                 .equ	TCNT0_3	= 3	; 
                                 .equ	TCNT0_4	= 4	; 
                                 .equ	TCNT0_5	= 5	; 
                                 .equ	TCNT0_6	= 6	; 
                                 .equ	TCNT0_7	= 7	; 
                                 
                                 ; OCR0 - Output Compare Register
                                 .equ	OCR0_0	= 0	; 
                                 .equ	OCR0_1	= 1	; 
                                 .equ	OCR0_2	= 2	; 
                                 .equ	OCR0_3	= 3	; 
                                 .equ	OCR0_4	= 4	; 
                                 .equ	OCR0_5	= 5	; 
                                 .equ	OCR0_6	= 6	; 
                                 .equ	OCR0_7	= 7	; 
                                 
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	TOIE0	= 0	; Timer/Counter0 Overflow Interrupt Enable
                                 .equ	OCIE0	= 1	; Timer/Counter0 Output Compare Match Interrupt register
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	TOV0	= 0	; Timer/Counter0 Overflow Flag
                                 .equ	OCF0	= 1	; Output Compare Flag 0
                                 
                                 
                                 ; ***** TIMER_COUNTER_2 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask register
                                 .equ	TOIE2	= 6	; Timer/Counter2 Overflow Interrupt Enable
                                 .equ	OCIE2	= 7	; Timer/Counter2 Output Compare Match Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag Register
                                 .equ	TOV2	= 6	; Timer/Counter2 Overflow Flag
                                 .equ	OCF2	= 7	; Output Compare Flag 2
                                 
                                 ; TCCR2 - Timer/Counter2 Control Register
                                 .equ	CS20	= 0	; Clock Select bit 0
                                 .equ	CS21	= 1	; Clock Select bit 1
                                 .equ	CS22	= 2	; Clock Select bit 2
                                 .equ	WGM21	= 3	; Clear Timer/Counter2 on Compare Match
                                 .equ	CTC2	= WGM21	; For compatibility
                                 .equ	COM20	= 4	; Compare Output Mode bit 0
                                 .equ	COM21	= 5	; Compare Output Mode bit 1
                                 .equ	WGM20	= 6	; Pulse Width Modulator Enable
                                 .equ	PWM2	= WGM20	; For compatibility
                                 .equ	FOC2	= 7	; Force Output Compare
                                 
                                 ; TCNT2 - Timer/Counter2
                                 .equ	TCNT2_0	= 0	; Timer/Counter 2 bit 0
                                 .equ	TCNT2_1	= 1	; Timer/Counter 2 bit 1
                                 .equ	TCNT2_2	= 2	; Timer/Counter 2 bit 2
                                 .equ	TCNT2_3	= 3	; Timer/Counter 2 bit 3
                                 .equ	TCNT2_4	= 4	; Timer/Counter 2 bit 4
                                 .equ	TCNT2_5	= 5	; Timer/Counter 2 bit 5
                                 .equ	TCNT2_6	= 6	; Timer/Counter 2 bit 6
                                 .equ	TCNT2_7	= 7	; Timer/Counter 2 bit 7
                                 
                                 ; OCR2 - Timer/Counter2 Output Compare Register
                                 .equ	OCR2_0	= 0	; Timer/Counter2 Output Compare Register Bit 0
                                 .equ	OCR2_1	= 1	; Timer/Counter2 Output Compare Register Bit 1
                                 .equ	OCR2_2	= 2	; Timer/Counter2 Output Compare Register Bit 2
                                 .equ	OCR2_3	= 3	; Timer/Counter2 Output Compare Register Bit 3
                                 .equ	OCR2_4	= 4	; Timer/Counter2 Output Compare Register Bit 4
                                 .equ	OCR2_5	= 5	; Timer/Counter2 Output Compare Register Bit 5
                                 .equ	OCR2_6	= 6	; Timer/Counter2 Output Compare Register Bit 6
                                 .equ	OCR2_7	= 7	; Timer/Counter2 Output Compare Register Bit 7
                                 
                                 ; ASSR - Asynchronous Status Register
                                 .equ	TCR2UB	= 0	; Timer/counter Control Register2 Update Busy
                                 .equ	OCR2UB	= 1	; Output Compare Register2 Update Busy
                                 .equ	TCN2UB	= 2	; Timer/Counter2 Update Busy
                                 .equ	AS2	= 3	; Asynchronous Timer/counter2
                                 
                                 
                                 ; ***** TIMER_COUNTER_1 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	TOIE1	= 2	; Timer/Counter1 Overflow Interrupt Enable
                                 .equ	OCIE1B	= 3	; Timer/Counter1 Output CompareB Match Interrupt Enable
                                 .equ	OCIE1A	= 4	; Timer/Counter1 Output CompareA Match Interrupt Enable
                                 .equ	TICIE1	= 5	; Timer/Counter1 Input Capture Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	TOV1	= 2	; Timer/Counter1 Overflow Flag
                                 .equ	OCF1B	= 3	; Output Compare Flag 1B
                                 .equ	OCF1A	= 4	; Output Compare Flag 1A
                                 .equ	ICF1	= 5	; Input Capture Flag 1
                                 
                                 ; TCCR1A - Timer/Counter1 Control Register A
                                 .equ	WGM10	= 0	; Waveform Generation Mode
                                 .equ	PWM10	= WGM10	; For compatibility
                                 .equ	WGM11	= 1	; Waveform Generation Mode
                                 .equ	PWM11	= WGM11	; For compatibility
                                 .equ	FOC1B	= 2	; Force Output Compare 1B
                                 .equ	FOC1A	= 3	; Force Output Compare 1A
                                 .equ	COM1B0	= 4	; Compare Output Mode 1B, bit 0
                                 .equ	COM1B1	= 5	; Compare Output Mode 1B, bit 1
                                 .equ	COM1A0	= 6	; Compare Ouput Mode 1A, bit 0
                                 .equ	COM1A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 ; TCCR1B - Timer/Counter1 Control Register B
                                 .equ	CS10	= 0	; Prescaler source of Timer/Counter 1
                                 .equ	CS11	= 1	; Prescaler source of Timer/Counter 1
                                 .equ	CS12	= 2	; Prescaler source of Timer/Counter 1
                                 .equ	WGM12	= 3	; Waveform Generation Mode
                                 .equ	CTC10	= WGM12	; For compatibility
                                 .equ	CTC1	= WGM12	; For compatibility
                                 .equ	WGM13	= 4	; Waveform Generation Mode
                                 .equ	CTC11	= WGM13	; For compatibility
                                 .equ	ICES1	= 6	; Input Capture 1 Edge Select
                                 .equ	ICNC1	= 7	; Input Capture 1 Noise Canceler
                                 
                                 
                                 ; ***** SPI **************************
                                 ; SPDR - SPI Data Register
                                 .equ	SPDR0	= 0	; SPI Data Register bit 0
                                 .equ	SPDR1	= 1	; SPI Data Register bit 1
                                 .equ	SPDR2	= 2	; SPI Data Register bit 2
                                 .equ	SPDR3	= 3	; SPI Data Register bit 3
                                 .equ	SPDR4	= 4	; SPI Data Register bit 4
                                 .equ	SPDR5	= 5	; SPI Data Register bit 5
                                 .equ	SPDR6	= 6	; SPI Data Register bit 6
                                 .equ	SPDR7	= 7	; SPI Data Register bit 7
                                 
                                 ; SPSR - SPI Status Register
                                 .equ	SPI2X	= 0	; Double SPI Speed Bit
                                 .equ	WCOL	= 6	; Write Collision Flag
                                 .equ	SPIF	= 7	; SPI Interrupt Flag
                                 
                                 ; SPCR - SPI Control Register
                                 .equ	SPR0	= 0	; SPI Clock Rate Select 0
                                 .equ	SPR1	= 1	; SPI Clock Rate Select 1
                                 .equ	CPHA	= 2	; Clock Phase
                                 .equ	CPOL	= 3	; Clock polarity
                                 .equ	MSTR	= 4	; Master/Slave Select
                                 .equ	DORD	= 5	; Data Order
                                 .equ	SPE	= 6	; SPI Enable
                                 .equ	SPIE	= 7	; SPI Interrupt Enable
                                 
                                 
                                 ; ***** USART ************************
                                 ; UDR - USART I/O Data Register
                                 .equ	UDR0	= 0	; USART I/O Data Register bit 0
                                 .equ	UDR1	= 1	; USART I/O Data Register bit 1
                                 .equ	UDR2	= 2	; USART I/O Data Register bit 2
                                 .equ	UDR3	= 3	; USART I/O Data Register bit 3
                                 .equ	UDR4	= 4	; USART I/O Data Register bit 4
                                 .equ	UDR5	= 5	; USART I/O Data Register bit 5
                                 .equ	UDR6	= 6	; USART I/O Data Register bit 6
                                 .equ	UDR7	= 7	; USART I/O Data Register bit 7
                                 
                                 ; UCSRA - USART Control and Status Register A
                                 .equ	USR	= UCSRA	; For compatibility
                                 .equ	MPCM	= 0	; Multi-processor Communication Mode
                                 .equ	U2X	= 1	; Double the USART transmission speed
                                 .equ	UPE	= 2	; Parity Error
                                 .equ	PE	= UPE	; For compatibility
                                 .equ	DOR	= 3	; Data overRun
                                 .equ	FE	= 4	; Framing Error
                                 .equ	UDRE	= 5	; USART Data Register Empty
                                 .equ	TXC	= 6	; USART Transmitt Complete
                                 .equ	RXC	= 7	; USART Receive Complete
                                 
                                 ; UCSRB - USART Control and Status Register B
                                 .equ	UCR	= UCSRB	; For compatibility
                                 .equ	TXB8	= 0	; Transmit Data Bit 8
                                 .equ	RXB8	= 1	; Receive Data Bit 8
                                 .equ	UCSZ2	= 2	; Character Size
                                 .equ	CHR9	= UCSZ2	; For compatibility
                                 .equ	TXEN	= 3	; Transmitter Enable
                                 .equ	RXEN	= 4	; Receiver Enable
                                 .equ	UDRIE	= 5	; USART Data register Empty Interrupt Enable
                                 .equ	TXCIE	= 6	; TX Complete Interrupt Enable
                                 .equ	RXCIE	= 7	; RX Complete Interrupt Enable
                                 
                                 ; UCSRC - USART Control and Status Register C
                                 .equ	UCPOL	= 0	; Clock Polarity
                                 .equ	UCSZ0	= 1	; Character Size
                                 .equ	UCSZ1	= 2	; Character Size
                                 .equ	USBS	= 3	; Stop Bit Select
                                 .equ	UPM0	= 4	; Parity Mode Bit 0
                                 .equ	UPM1	= 5	; Parity Mode Bit 1
                                 .equ	UMSEL	= 6	; USART Mode Select
                                 .equ	URSEL	= 7	; Register Select
                                 
                                 .equ	UBRRHI	= UBRRH	; For compatibility
                                 
                                 ; ***** ANALOG_COMPARATOR ************
                                 ; SFIOR - Special Function IO Register
                                 .equ	ACME	= 3	; Analog Comparator Multiplexer Enable
                                 
                                 ; ACSR - Analog Comparator Control And Status Register
                                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                                 .equ	ACIC	= 2	; Analog Comparator Input Capture Enable
                                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                                 .equ	ACO	= 5	; Analog Compare Output
                                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                                 .equ	ACD	= 7	; Analog Comparator Disable
                                 
                                 
                                 ; ***** AD_CONVERTER *****************
                                 ; ADMUX - The ADC multiplexer Selection Register
                                 .equ	MUX0	= 0	; Analog Channel and Gain Selection Bits
                                 .equ	MUX1	= 1	; Analog Channel and Gain Selection Bits
                                 .equ	MUX2	= 2	; Analog Channel and Gain Selection Bits
                                 .equ	MUX3	= 3	; Analog Channel and Gain Selection Bits
                                 .equ	MUX4	= 4	; Analog Channel and Gain Selection Bits
                                 .equ	ADLAR	= 5	; Left Adjust Result
                                 .equ	REFS0	= 6	; Reference Selection Bit 0
                                 .equ	REFS1	= 7	; Reference Selection Bit 1
                                 
                                 ; ADCSRA - The ADC Control and Status register
                                 .equ	ADCSR	= ADCSRA	; For compatibility
                                 .equ	ADPS0	= 0	; ADC  Prescaler Select Bits
                                 .equ	ADPS1	= 1	; ADC  Prescaler Select Bits
                                 .equ	ADPS2	= 2	; ADC  Prescaler Select Bits
                                 .equ	ADIE	= 3	; ADC Interrupt Enable
                                 .equ	ADIF	= 4	; ADC Interrupt Flag
                                 .equ	ADATE	= 5	; When this bit is written to one,the Timer/Counter2 prescaler will be reset.The bit will be cleared by hardware after the operation is performed.Writing a zero to this bit will have no effect.This bit will always be read as zero if Timer/C                                 ounter2 is clocked by the internal CPU clock.If this bit is written when Timer/Counter2 is operating in asynchronous mode,the bit will remain one until the prescaler has been reset.
                                 .equ	ADFR	= ADATE	; For compatibility
                                 .equ	ADSC	= 6	; ADC Start Conversion
                                 .equ	ADEN	= 7	; ADC Enable
                                 
                                 ; ADCH - ADC Data Register High Byte
                                 .equ	ADCH0	= 0	; ADC Data Register High Byte Bit 0
                                 .equ	ADCH1	= 1	; ADC Data Register High Byte Bit 1
                                 .equ	ADCH2	= 2	; ADC Data Register High Byte Bit 2
                                 .equ	ADCH3	= 3	; ADC Data Register High Byte Bit 3
                                 .equ	ADCH4	= 4	; ADC Data Register High Byte Bit 4
                                 .equ	ADCH5	= 5	; ADC Data Register High Byte Bit 5
                                 .equ	ADCH6	= 6	; ADC Data Register High Byte Bit 6
                                 .equ	ADCH7	= 7	; ADC Data Register High Byte Bit 7
                                 
                                 ; ADCL - ADC Data Register Low Byte
                                 .equ	ADCL0	= 0	; ADC Data Register Low Byte Bit 0
                                 .equ	ADCL1	= 1	; ADC Data Register Low Byte Bit 1
                                 .equ	ADCL2	= 2	; ADC Data Register Low Byte Bit 2
                                 .equ	ADCL3	= 3	; ADC Data Register Low Byte Bit 3
                                 .equ	ADCL4	= 4	; ADC Data Register Low Byte Bit 4
                                 .equ	ADCL5	= 5	; ADC Data Register Low Byte Bit 5
                                 .equ	ADCL6	= 6	; ADC Data Register Low Byte Bit 6
                                 .equ	ADCL7	= 7	; ADC Data Register Low Byte Bit 7
                                 
                                 ; SFIOR - Special Function IO Register
                                 .equ	ADTS0	= 5	; ADC Auto Trigger Source 0
                                 .equ	ADTS1	= 6	; ADC Auto Trigger Source 1
                                 .equ	ADTS2	= 7	; ADC Auto Trigger Source 2
                                 
                                 
                                 ; ***** PORTA ************************
                                 ; PORTA - Port A Data Register
                                 .equ	PORTA0	= 0	; Port A Data Register bit 0
                                 .equ	PA0	= 0	; For compatibility
                                 .equ	PORTA1	= 1	; Port A Data Register bit 1
                                 .equ	PA1	= 1	; For compatibility
                                 .equ	PORTA2	= 2	; Port A Data Register bit 2
                                 .equ	PA2	= 2	; For compatibility
                                 .equ	PORTA3	= 3	; Port A Data Register bit 3
                                 .equ	PA3	= 3	; For compatibility
                                 .equ	PORTA4	= 4	; Port A Data Register bit 4
                                 .equ	PA4	= 4	; For compatibility
                                 .equ	PORTA5	= 5	; Port A Data Register bit 5
                                 .equ	PA5	= 5	; For compatibility
                                 .equ	PORTA6	= 6	; Port A Data Register bit 6
                                 .equ	PA6	= 6	; For compatibility
                                 .equ	PORTA7	= 7	; Port A Data Register bit 7
                                 .equ	PA7	= 7	; For compatibility
                                 
                                 ; DDRA - Port A Data Direction Register
                                 .equ	DDA0	= 0	; Data Direction Register, Port A, bit 0
                                 .equ	DDA1	= 1	; Data Direction Register, Port A, bit 1
                                 .equ	DDA2	= 2	; Data Direction Register, Port A, bit 2
                                 .equ	DDA3	= 3	; Data Direction Register, Port A, bit 3
                                 .equ	DDA4	= 4	; Data Direction Register, Port A, bit 4
                                 .equ	DDA5	= 5	; Data Direction Register, Port A, bit 5
                                 .equ	DDA6	= 6	; Data Direction Register, Port A, bit 6
                                 .equ	DDA7	= 7	; Data Direction Register, Port A, bit 7
                                 
                                 ; PINA - Port A Input Pins
                                 .equ	PINA0	= 0	; Input Pins, Port A bit 0
                                 .equ	PINA1	= 1	; Input Pins, Port A bit 1
                                 .equ	PINA2	= 2	; Input Pins, Port A bit 2
                                 .equ	PINA3	= 3	; Input Pins, Port A bit 3
                                 .equ	PINA4	= 4	; Input Pins, Port A bit 4
                                 .equ	PINA5	= 5	; Input Pins, Port A bit 5
                                 .equ	PINA6	= 6	; Input Pins, Port A bit 6
                                 .equ	PINA7	= 7	; Input Pins, Port A bit 7
                                 
                                 
                                 ; ***** PORTB ************************
                                 ; PORTB - Port B Data Register
                                 .equ	PORTB0	= 0	; Port B Data Register bit 0
                                 .equ	PB0	= 0	; For compatibility
                                 .equ	PORTB1	= 1	; Port B Data Register bit 1
                                 .equ	PB1	= 1	; For compatibility
                                 .equ	PORTB2	= 2	; Port B Data Register bit 2
                                 .equ	PB2	= 2	; For compatibility
                                 .equ	PORTB3	= 3	; Port B Data Register bit 3
                                 .equ	PB3	= 3	; For compatibility
                                 .equ	PORTB4	= 4	; Port B Data Register bit 4
                                 .equ	PB4	= 4	; For compatibility
                                 .equ	PORTB5	= 5	; Port B Data Register bit 5
                                 .equ	PB5	= 5	; For compatibility
                                 .equ	PORTB6	= 6	; Port B Data Register bit 6
                                 .equ	PB6	= 6	; For compatibility
                                 .equ	PORTB7	= 7	; Port B Data Register bit 7
                                 .equ	PB7	= 7	; For compatibility
                                 
                                 ; DDRB - Port B Data Direction Register
                                 .equ	DDB0	= 0	; Port B Data Direction Register bit 0
                                 .equ	DDB1	= 1	; Port B Data Direction Register bit 1
                                 .equ	DDB2	= 2	; Port B Data Direction Register bit 2
                                 .equ	DDB3	= 3	; Port B Data Direction Register bit 3
                                 .equ	DDB4	= 4	; Port B Data Direction Register bit 4
                                 .equ	DDB5	= 5	; Port B Data Direction Register bit 5
                                 .equ	DDB6	= 6	; Port B Data Direction Register bit 6
                                 .equ	DDB7	= 7	; Port B Data Direction Register bit 7
                                 
                                 ; PINB - Port B Input Pins
                                 .equ	PINB0	= 0	; Port B Input Pins bit 0
                                 .equ	PINB1	= 1	; Port B Input Pins bit 1
                                 .equ	PINB2	= 2	; Port B Input Pins bit 2
                                 .equ	PINB3	= 3	; Port B Input Pins bit 3
                                 .equ	PINB4	= 4	; Port B Input Pins bit 4
                                 .equ	PINB5	= 5	; Port B Input Pins bit 5
                                 .equ	PINB6	= 6	; Port B Input Pins bit 6
                                 .equ	PINB7	= 7	; Port B Input Pins bit 7
                                 
                                 
                                 ; ***** PORTC ************************
                                 ; PORTC - Port C Data Register
                                 .equ	PORTC0	= 0	; Port C Data Register bit 0
                                 .equ	PC0	= 0	; For compatibility
                                 .equ	PORTC1	= 1	; Port C Data Register bit 1
                                 .equ	PC1	= 1	; For compatibility
                                 .equ	PORTC2	= 2	; Port C Data Register bit 2
                                 .equ	PC2	= 2	; For compatibility
                                 .equ	PORTC3	= 3	; Port C Data Register bit 3
                                 .equ	PC3	= 3	; For compatibility
                                 .equ	PORTC4	= 4	; Port C Data Register bit 4
                                 .equ	PC4	= 4	; For compatibility
                                 .equ	PORTC5	= 5	; Port C Data Register bit 5
                                 .equ	PC5	= 5	; For compatibility
                                 .equ	PORTC6	= 6	; Port C Data Register bit 6
                                 .equ	PC6	= 6	; For compatibility
                                 .equ	PORTC7	= 7	; Port C Data Register bit 7
                                 .equ	PC7	= 7	; For compatibility
                                 
                                 ; DDRC - Port C Data Direction Register
                                 .equ	DDC0	= 0	; Port C Data Direction Register bit 0
                                 .equ	DDC1	= 1	; Port C Data Direction Register bit 1
                                 .equ	DDC2	= 2	; Port C Data Direction Register bit 2
                                 .equ	DDC3	= 3	; Port C Data Direction Register bit 3
                                 .equ	DDC4	= 4	; Port C Data Direction Register bit 4
                                 .equ	DDC5	= 5	; Port C Data Direction Register bit 5
                                 .equ	DDC6	= 6	; Port C Data Direction Register bit 6
                                 .equ	DDC7	= 7	; Port C Data Direction Register bit 7
                                 
                                 ; PINC - Port C Input Pins
                                 .equ	PINC0	= 0	; Port C Input Pins bit 0
                                 .equ	PINC1	= 1	; Port C Input Pins bit 1
                                 .equ	PINC2	= 2	; Port C Input Pins bit 2
                                 .equ	PINC3	= 3	; Port C Input Pins bit 3
                                 .equ	PINC4	= 4	; Port C Input Pins bit 4
                                 .equ	PINC5	= 5	; Port C Input Pins bit 5
                                 .equ	PINC6	= 6	; Port C Input Pins bit 6
                                 .equ	PINC7	= 7	; Port C Input Pins bit 7
                                 
                                 
                                 ; ***** PORTD ************************
                                 ; PORTD - Port D Data Register
                                 .equ	PORTD0	= 0	; Port D Data Register bit 0
                                 .equ	PD0	= 0	; For compatibility
                                 .equ	PORTD1	= 1	; Port D Data Register bit 1
                                 .equ	PD1	= 1	; For compatibility
                                 .equ	PORTD2	= 2	; Port D Data Register bit 2
                                 .equ	PD2	= 2	; For compatibility
                                 .equ	PORTD3	= 3	; Port D Data Register bit 3
                                 .equ	PD3	= 3	; For compatibility
                                 .equ	PORTD4	= 4	; Port D Data Register bit 4
                                 .equ	PD4	= 4	; For compatibility
                                 .equ	PORTD5	= 5	; Port D Data Register bit 5
                                 .equ	PD5	= 5	; For compatibility
                                 .equ	PORTD6	= 6	; Port D Data Register bit 6
                                 .equ	PD6	= 6	; For compatibility
                                 .equ	PORTD7	= 7	; Port D Data Register bit 7
                                 .equ	PD7	= 7	; For compatibility
                                 
                                 ; DDRD - Port D Data Direction Register
                                 .equ	DDD0	= 0	; Port D Data Direction Register bit 0
                                 .equ	DDD1	= 1	; Port D Data Direction Register bit 1
                                 .equ	DDD2	= 2	; Port D Data Direction Register bit 2
                                 .equ	DDD3	= 3	; Port D Data Direction Register bit 3
                                 .equ	DDD4	= 4	; Port D Data Direction Register bit 4
                                 .equ	DDD5	= 5	; Port D Data Direction Register bit 5
                                 .equ	DDD6	= 6	; Port D Data Direction Register bit 6
                                 .equ	DDD7	= 7	; Port D Data Direction Register bit 7
                                 
                                 ; PIND - Port D Input Pins
                                 .equ	PIND0	= 0	; Port D Input Pins bit 0
                                 .equ	PIND1	= 1	; Port D Input Pins bit 1
                                 .equ	PIND2	= 2	; Port D Input Pins bit 2
                                 .equ	PIND3	= 3	; Port D Input Pins bit 3
                                 .equ	PIND4	= 4	; Port D Input Pins bit 4
                                 .equ	PIND5	= 5	; Port D Input Pins bit 5
                                 .equ	PIND6	= 6	; Port D Input Pins bit 6
                                 .equ	PIND7	= 7	; Port D Input Pins bit 7
                                 
                                 
                                 ; ***** CPU **************************
                                 ; SREG - Status Register
                                 .equ	SREG_C	= 0	; Carry Flag
                                 .equ	SREG_Z	= 1	; Zero Flag
                                 .equ	SREG_N	= 2	; Negative Flag
                                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                                 .equ	SREG_S	= 4	; Sign Bit
                                 .equ	SREG_H	= 5	; Half Carry Flag
                                 .equ	SREG_T	= 6	; Bit Copy Storage
                                 .equ	SREG_I	= 7	; Global Interrupt Enable
                                 
                                 ; MCUCR - MCU Control Register
                                 ;.equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                                 ;.equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                                 ;.equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                                 ;.equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                                 .equ	SM0	= 4	; Sleep Mode Select
                                 .equ	SM1	= 5	; Sleep Mode Select
                                 .equ	SM2	= 6	; Sleep Mode Select
                                 .equ	SE	= 7	; Sleep Enable
                                 
                                 ; MCUCSR - MCU Control And Status Register
                                 .equ	MCUSR	= MCUCSR	; For compatibility
                                 .equ	PORF	= 0	; Power-on reset flag
                                 .equ	EXTRF	= 1	; External Reset Flag
                                 .equ	BORF	= 2	; Brown-out Reset Flag
                                 .equ	WDRF	= 3	; Watchdog Reset Flag
                                 .equ	JTRF	= 4	; JTAG Reset Flag
                                 .equ	JTD	= 7	; JTAG Interface Disable
                                 
                                 ; OSCCAL - Oscillator Calibration Value
                                 .equ	CAL0	= 0	; Oscillator Calibration Value Bit0
                                 .equ	CAL1	= 1	; Oscillator Calibration Value Bit1
                                 .equ	CAL2	= 2	; Oscillator Calibration Value Bit2
                                 .equ	CAL3	= 3	; Oscillator Calibration Value Bit3
                                 .equ	CAL4	= 4	; Oscillator Calibration Value Bit4
                                 .equ	CAL5	= 5	; Oscillator Calibration Value Bit5
                                 .equ	CAL6	= 6	; Oscillator Calibration Value Bit6
                                 .equ	CAL7	= 7	; Oscillator Calibration Value Bit7
                                 
                                 ; SFIOR - Special Function IO Register
                                 .equ	PSR10	= 0	; Prescaler Reset Timer/Counter1&0
                                 .equ	PSR2	= 1	; Prescaler Reset Timer/Counter2
                                 .equ	PUD	= 2	; Pull-up Disable
                                 
                                 
                                 ; ***** BOOT_LOAD ********************
                                 ; SPMCR - Store Program Memory Control Register
                                 .equ	SPMEN	= 0	; Store Program Memory Enable
                                 .equ	PGERS	= 1	; Page Erase
                                 .equ	PGWRT	= 2	; Page Write
                                 .equ	BLBSET	= 3	; Boot Lock Bit Set
                                 .equ	RWWSRE	= 4	; Read While Write secion read enable
                                 .equ	ASRE	= RWWSRE	; For compatibility
                                 .equ	RWWSB	= 6	; Read While Write Section Busy
                                 .equ	ASB	= RWWSB	; For compatibility
                                 .equ	SPMIE	= 7	; SPM Interrupt Enable
                                 
                                 
                                 ; ***** TWI **************************
                                 ; TWBR - TWI Bit Rate register
                                 .equ	TWBR0	= 0	; 
                                 .equ	TWBR1	= 1	; 
                                 .equ	TWBR2	= 2	; 
                                 .equ	TWBR3	= 3	; 
                                 .equ	TWBR4	= 4	; 
                                 .equ	TWBR5	= 5	; 
                                 .equ	TWBR6	= 6	; 
                                 .equ	TWBR7	= 7	; 
                                 
                                 ; TWCR - TWI Control Register
                                 .equ	TWIE	= 0	; TWI Interrupt Enable
                                 .equ	TWEN	= 2	; TWI Enable Bit
                                 .equ	TWWC	= 3	; TWI Write Collition Flag
                                 .equ	TWSTO	= 4	; TWI Stop Condition Bit
                                 .equ	TWSTA	= 5	; TWI Start Condition Bit
                                 .equ	TWEA	= 6	; TWI Enable Acknowledge Bit
                                 .equ	TWINT	= 7	; TWI Interrupt Flag
                                 
                                 ; TWSR - TWI Status Register
                                 .equ	TWPS0	= 0	; TWI Prescaler bits
                                 .equ	TWPS1	= 1	; TWI Prescaler bits
                                 .equ	TWS3	= 3	; TWI Status
                                 .equ	TWS4	= 4	; TWI Status
                                 .equ	TWS5	= 5	; TWI Status
                                 .equ	TWS6	= 6	; TWI Status
                                 .equ	TWS7	= 7	; TWI Status
                                 
                                 ; TWDR - TWI Data register
                                 .equ	TWD0	= 0	; TWI Data Register Bit 0
                                 .equ	TWD1	= 1	; TWI Data Register Bit 1
                                 .equ	TWD2	= 2	; TWI Data Register Bit 2
                                 .equ	TWD3	= 3	; TWI Data Register Bit 3
                                 .equ	TWD4	= 4	; TWI Data Register Bit 4
                                 .equ	TWD5	= 5	; TWI Data Register Bit 5
                                 .equ	TWD6	= 6	; TWI Data Register Bit 6
                                 .equ	TWD7	= 7	; TWI Data Register Bit 7
                                 
                                 ; TWAR - TWI (Slave) Address register
                                 .equ	TWGCE	= 0	; TWI General Call Recognition Enable Bit
                                 .equ	TWA0	= 1	; TWI (Slave) Address register Bit 0
                                 .equ	TWA1	= 2	; TWI (Slave) Address register Bit 1
                                 .equ	TWA2	= 3	; TWI (Slave) Address register Bit 2
                                 .equ	TWA3	= 4	; TWI (Slave) Address register Bit 3
                                 .equ	TWA4	= 5	; TWI (Slave) Address register Bit 4
                                 .equ	TWA5	= 6	; TWI (Slave) Address register Bit 5
                                 .equ	TWA6	= 7	; TWI (Slave) Address register Bit 6
                                 
                                 
                                 
                                 ; ***** LOCKSBITS ********************************************************
                                 .equ	LB1	= 0	; Lock bit
                                 .equ	LB2	= 1	; Lock bit
                                 .equ	BLB01	= 2	; Boot Lock bit
                                 .equ	BLB02	= 3	; Boot Lock bit
                                 .equ	BLB11	= 4	; Boot lock bit
                                 .equ	BLB12	= 5	; Boot lock bit
                                 
                                 
                                 ; ***** FUSES ************************************************************
                                 ; LOW fuse bits
                                 .equ	CKSEL0	= 0	; Select Clock Source
                                 .equ	CKSEL1	= 1	; Select Clock Source
                                 .equ	CKSEL2	= 2	; Select Clock Source
                                 .equ	CKSEL3	= 3	; Select Clock Source
                                 .equ	BODEN	= 6	; Brown out detector enable
                                 .equ	BODLEVEL	= 7	; Brown out detector trigger level
                                 
                                 ; HIGH fuse bits
                                 .equ	BOOTRST	= 0	; Select Reset Vector
                                 .equ	BOOTSZ0	= 1	; Select Boot Size
                                 .equ	BOOTSZ1	= 2	; Select Boot Size
                                 .equ	EESAVE	= 3	; EEPROM memory is preserved through chip erase
                                 .equ	SPIEN	= 5	; Enable Serial programming and Data Downloading
                                 .equ	JTAGEN	= 6	; Enable JTAG
                                 .equ	OCDEN	= 7	; Enable OCD
                                 
                                 
                                 
                                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                                 .def	XH	= r27
                                 .def	XL	= r26
                                 .def	YH	= r29
                                 .def	YL	= r28
                                 .def	ZH	= r31
                                 .def	ZL	= r30
                                 
                                 
                                 
                                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                                 .equ	FLASHEND	= 0x3fff	; Note: Word address
                                 .equ	IOEND	= 0x003f
                                 .equ	SRAM_START	= 0x0060
                                 .equ	SRAM_SIZE	= 2048
                                 .equ	RAMEND	= 0x085f
                                 .equ	XRAMEND	= 0x0000
                                 .equ	E2END	= 0x03ff
                                 .equ	EEPROMEND	= 0x03ff
                                 .equ	EEADRBITS	= 10
                                 #pragma AVRPART MEMORY PROG_FLASH 32768
                                 #pragma AVRPART MEMORY EEPROM 1024
                                 #pragma AVRPART MEMORY INT_SRAM SIZE 2048
                                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                                 
                                 
                                 
                                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                                 .equ	NRWW_START_ADDR	= 0x3800
                                 .equ	NRWW_STOP_ADDR	= 0x3fff
                                 .equ	RWW_START_ADDR	= 0x0
                                 .equ	RWW_STOP_ADDR	= 0x37ff
                                 .equ	PAGESIZE	= 64
                                 .equ	FIRSTBOOTSTART	= 0x3f00
                                 .equ	SECONDBOOTSTART	= 0x3e00
                                 .equ	THIRDBOOTSTART	= 0x3c00
                                 .equ	FOURTHBOOTSTART	= 0x3800
                                 .equ	SMALLBOOTSTART	= FIRSTBOOTSTART
                                 .equ	LARGEBOOTSTART	= FOURTHBOOTSTART
                                 
                                 
                                 
                                 ; ***** INTERRUPT VECTORS ************************************************
                                 .equ	INT0addr	= 0x0002	; External Interrupt Request 0
                                 .equ	INT1addr	= 0x0004	; External Interrupt Request 1
                                 .equ	INT2addr	= 0x0006	; External Interrupt Request 2
                                 .equ	OC2addr	= 0x0008	; Timer/Counter2 Compare Match
                                 .equ	OVF2addr	= 0x000a	; Timer/Counter2 Overflow
                                 .equ	ICP1addr	= 0x000c	; Timer/Counter1 Capture Event
                                 .equ	OC1Aaddr	= 0x000e	; Timer/Counter1 Compare Match A
                                 .equ	OC1Baddr	= 0x0010	; Timer/Counter1 Compare Match B
                                 .equ	OVF1addr	= 0x0012	; Timer/Counter1 Overflow
                                 .equ	OC0addr	= 0x0014	; Timer/Counter0 Compare Match
                                 .equ	OVF0addr	= 0x0016	; Timer/Counter0 Overflow
                                 .equ	SPIaddr	= 0x0018	; Serial Transfer Complete
                                 .equ	URXCaddr	= 0x001a	; USART, Rx Complete
                                 .equ	UDREaddr	= 0x001c	; USART Data Register Empty
                                 .equ	UTXCaddr	= 0x001e	; USART, Tx Complete
                                 .equ	ADCCaddr	= 0x0020	; ADC Conversion Complete
                                 .equ	ERDYaddr	= 0x0022	; EEPROM Ready
                                 .equ	ACIaddr	= 0x0024	; Analog Comparator
                                 .equ	TWIaddr	= 0x0026	; 2-wire Serial Interface
                                 .equ	SPMRaddr	= 0x0028	; Store Program Memory Ready
                                 
                                 .equ	INT_VECTORS_SIZE	= 42	; size in words
                                 
                                 #endif  /* _M32DEF_INC_ */
                                 
                                 
                                 ; Created: 25.01.2021 23:04:30
                                 ; Author : Alexey Lepeshkin
                                 
                                 
                                 
                                 .include "m32def.inc"
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATmega32.xml ************
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "m32def.inc"
                                 ;* Title             : Register/Bit Definitions for the ATmega32
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATmega32
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _M32DEF_INC_
                                 
                                 #endif  /* _M32DEF_INC_ */
                                 
                                 
                                 .equ SREG_temp = 0x012B
                                 
                                 
                                 .equ slave_adress = 0x27 //  I2C  
                                 
                                 
                                 //    
                                 .equ debounce_time = 0x0A  ;        
                                 .equ check_pin_time = 0x14 ;     
                                 .equ debounce_end_time = 0x0A ;        
                                 .equ RAM_BUTTON_UP = 0x01     ;    0x..  
                                 .equ RAM_BUTTON_DOWN = 0x02   ;    0x..  
                                 .equ RAM_BUTTON_OK = 0x03     ;    0x..  
                                 .equ RAM_BUTTON_HOME = 0x04   ;    0x..  
                                 .equ RAM_BUTTON_PROG = 0x05   ;    0x..  
                                 .equ RAM_BUTTON_STEP = 0x06   ;    0x..  
                                 .equ RAM_BUTTON_BLOCK = 0x07  ;    0x..  
                                 .equ RAM_ACTIVE_BUTTON = 0x0103 ;   ,       ,       
                                 .equ access_to_button_flags = 0x0111 ;   ,      ,   -      
                                 .equ B1 = 3 ; PA3 = 3       B1 
                                 
                                 
                                 
                                 
                                 
                                 //     
                                 .equ RAM_step_size = 0x0104 ;     ,       (0,1 , 1 , 10 )
                                 .equ RAM_position_number = 0x0107 ;  ,      (0-100)
                                 .equ SHAGOVIK_timer1_on = 0x0112 ;     1  . 0x00 - ; 0x01 - .
                                 /* 
                                      OCR1A  StelthChop: 2000 (DEC).
                                      OCR1A  SpreadCycle: ? (DEC).
                                 */
                                 //.equ SHAGOVIK_freq_maxH = 0x0B ;      STEP.     OCR1A
                                 //.equ SHAGOVIK_freq_maxL = 0xB8 ;      STEP.     OCR1A
                                 .equ SHAGOVIK_freq_maxH = 0x02 ;      STEP.     OCR1A
                                 .equ SHAGOVIK_freq_maxL = 0xAB ;      STEP.     OCR1A
                                 .equ SHAGOVIK_freq_minH = 0x07 ;      STEP.     OCR1A
                                 .equ SHAGOVIK_freq_minL = 0xD0 ;      STEP.     OCR1A
                                 .equ SHAGOVIK_pid_prop = 0x6C ;   
                                 .equ SHAGOVIK_step = 0x10     ;  (1, 1/2, 1/4, 1/8, 1/16)
                                 .equ SHAGOVIK_X_TRULY_HIGH_EEPROM = 0x00 ; . .     EEPROM(      ,   .     )
                                 .equ SHAGOVIK_X_TRULY_LOW_EEPROM = 0x03  ; . .
                                 .equ SHAGOVIK_X_TRULY_HIGH_RAM = 0x0132  ; . .     
                                 .equ SHAGOVIK_X_TRULY_LOW_RAM = 0x0133   ; . .     
                                 .equ SHAGOVIK_X0_HIGH_RAM = 0x0108    ;    
                                 .equ SHAGOVIK_X0_LOW_RAM = 0x0109     ;    
                                 .equ SHAGOVIK_X1_HIGH_RAM = 0x010A    ;     
                                 .equ SHAGOVIK_X1_LOW_RAM = 0x010B     ;    
                                 .equ SHAGOVIK_X2_HIGH_RAM = 0x010C    ;     
                                 .equ SHAGOVIK_X2_LOW_RAM = 0x010D     ;    
                                 .equ SHAGOVIK_OCR1A_BOTTOM_HIGH_RAM = 0x010F ;    OCR1A,       
                                 .equ SHAGOVIK_OCR1A_BOTTOM_LOW_RAM = 0x0110 ; ;    OCR1A,       
                                 .equ SHAGOVIK_DELTA_L_HIGH = 0x01;      ,    STEP,      0,1   1/16
                                 .equ SHAGOVIK_DELTA_L_LOW = 0x90 ;      ,    STEP,      0,1   1/16
                                 //.equ SHAGOVIK_DELTA_L_HIGH = 0x00; 
                                 //.equ SHAGOVIK_DELTA_L_LOW = 0x05 ;
                                 
                                 //   ,   
                                 .equ SHAGOVIK_r31 = 0x0117
                                 .equ SHAGOVIK_r30 = 0x0118
                                 .equ SHAGOVIK_r29 = 0x0119
                                 .equ SHAGOVIK_r28 = 0x011A
                                 .equ SHAGOVIK_r27 = 0x011B
                                 .equ SHAGOVIK_r26 = 0x011C
                                 .equ SHAGOVIK_r25 = 0x011D
                                 .equ SHAGOVIK_r24 = 0x011E
                                 .equ SHAGOVIK_r23 = 0x011F
                                 .equ SHAGOVIK_r22 = 0x0126
                                 .equ SHAGOVIK_r21 = 0x0127
                                 .equ SHAGOVIK_r20 = 0x0128
                                 .equ SHAGOVIK_r19 = 0x0129
                                 .equ SHAGOVIK_r18 = 0x012A
                                 
                                 .equ STEP = 5
                                 .equ DIR = 4
                                 //   HOME
                                 .equ INDSIGNAL = 7
                                 /*
                                   :
                                  0 -    ,    2    ,      4 
                                  1 -     ,      ,     
                                  2 -    ,   1    
                                  3 -  ,     
                                  4 -   ,    1   
                                 */
                                 //      0 
                                 .equ HOME_SHAGOVIK_DELTA_HIGH_0 = 0x00 
                                 .equ HOME_SHAGOVIK_DELTA_LOW_0 = 0x14 
                                 //      2 
                                 .equ HOME_SHAGOVIK_DELTA_HIGH_2 = 0x00 
                                 .equ HOME_SHAGOVIK_DELTA_LOW_2 = 0x14 
                                 //      4 
                                 .equ HOME_SHAGOVIK_DELTA_HIGH_4 = 0x00 
                                 .equ HOME_SHAGOVIK_DELTA_LOW_4 = 0x01
                                 
                                 .equ HOME_SHAGOVIK_freq_maxH = 0x02 ;      STEP.     OCR1A 
                                 .equ HOME_SHAGOVIK_freq_maxL = 0xAB ;      STEP.     OCR1A 
                                 .equ HOME_SHAGOVIK_freq_minH = 0x07 ;      STEP.     OCR1A
                                 .equ HOME_SHAGOVIK_freq_minL = 0xD0 ;      STEP.     OCR1A
                                 .equ INIT_FLAG = 0x0113 ;   ,   ,    ,      
                                 
                                 
                                 
                                 //   I2c
                                 .equ I2C_DATA = 0x0120 ;    ,        i2c
                                 .equ RAM_slave_adress = 0x0100 ;    ,     i2c
                                 .equ START = 0x08 ;    i2c
                                 .equ REPEATED_START = 0x10 ;   
                                 .equ MT_SLA_ACK = 0x18 ;      . ACK  
                                 .equ MT_DATA_ACK = 0x28 ;   . ACK  
                                 
                                 
                                 //      
                                 .equ ENCODER_CONTR_MOT_PRESS_OK = 0x0114 ;   ,     
                                 .equ ENCODER_CONTR_MOT_PRINT_X2 = 0x0115 ;   ,      2,    
                                 .equ ENCODER_CONTR_MOT_ENCODER_PROCESSING = 0x0116 ;   ,      
                                 .equ ENCODER_CONTR_MOT_SAVE_X = 0x012C  ;    3 ,         EEPROM
                                 .equ ENCODER_CONTR_MOT_SAVE_X_COUNTER_HIGH = 0x012F ;    3 
                                 .equ ENCODER_CONTR_MOT_SAVE_X_COUNTER_MID = 0x012E
                                 .equ ENCODER_CONTR_MOT_SAVE_X_COUNTER_LOW = 0x012D ;    3 
                                 .equ ENCODER_CONTR_MOT_SAVE_X_TIME_HIGH = 0x01 ;      ,     
                                 .equ ENCODER_CONTR_MOT_SAVE_X_TIME_MID = 0xFF ;      ,     
                                 .equ ENCODER_CONTR_MOT_SAVE_X_TIME_LOW = 0xFF  ;      ,     
                                 
                                 
                                 //   
                                 .equ LED_prog = 5
                                 .equ LED_ok = 7
                                 .equ LED_block = 4
                                 .equ LED_home = 6
                                 
                                 
                                 //   2
                                 .equ TIM2_counter_high = 0x0131 ;  
                                 .equ TIM2_counter_low = 0x0130
                                 
                                 //   PROG
                                 .equ PROG_FUNC_WORK_STATUS_RAM = 0x0134 ; , ,   PROG  .   BLOCK, PROG  OK ,   PROG  
                                 
                                 /*
                                 //      uint32_t
                                 .equ MILLIS_1 = 0x0135 //  
                                 .equ MILLIS_2 = 0x0136
                                 .equ MILLIS_3 = 0x0137
                                 .equ MILLIS_4 = 0x0138 //  
                                 */
                                 
                                 //     SET_BLOCK_CLK_TIME 
                                 .equ SET_BLOCK_CLK_COUNTER_HIGH = 0x0135
                                 .equ SET_BLOCK_CLK_COUNTER_MID = 0x0136
                                 .equ SET_BLOCK_CLK_COUNTER_LOW = 0x0137
                                 .equ SET_BLOCK_CLK_FLAG = 0x0138
                                 .equ SET_BLOCK_CLK_TIME_HIGH = 0x08 // 0x12
                                 .equ SET_BLOCK_CLK_TIME_MID = 0xFF
                                 .equ SET_BLOCK_CLK_TIME_LOW = 0xFF
                                 
                                 //       EXIT_FROM_SETTINGS_CLK_TIME 
                                 .equ EXIT_FROM_SETTINGS_CLK_COUNTER_HIGH = 0x0139
                                 .equ EXIT_FROM_SETTINGS_CLK_COUNTER_MID = 0x013A
                                 .equ EXIT_FROM_SETTINGS_CLK_COUNTER_LOW = 0x013B
                                 .equ EXIT_FROM_SETTINGS_CLK_FLAG = 0x013C
                                 .equ EXIT_FROM_SETTINGS_CLK_TIME_HIGH = 0x08 // 0x12
                                 .equ EXIT_FROM_SETTINGS_CLK_TIME_MID = 0xFF
                                 .equ EXIT_FROM_SETTINGS_CLK_TIME_LOW = 0xFF
                                 
                                 .equ DIG_0 = 0x30
                                 .equ DIG_1 = 0x31
                                 .equ DIG_2 = 0x32
                                 .equ DIG_3 = 0x33
                                 .equ DIG_4 = 0x34
                                 .equ DIG_5 = 0x35
                                 .equ DIG_6 = 0x36
                                 .equ DIG_7 = 0x37
                                 .equ DIG_8 = 0x38
                                 .equ DIG_9 = 0x39
                                 
                                 .equ SYM_P = 0x50
                                 .equ SYM_A = 0x41
                                 .equ SYM_R = 0x52
                                 .equ SYM_K = 0x4B
                                 
                                 /*   :
                                 	  BLOCK  OK ,    EEPROM,     
                                 	   ,   
                                 	   HOME,       
                                 	  BLOCK, PROG  OK ,   PROG  
                                 */
                                 
                                 /*      = 0x013C*/
                                 
000000 940c 002a                 jmp RESET 
000002 940c 05a7                 jmp EXT_INT0 
000004 940c 0944                 jmp EXT_INT1 
000006 940c 0945                 jmp EXT_INT2 
000008 940c 057b                 jmp TIM2_COMP
00000a 940c 0946                 jmp TIM2_OVF
00000c 940c 0947                 jmp TIM1_CAPT
00000e 940c 066b                 jmp TIM1_COMPA
000010 940c 0948                 jmp TIM1_COMPB
000012 940c 0949                 jmp TIM1_OVF
000014 940c 01db                 jmp TIM0_COMP
000016 940c 094a                 jmp TIM0_OVF
000018 940c 094b                 jmp SPI_STC
00001a 940c 094c                 jmp USART_RXC
00001c 940c 094d                 jmp USART_UDRE
00001e 940c 094e                 jmp USART_TXC
000020 940c 094f                 jmp ADC1
000022 940c 0950                 jmp EE_RDY
000024 940c 0951                 jmp ANA_COMP
000026 940c 0952                 jmp TWI
000028 940c 0953                 jmp SPM_RDY
                                 
                                 
                                 ;
                                 RESET: 
00002a e004                      	ldi r16, high(0x042F); Main program start  
00002b bf0e                      	out SPH,r16 ; 
00002c e20f                      	ldi r16, low(0x042F) ;      ATmega32
00002d bf0d                      	out SPL,r16
                                 	
00002e d167                      	rcall init_values
00002f d113                      	rcall init_port ;  
000030 d029                      	rcall init_I2C ;  I2c
000031 d0de                      	rcall init_timer0 ;  timer0   
000032 d0e8                      	rcall init_timer1 ;  timer1    
                                 	//rcall init_timer2 ;  timer2   ,   
                                 	
000033 940e 0849                 	call set_value_of_positions_to_eeprom ;   BLOCK  PROG ,    EEPROM,     
                                 	
000035 d057                      	rcall lcd1602_init ;  LCD1602
000036 d2fa                      	rcall Create_char ;   
000037 d16a                      	rcall init_parameters ;  ,        ()
000038 d12d                      	rcall start_title ;        
                                 
000039 d7b0                      	rcall test_random ;    ,   
00003a d4f4                      	rcall home_and_go_to_last_position ;   ,     ,    
00003b 940e 0880                 	call check_block_prog_ok ;     ,      
                                 	//  
00003d 2700                      	clr r16
00003e 2711                      	clr r17
                                 	
                                 	
00003f d2ca                      	rcall Button_block_func ;    
                                 	
                                 	//ldi r16,0b11110000
                                 	//out PORTC,r16
                                 	
000040 9478                      	sei ; Enable interrupts
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 main:
000041 d4dd                      rcall interrupt_process ; -       while,    1 (    step-)
000042 d5db                      rcall save_position_X_after_3_sec ;      3     
000043 940e 08b0                 call set_block_clk               //    10 ,    
000045 940e 08f9                 call exit_from_settings_mode_clk //      10 ,    
000047 940e 0880                 call check_block_prog_ok
                                 
000049 9100 0111                 lds r16,access_to_button_flags ;        
00004b ff00                      SBRS r16,0 ;   access_to_button_flags   0,      
00004c cff4                      rjmp main
00004d d47c                      rcall Button_block
00004e 9100 0111                 lds r16,access_to_button_flags ;        
000050 ff01                      SBRS r16,1 ;    1,     
000051 cfef                      rjmp main
                                 
000052 d3cf                      rcall Button_up
000053 d3ea                      rcall Button_down
000054 d405                      rcall Button_ok
000055 d43c                      rcall Button_prog
000056 d41f                      rcall Button_home
000057 d456                      rcall Button_step
                                 
000058 d5a4                      rcall check_encoder_press //   
                                 
000059 cfe7                      rjmp main
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //  I2C
                                 init_I2C:
                                 	//ldi r16,0b00000011
                                 	//out PORTC,r16
                                 	;   SCL (). SCLfreq = CPU clock frequency / (16 + 2 * (TWBR) * 4 * (PrescalerValue))
00005a e00a                      	ldi r16,0x0A
00005b b900                      	out TWBR,r16 ; Bit rate register
                                 
00005c e000                      	ldi r16,0x00 
00005d b901                      	out TWSR,r16 ;     1
                                 
                                 	;  Slave .   
                                 	;ldi r16,0x27 
                                 	;lsr r16 ;        ,      7 ,      TWAR
                                 			;    ,    
                                 	;sts TWAR,r16 ;     1602,  0x27    
00005e 9508                      ret
                                 
                                 
                                 
                                 
00005f 0000                      i2c_write: nop
                                 ; TWEN -  I2C
                                 ; TWSTA -  START condition
                                 ; TWSTO -  STOP condition
                                 ; TWINT -  1   
                                 
                                 
                                 
                                 ;     ,   .   TWINT,    
000060 9101                      	ld r16,Z+ ;     ,      Z,   
000061 b903                      	out TWDR, r16       
000062 e804                      	ldi r16, (1<<TWINT) | (1<<TWEN) 
000063 bf06                      	out TWCR, r16
                                 
                                 ;    TWINT .   ,           ACK/NACK
                                 wait3: 
000064 b706                      	in r16,TWCR 
000065 ff07                      	sbrs r16,TWINT 
000066 cffd                      	rjmp wait3
                                 
                                 ;    TWSR,     MT_DATA_ACK (ACK  ),   .   
                                 ; DATA has been transmitted; ACK has been received
000067 b101                      	in r16,TWSR 
000068 7f08                      	andi r16, 0xF8 
000069 3208                      	cpi r16, MT_DATA_ACK ; .equ START = 0x18
00006a f409                      	brne ERROR
00006b 9508                      	ret
                                 
                                 ERROR:
                                 
00006c 9508                      ret
                                 
                                 
                                 
                                 
                                 i2c_start:
                                 ;  START
00006d ea04                      	ldi r16, (1<<TWINT) | (1<<TWSTA) | (1<<TWEN) | (0<<TWSTO)
00006e bf06                      	out TWCR, r16
                                 
                                 ;   TWINT   1,    ,   START  
                                 wait1: 
00006f b706                      	in r16,TWCR 
000070 ff07                      	sbrs r16,TWINT 
000071 cffd                      	rjmp wait1
                                 
                                 ;   START,     START,   .   
000072 b101                      	in r16,TWSR 
000073 7f08                      	andi r16, 0xF8 
000074 3008                      	cpi r16, START ; .equ START = 0x08
000075 f011                      	breq next1 ;      ,   
000076 3100                      	cpi r16, REPEATED_START ;     
000077 f471                      	brne ERROR_start ;     ,   
                                 
                                 next1:
                                 ;               SLA_W -  +  
000078 9100 0100                 	lds r16,RAM_slave_adress ; .equ SLA_W = 0b01001110 -  0x27    0  
00007a 0f00                      	lsl r16 ;  ,    XXXX XXX0 -   ,  0   
00007b b903                      	out TWDR, r16 
00007c e804                      	ldi r16, (1<<TWINT) | (1<<TWEN) 
00007d bf06                      	out TWCR, r16
                                 
                                 ;    TWINT .   ,   SLA_W       ACK/NACK
                                 wait2: 
00007e b706                      	in r16,TWCR 
00007f ff07                      	sbrs r16,TWINT 
000080 cffd                      	rjmp wait2
                                 
                                 ;    TWSR,     MT_SLA_ACK (ACK  ),   .   
                                 ; SLA+W has been transmitted; ACK has been received
000081 b101                      	in r16,TWSR 
000082 7f08                      	andi r16, 0xF8 
000083 3108                      	cpi r16, MT_SLA_ACK ; .equ START = 0x18
000084 f409                      	brne ERROR_start
000085 9508                      	ret
                                 
                                 ERROR_start:
000086 9508                      ret
                                 
                                 
                                 
                                 i2c_stop:
                                 ;  STOP condition
000087 e904                      	ldi r16, (1<<TWINT) | (1<<TWEN) | (1<<TWSTO) 
000088 bf06                      	out TWCR, r16 
                                 
000089 e800                      	ldi r16, (1<<TWINT) | (0<<TWEN) | (0<<TWSTO) | (0<<TWSTA) ;  
00008a bf06                      	out TWCR, r16 
00008b 9508                      	ret
                                 
00008c 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
00008d 0000                      lcd1602_init: nop
00008e 2711                          clr r17
00008f 9310 0102                 	sts 0x0102,r17 ;       RS  R/W
                                 
000091 e100                      	ldi r16,0x10
000092 d017                      	rcall nopdelay_1ms ;   16 
                                 
                                 	;    
000093 e303                      	ldi r16,0b00110011 ;   
000094 d062                      	rcall LCD1602_send_8bit_command ; 
                                 
000095 e005                      	ldi r16,0x05
000096 d013                      	rcall nopdelay_1ms ;   4 
                                 
000097 e303                      	ldi r16,0b00110011 ;   
000098 d05e                      	rcall LCD1602_send_8bit_command ; 
                                 
000099 e001                      	ldi r16,0x01
00009a d00f                      	rcall nopdelay_1ms ;   1 
                                 
00009b e202                      	ldi r16,0b00100010 ;   4- 
00009c d05a                      	rcall LCD1602_send_8bit_command
                                 	
00009d e208                      	ldi r16,0b00101000 ; 
00009e d026                      	rcall LCD1602_send_command
                                 	
00009f e008                      	ldi r16,0b00001000
0000a0 d024                      	rcall LCD1602_send_command
                                 	
0000a1 e001                      	ldi r16,0b00000001 ;   
0000a2 d022                      	rcall LCD1602_send_command
                                 
0000a3 e003                      	ldi r16,0x03 ; ,        
0000a4 d005                      	rcall nopdelay_1ms
                                 	
0000a5 e006                      	ldi r16,0b00000110 ;    -,      
0000a6 d01e                      	rcall LCD1602_send_command
                                 	
0000a7 e00c                      	ldi r16,0b00001100 ;   (D=1),    (C=0),     (B=0)
0000a8 d01c                      	rcall LCD1602_send_command
0000a9 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 ;  .   r16      .  r16 = 60,   60 
                                 nopdelay_1ms: 
                                 cycle3:
0000aa e420                      ldi r18,0x40
                                 cycle2:
0000ab e311                      ldi r17,0x31
0000ac 0000                      nop
0000ad 0000                      nop
                                 cycle1:
0000ae 0000                      nop
0000af 0000                      nop
0000b0 951a                      dec r17
0000b1 f7e1                      brne cycle1
0000b2 952a                      dec r18
0000b3 f7b9                      brne cycle2
0000b4 950a                      dec r16
0000b5 f7a1                      brne cycle3
0000b6 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 ;   8-  ,    ,    .  1-  : 0x00 - 0x0F.  : 0x40 - 0x4F
0000b7 0000                      Set_cursor: nop
0000b8 2f40                      	mov r20,r16 ;    r20,  ,    .         (00.0  00  )
0000b9 6800                      	ori r16,0b10000000 ;  8- ,  DB7  
0000ba 2711                      	clr r17
0000bb 9310 0102                 	sts 0x0102,r17 ; RS  R/W  0    
0000bd d007                      	rcall LCD1602_send_command ;  
0000be 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
0000bf 0000                      Send_instruction: nop
0000c0 2711                      	clr r17
0000c1 9310 0102                 	sts 0x0102,r17 ; RS  R/W  0    
0000c3 d001                      	rcall LCD1602_send_command ;  
0000c4 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 ;     D7-D0  4- .      E. D7 - D6 - D5 - D4 - LED - E - R/W - RS
0000c5 0000                      LCD1602_send_command: nop
0000c6 2fb0                          mov r27,r16  ;      r25
0000c7 600c                      	ori r16,0b00001100 ;          
0000c8 9110 0102                 	lds r17,0x0102 ;  ,     RS  R/W 
0000ca 2b01                      	or r16,r17 ;   RS  R/W 
0000cb 7f0d                      	andi r16,0b11111101 ;  R/W
0000cc 9300 0120                 	sts I2C_DATA,r16 ;     ,   
                                 
                                     ;ldi r16,slave_adress
                                     ;sts 0x0100,r16 ;         
                                 
0000ce 9100 0120                 	lds r16,I2C_DATA ;  ,  
0000d0 7f0b                      	andi r16,0b11111011 ;    0
0000d1 9300 0121                 	sts 0x0121,r16 ;    2- ,   
                                 	;    ,     
                                 	
0000d3 0fbb                      	lsl r27
0000d4 0fbb                      	lsl r27
0000d5 0fbb                      	lsl r27
0000d6 0fbb                      	lsl r27 
0000d7 2f0b                      	mov r16,r27 ;   r16
                                 	
0000d8 600c                      	ori r16,0b00001100 ;          
0000d9 9110 0102                 	lds r17,0x0102
0000db 2b01                      	or r16,r17
0000dc 7f0d                      	andi r16,0b11111101 ;  R/W
0000dd 9300 0122                 	sts 0x0122,r16 ;    3- ,   
                                 
                                 
0000df 9100 0122                 	lds r16,0x0122 ;  ,  
0000e1 7f0b                      	andi r16,0b11111011 ;    0
0000e2 9300 0123                 	sts 0x0123,r16 ;    4- ,   
                                 
0000e4 93ff                      	push r31 ;    
0000e5 93ef                      	push r30
                                 	//   .  Z    ,     i2c
0000e6 e0f1                      	ldi r31,0x01
0000e7 e2e0                      	ldi r30,0x20 
0000e8 df84                      	rcall i2c_start ;    i2c
                                 	//     ,  = 1
0000e9 df75                      	rcall i2c_write ;  
                                 	//     ,  = 0.      .  
0000ea df74                      	rcall i2c_write ;  
                                 	//     ,  = 1
0000eb df73                      	rcall i2c_write ;  
                                 	//      ,  = 0. 
0000ec df72                      	rcall i2c_write ;  
0000ed df99                      	rcall i2c_stop ;  
                                 
0000ee 91ef                      	pop r30
0000ef 91ff                      	pop r31
0000f0 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
0000f1 0000                      Write_symbol: nop
0000f2 e011                      	ldi r17,0x01 ; RS = 1, R/W = 0 
0000f3 9310 0102                 	sts 0x0102,r17 ; 
0000f5 dfcf                      	rcall LCD1602_send_command ;  
0000f6 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 ;       ,       8- 
0000f7 0000                      LCD1602_send_8bit_command: nop
0000f8 2f90                          mov r25,r16  ;      r25
0000f9 600c                      	ori r16,0b00001100 ;          
0000fa 7f0c                      	andi r16,0b11111100 ;    
0000fb 9300 0120                 	sts I2C_DATA,r16 ;     ,   
                                 	//   .  Z    ,     i2c
0000fd e0f1                      	ldi r31,0x01
0000fe e2e0                      	ldi r30,0x20 
                                 
0000ff e207                          ldi r16,slave_adress
000100 9300 0100                     sts 0x0100,r16 ;         
000102 df6a                      	rcall i2c_start ;    i2c
000103 df5b                      	rcall i2c_write ;     ,  = 1
000104 df82                      	rcall i2c_stop  ;    i2c
                                 	//   .  Z    ,     i2c
000105 e0f1                      	ldi r31,0x01
000106 e2e0                      	ldi r30,0x20 
                                 
000107 9100 0120                 	lds r16,I2C_DATA ;  ,  
000109 7f0b                      	andi r16,0b11111011 ;    0
00010a 9300 0120                 	sts I2C_DATA,r16 ;     ,   
                                 	;     ,  = 0.      .  
00010c df60                      	rcall i2c_start ;    i2c
00010d df51                      	rcall i2c_write ;    i2c
00010e df78                      	rcall i2c_stop  ;    i2c
00010f 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 init_timer0:
                                 //  TIMER0   
000110 2700                      	clr r16 
000111 bf02                      	out TCNT0,r16 ;    
                                 
000112 e000                      	ldi r16,0b00000000  ;    
000113 bf03                      	out TCCR0,r16 ; 
                                 
000114 ef09                      	ldi r16,0xF9 ; F9
000115 bf0c                      	out OCR0,r16 ;   249    ,          1 
                                 
000116 b709                      	in r16,TIMSK
000117 6002                      	ori r16,0b00000010  
000118 bf09                      	out TIMSK,r16 ;     .  sts,     TIMSK0   
000119 bf08                      	out TIFR,r16  ;  ,     . TIFR0    "64 I/O Registers" (0x0020 - 0x005F)
                                 
                                 
00011a 9508                      ret
                                 
                                 
                                 
                                 //  Timer1    
                                 init_timer1:
                                 	//    
00011b e000                      	ldi r16, (0<<WGM10) | (0<<WGM11) 
00011c bd0f                      	out TCCR1A,r16 
                                 
                                 	;ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (1<<CS10) ;   1.
00011d e008                      	ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (0<<CS10) ;    
00011e bd0e                      	out TCCR1B,r16
                                 
                                 	//  TCNT1
00011f e000                      	ldi r16,0x00
000120 e010                      	ldi r17,0x00
000121 d009                      	rcall TIM16_WriteTCNT1 ;   TCNT1 r17:r16
                                 
                                 	//   OCR1A.  
000122 ed00                      	ldi r16,SHAGOVIK_freq_minL
000123 e017                      	ldi r17,SHAGOVIK_freq_minH
000124 d012                      	rcall TIM16_WriteOCR1A ;   OCR1A r17:r16
                                 	//      OCR1A
000125 b709                      	in r16,TIMSK
000126 e110                      	ldi r17, (1<<OCIE1A)
000127 2b01                      	or r16,r17
000128 bf09                      	out TIMSK,r16
                                 	//   
000129 bf08                      	out TIFR,r16
00012a 9508                      ret
                                 /*
                                 // Prescaler = 32. Ticks = 250. OCR2 period = 0.0005.  10    (OCR2 period * 20000) 
                                 init_timer2:
                                 //  TIMER0   
                                 	clr r16 
                                 	out TCNT2,r16 ;    
                                 
                                 	ldi r16,0b00000011 // prescaler = 32  
                                 	out TCCR2,r16 
                                 
                                 	ldi r16,0xF9 ; 249
                                 	out OCR2,r16 ;   249    ,          1 
                                 
                                 	in r16,TIMSK
                                 	ori r16,0b10000000  
                                 	out TIMSK,r16 ;     .  sts,     TIMSK0   
                                 	out TIFR,r16  ; TIFR0    "64 I/O Registers" (0x0020 - 0x005F)
                                 ret
                                 */
                                 
                                 //    TCNT1
                                 TIM16_WriteTCNT1:
                                 	//    
00012b b72f                      	in r18,SREG
                                 	//  
00012c 94f8                      	cli
                                 	//   TCNT1  r17:r16
00012d bd1d                      	out TCNT1H,r17
00012e bd0c                      	out TCNT1L,r16
                                 	//   
00012f bf2f                      	out SREG,r18
000130 9508                      ret
                                 
                                 //    TCNT1
                                 TIM16_ReadTCNT1:
                                 	//    
000131 b72f                      	in r18,SREG
                                 	//  
000132 94f8                      	cli
                                 	//  TCNT1  r17:r16
000133 b50c                      	in r16,TCNT1L
000134 b51d                      	in r17,TCNT1H
                                 	//   
000135 bf2f                      	out SREG,r18
000136 9508                      ret
                                 
                                 //    OCR1A
                                 TIM16_WriteOCR1A:
                                 	//    
000137 b72f                      	in r18,SREG
                                 	//  
000138 94f8                      	cli
                                 	//   TCNT1  r17:r16
000139 bd1b                      	out OCR1AH,r17
00013a bd0a                      	out OCR1AL,r16
                                 	//   
00013b bf2f                      	out SREG,r18
00013c 9508                      ret
                                 
                                 
                                 //    OCR1A
                                 TIM16_ReadOCR1A:
                                 	//    
00013d b72f                      	in r18,SREG
                                 	//  
00013e 94f8                      	cli
                                 	//  OCR1A  r17:r16
00013f b50a                      	in r16,OCR1AL
000140 b51b                      	in r17,OCR1AH
                                 	//   
000141 bf2f                      	out SREG,r18
000142 9508                      ret
                                 
                                 /*
                                 //  Timer2    
                                 init_timer2:
                                 	clr r16
                                 	out TCNT2,r16 ;    
                                 
                                 	ldi r16,0b00001000 ;    . WGM21 = 1   
                                 	out TCCR2,r16 ; 
                                 
                                 	ldi r16,0xC7 ;    10   OCR2 = 249
                                 	out OCR2,r16 ;  
                                 
                                 	in r16,TIMSK ;      
                                 	ori r16,0b10000000
                                 	out TIMSK,r16 ;    . OCIE2 = 1 
                                 	out TIFR,r16  ;   . TIFR0    "64 I/O Registers" (0x0020 - 0x005F)
                                 ret
                                 */
                                 
                                 
000143 0000                      init_port: nop
                                 	//  
000144 2700                      	clr r16
000145 bb07                      	out DDRB,r16 ; PB1-PB4  
000146 e000                      	ldi r16,0b00000000
000147 bb08                      	out PORTB,r16 ; PB1-PB4 
000148 2700                      	clr r16
000149 bb0a                      	out DDRA,r16 ; PA0-PA3  
00014a e000                      	ldi r16,0b00000000
00014b bb0b                      	out PORTA,r16 ; PA0-PA3 
                                 
                                 	//      
00014c 2700                      	clr r16
00014d bb01                      	out DDRD,r16 ;  PD2(INT0)  
00014e e004                      	ldi r16,0b00000100
00014f bb02                      	out PORTD,r16 ; ;  PD2(INT0) 
                                 	;  PD2(INT0)     (..     )
000150 b705                      	in r16,MCUCR
                                 	//ori r16,0b00000011
000151 e003                      	ldi r16,0b00000011
000152 bf05                      	out MCUCR,r16 ; ISC01  ISC00       
000153 e400                      	ldi r16,0b01000000
000154 bf0b                      	out GICR,r16 ; INT0        INT0
                                 
                                 	//   
000155 ef00                      	ldi r16,0b11110000
000156 bb04                      	out DDRC,r16 ; PC4-PC7  
000157 2700                      	clr r16
000158 bb05                      	out PORTC,r16 ;   
                                 	
                                 	//   STEP, DIR, ENABLE
000159 b30a                      	in r16,DDRA
00015a 6700                      	ori r16,0b01110000
00015b bb0a                      	out DDRA,r16 ; STEP, DIR , ENABLE  
00015c b30b                      	in r16,PORTA
00015d 780f                      	andi r16,0b10001111
00015e bb0b                      	out PORTA,r16 ; STEP, DIR   
                                 
                                 	//     
00015f b30a                      	in r16,DDRA
000160 770f                      	andi r16,0b01111111
000161 bb0a                      	out DDRA,r16 ; INDSIGNAL  
000162 b30b                      	in r16,PORTA
000163 770f                      	andi r16,0b01111111
000164 bb0b                      	out PORTA,r16 ; INDSIGNAL  
000165 9508                      ret
                                 
                                 
                                 
                                 /*
                                 [][ ][ ][ ][ ][ ][][][][ ][ ][ ][][][][.]
                                 [5][2][.][0][ ][ ][1][0][.][0][ ][ ][ ][9][9][ ]
                                 */
000166 0000                      start_title: nop
000167 e000                          ldi r16,0x00 ;      
000168 df4e                      	rcall Set_cursor
                                 
                                 	;  
000169 e508                      	ldi r16,0x58 ;   "X"
00016a df86                      	rcall Write_symbol
                                 
00016b e20c                      	ldi r16,0x2C ;   ","
00016c df84                      	rcall Write_symbol
                                 
00016d e60d                      	ldi r16,0x6D ;   "m"
00016e df82                      	rcall Write_symbol
                                 
00016f e60d                      	ldi r16,0x6D ;   "m"
000170 df80                      	rcall Write_symbol
                                 
000171 e006                      	ldi r16,0x06 
000172 df44                      	rcall Set_cursor ;       
                                 
000173 e000                      	ldi r16,0x00 ;   ""
000174 df7c                      	rcall Write_symbol
                                 
000175 e401                      	ldi r16,0x41 ;   ""
000176 df7a                      	rcall Write_symbol
                                 
000177 e001                      	ldi r16,0x01 ;   ""
000178 df78                      	rcall Write_symbol
                                 
000179 e00c                      	ldi r16,0x0C 
00017a df3c                      	rcall Set_cursor ;    13-   
                                 
00017b e002                      	ldi r16,0x02 ;   ""
00017c df74                      	rcall Write_symbol
                                 
00017d e40f                      	ldi r16,0x4F ;   "O"
00017e df72                      	rcall Write_symbol
                                 
00017f e003                      	ldi r16,0x03 ;   ""
000180 df70                      	rcall Write_symbol
                                 
000181 e20e                      	ldi r16,0x2E ;   "."
000182 df6e                      	rcall Write_symbol
                                 
                                 	//      
000183 e400                      	ldi r16,0x40 
000184 df32                      	rcall Set_cursor
                                 	
                                 	/*    */
                                 	//    X,    
000185 91a0 010c                 	lds r26,SHAGOVIK_X2_HIGH_RAM 
000187 9190 010d                 	lds r25,SHAGOVIK_X2_LOW_RAM 
                                 
000189 d1fa                      	rcall lcd_print_number ;  -,     r26:r25   
                                 
                                 	//   
00018a e406                      	ldi r16,0x46
00018b df2b                      	rcall Set_cursor
                                 
00018c 27aa                      	clr r26 ;     
00018d e09a                      	ldi r25,0x0A 
00018e 9390 0104                 	sts RAM_step_size,r25 ;     
000190 d1f3                      	rcall lcd_print_number ;  -,     r26:r25   
                                 
                                 	//   
000191 27aa                      	clr r26 ;     
000192 9190 0107                 	lds r25,RAM_position_number ;      (0-99)
                                 	// call function that deside print number or name of position
000194 d250                      	rcall lcd_print_number_or_name_of_position
                                 	
000195 9508                      ret
                                 
                                 //  ,      
                                 init_values:
000196 2700                      	clr r16
000197 9300 0112                 	sts SHAGOVIK_timer1_on,r16
                                 
000199 9300 0138                 	sts SET_BLOCK_CLK_FLAG,r16 //     
                                 	
00019b e001                      	ldi r16,0x01
00019c 9300 013c                 	sts EXIT_FROM_SETTINGS_CLK_FLAG,r16 //     
                                 
00019e e000                      	ldi r16,0x00
00019f 9300 0134                 	sts PROG_FUNC_WORK_STATUS_RAM,r16 ;       . 0 -    . 1 - .
0001a1 9508                      ret
                                 
                                 
                                 
                                 
                                 //  ,        ()
                                 init_parameters:
                                 	//      EEPROM (0-100) (  EEPROM - 0x0000)  EEPROM ---- --XX XXXX XXXX.   10  
0001a2 e020                      	ldi r18,0x00
0001a3 e010                      	ldi r17,0x00 ;   EEPROM 00 0000 0000
0001a4 d34c                      	rcall EEPROM_read ;    ,  r18:r17   ,  r16
0001a5 9300 0107                 	sts RAM_position_number,r16 ;     
                                 
0001a7 d023                      	rcall get_position_value_from_eeprom ;   EEPROM        
                                 	//        
0001a8 e020                      	ldi r18,0x00
0001a9 e012                      	ldi r17,0x02 ; EEPROM  0x0002
0001aa d346                      	rcall EEPROM_read
                                 
0001ab 3f0f                      	cpi r16,0xFF 
0001ac f071                      	breq position_priority //    ,   ,   
                                 
                                 //  ,    ,    
                                 last_move_priority:
0001ad e013                      	ldi r17,0x03
0001ae e020                      	ldi r18,0x00 ;     EEPROM 0x0003
0001af d341                      	rcall EEPROM_read
0001b0 9300 010d                 	sts SHAGOVIK_X2_LOW_RAM,r16 ;        
0001b2 9300 0133                 	sts SHAGOVIK_X_TRULY_LOW_RAM,r16 ;     
                                 
0001b4 e014                      	ldi r17,0x04
0001b5 e020                      	ldi r18,0x00 ;     EEPROM 0x0003
0001b6 d33a                      	rcall EEPROM_read
0001b7 9300 010c                 	sts SHAGOVIK_X2_HIGH_RAM,r16 ;       
0001b9 9300 0132                 	sts SHAGOVIK_X_TRULY_HIGH_RAM,r16 ;     
                                 	
                                 
                                 	
                                 //    ,   ,   
                                 position_priority:
                                 	//    0    2
0001bb 9100 010c                 	lds r16,SHAGOVIK_X2_HIGH_RAM 
0001bd 9300 0108                 	sts SHAGOVIK_X0_HIGH_RAM,r16
0001bf 9300 0132                 	sts SHAGOVIK_X_TRULY_HIGH_RAM,r16 ;     
0001c1 9100 010d                 	lds r16,SHAGOVIK_X2_LOW_RAM 
0001c3 9300 0109                 	sts SHAGOVIK_X0_LOW_RAM,r16
0001c5 9300 0133                 	sts SHAGOVIK_X_TRULY_LOW_RAM,r16 ;     
                                 
0001c7 e003                      	ldi r16,0b00000011
0001c8 9300 0111                 	sts access_to_button_flags,r16 ;    
0001ca 9508                      ret
                                 
                                 
                                 get_position_value_from_eeprom:
                                 	//     ,        2 ,   r0
0001cb 9100 0107                 	lds r16,RAM_position_number
0001cd e012                      	ldi r17,0x02
0001ce 9f01                      	mul r16,r17 
                                 
                                 	//    ,   ,  0x0A,    0x0A  EEPROM     ( )    
0001cf e00a                      	ldi r16,0x0A
0001d0 0e00                      	add r0,r16
                                 
                                 	//    EEPROM   ,        
0001d1 e020                      	ldi r18,0x00
0001d2 2d10                      	mov r17,r0
0001d3 d31d                      	rcall EEPROM_read
0001d4 9300 010c                 	sts SHAGOVIK_X2_HIGH_RAM,r16 ;       
                                 	; mov r26,r16 ;      r26    
                                 	//     
0001d6 9513                      	inc r17 ;    EEPROM  1,     
0001d7 d319                      	rcall EEPROM_read
0001d8 9300 010d                 	sts SHAGOVIK_X2_LOW_RAM,r16 ;        
                                 	; mov r25,r16 ;      r25    
0001da 9508                      ret
                                 
                                 
                                 TIM0_COMP:
0001db 930f                      	push r16 ;     ,      
0001dc b70f                      	in r16,SREG
0001dd 930f                      	push r16
0001de 2700                      	clr r16
0001df bf02                      	out TCNT0,r16 ;    0
0001e0 ff13                      	SBRS r17,3 ;   - ,      r17,     - 
0001e1 6012                      	SBR r17,2 ;     ,   ,    10 
0001e2 910f                      	pop r16
0001e3 bf0f                      	out SREG,r16
0001e4 910f                      	pop r16  ;   r16  
0001e5 9518                      reti
                                 
                                 
                                 // -   
0001e6 0000                      Button_up_func: nop
0001e7 d6b4                      	rcall Clock_start_for_block //  ,     10 
                                 
0001e8 27aa                      	clr r26 ;  
0001e9 9190 0107                 	lds r25,RAM_position_number ;    
0001eb 9593                      	inc r25 ;    
                                 
0001ec 3694                      	cpi r25,0x64 ;       100
0001ed f409                      	brne print_num_up ;      
0001ee e090                      	ldi r25,0x00 ;    0 
                                 	
                                 print_num_up:
0001ef 9390 0107                 	sts RAM_position_number,r25 ;     
                                 
                                 	//        
0001f1 dfd9                      	rcall get_position_value_from_eeprom ;   EEPROM     
                                 
                                 	// call function that deside print number or name of position
0001f2 d1f2                      	rcall lcd_print_number_or_name_of_position
                                 	
0001f3 e400                      	ldi r16,0x40
0001f4 dec2                      	rcall Set_cursor
                                 	
                                 	//     
0001f5 91a0 010c                 	lds r26,SHAGOVIK_X2_HIGH_RAM  
0001f7 9190 010d                 	lds r25,SHAGOVIK_X2_LOW_RAM 
0001f9 d18a                      	rcall lcd_print_number ;    
                                 	
0001fa 9508                      ret
                                 
                                 
                                 
                                 Button_down_func:
0001fb d6a0                      rcall Clock_start_for_block //  ,     10 
                                 
0001fc 27aa                      clr r26 ;  
0001fd 9190 0107                 	lds r25,RAM_position_number ;    
0001ff 959a                      	dec r25 ;    
                                 
000200 3f9f                      	cpi r25,0xFF ;       0
000201 f409                      	brne print_num_down ;      
000202 e693                      	ldi r25,0x63 ;    99
                                 	
                                 print_num_down:
000203 9390 0107                 	sts RAM_position_number,r25 ;     
                                 	//        
000205 2f09                      	mov r16,r25 ;       
000206 dfc4                      	rcall get_position_value_from_eeprom ;   EEPROM     
                                 	//     
                                 	
                                 	// call function that deside print number or name of position
000207 d1dd                      	rcall lcd_print_number_or_name_of_position
                                 
000208 e400                      	ldi r16,0x40
000209 dead                      	rcall Set_cursor
                                 	
                                 	//     
00020a 91a0 010c                 	lds r26,SHAGOVIK_X2_HIGH_RAM  
00020c 9190 010d                 	lds r25,SHAGOVIK_X2_LOW_RAM 
00020e d175                      	rcall lcd_print_number ;    
00020f 9508                      ret
                                 
                                 
000210 0000                      Button_ok_func: nop
000211 94f8                      	cli ;  
                                 	
000212 d689                      	rcall Clock_start_for_block //  ,     10 
                                 
                                 //  
                                 shagovik_stage1:
                                 	//    X0 ()
000213 91b0 0108                 	lds r27,SHAGOVIK_X0_HIGH_RAM
000215 91a0 0109                 	lds r26,SHAGOVIK_X0_LOW_RAM
                                 	//   X2,   
000217 91f0 010c                 	lds r31,SHAGOVIK_X2_HIGH_RAM
000219 91e0 010d                 	lds r30,SHAGOVIK_X2_LOW_RAM 
                                 
00021b 93f0 0132                 	sts SHAGOVIK_X_TRULY_HIGH_RAM,r31 ;      
00021d 93e0 0133                     sts SHAGOVIK_X_TRULY_LOW_RAM,r30  ;      
                                 	// ,       ,  ,     
00021f 13bf                      	CPSE r27,r31 ;  ,   . 
000220 c015                      	rjmp find_mid ;   ,   
000221 13ae                      	CPSE r26,r30 ;  ,   . 
000222 c013                      	rjmp find_mid ;   ,   
                                 	//      ,   
000223 d3eb                      	rcall encoder_print_num ;      2,   
                                 	//      EEPROM ,   
000224 e010                      	ldi r17,0x00
000225 e020                      	ldi r18,0x00 ;     EEPROM 0x0000
000226 d2ca                      	rcall EEPROM_read
000227 9110 0107                 	lds r17,RAM_position_number ;      
000229 1310                      	CPSE r17,r16 ;  ,   . 
00022a c005                      	rjmp save_pos_number_to_eeprom ;     ,        EEPROM 
                                 	//    ,  ,     ,   
                                 	//   ,   
00022b e000                      	ldi r16,0x00
00022c 9300 0116                     sts ENCODER_CONTR_MOT_ENCODER_PROCESSING,r16 ;   ,     
00022e 2711                      	clr r17 ;   
00022f c068                      	rjmp ok_exit ;   
                                 //      EEPROM
                                 save_pos_number_to_eeprom:
000230 2f01                      	mov r16,r17
000231 e010                      	ldi r17,0x00
000232 e020                      	ldi r18,0x00 ;     EEPROM 0x0000
000233 d2b2                      	rcall EEPROM_write
000234 2711                      	clr r17 ;   
000235 c062                      	rjmp ok_exit ;   
                                 
                                 find_mid:
                                 	//  
000236 9aaf                      	SBI PORTC,PC7
                                 	//    X1. X1 = (|X2 - X0|)/2 +(-) X0) 
                                 	// , X0 = 14.2, X2 = 26.2 -> X1 = (26.2 - 14.2)/2 + 14.2 = 20.2
                                 	// X2 - X0
000237 1bea                      	sub r30,r26
000238 0bfb                      	sbc r31,r27
000239 f482                      	BRPL poloj ;    ,    
                                 
                                 	//    
00023a 98dc                      	CBI PORTA,DIR ; ,   
                                 	//     2,     
00023b 91f0 010c                 	lds r31,SHAGOVIK_X2_HIGH_RAM
00023d 91e0 010d                 	lds r30,SHAGOVIK_X2_LOW_RAM 
                                 	//    ,  0 ,  2
00023f 1bae                      	sub r26,r30
000240 0bbf                      	sbc r27,r31
                                 	//   2  
000241 95b6                      	lsr r27
000242 95a7                      	ror r26
                                 	//     0,     . WARNING:  0     1 
000243 91d0 0108                 	lds r29,SHAGOVIK_X0_HIGH_RAM
000245 91c0 0109                 	lds r28,SHAGOVIK_X0_LOW_RAM
                                 	//   0  ,   
000247 1bca                      	sub r28,r26
000248 0bdb                      	sbc r29,r27
                                 	//    r29:r28  X1
000249 c007                      	rjmp save_X1_to_ram //  1  
                                 	 
                                 poloj:
00024a 9adc                      	SBI PORTA,DIR ; ,   
                                 	//     2  
00024b 95f6                      	lsr r31
00024c 95e7                      	ror r30
                                 	//  0    1
00024d 2fca                      	mov r28,r26
00024e 2fdb                      	mov r29,r27
                                 	//   0  ,   
00024f 0fce                      	add r28,r30
000250 1fdf                      	adc r29,r31
                                 	//    r29:r28  X1
                                 //  1  
                                 save_X1_to_ram: 
000251 93d0 010a                 	sts SHAGOVIK_X1_HIGH_RAM,r29
000253 93c0 010b                 	sts SHAGOVIK_X1_LOW_RAM,r28
                                 	//      ,         
000255 9100 0113                 	lds r16,INIT_FLAG
000257 3000                      	cpi r16,0x00
000258 f029                      	breq ok_next1 ;    ,    ,        , ..     
                                 //      
                                 position_number_save_to_eeprom:
000259 2722                      	clr r18 ;  
00025a e010                      	ldi r17,0x00 ;      = 0x00
00025b 9100 0107                 	lds r16,RAM_position_number ;     EEPROM
00025d d288                      	rcall EEPROM_write ;   EEPROM
                                 ok_next1:
                                 	//    X0 ()
00025e 91b0 0108                 	lds r27,SHAGOVIK_X0_HIGH_RAM
000260 91a0 0109                 	lds r26,SHAGOVIK_X0_LOW_RAM
                                 	//   X2,   
000262 91f0 010c                 	lds r31,SHAGOVIK_X2_HIGH_RAM
000264 91e0 010d                 	lds r30,SHAGOVIK_X2_LOW_RAM 
                                 
                                 //  
                                 shagovik_stage2:
                                 	//    
000266 2f9b                      	mov r25,r27 ;       
000267 2f8a                      	mov r24,r26
                                 	;ldi r25,SHAGOVIK_freq_maxH ;          OCR1A ( )
                                 	;ldi r24,SHAGOVIK_freq_maxL ;          OCR1A ( )
                                 	;ldi r23,SHAGOVIK_freq_minH ;          OCR1A ( )
                                 	;ldi r22,SHAGOVIK_freq_minL ;          OCR1A ( )
                                 	;ldi r22,SHAGOVIK_pid_prop ;        
                                 	;;ldi r21,SHAGOVIK_step ;          ()
000268 e950                      	ldi r21,SHAGOVIK_DELTA_L_LOW ;      ,    STEP,      0,1   1/16
000269 e061                      	ldi r22,SHAGOVIK_DELTA_L_HIGH ;   
                                 
                                 	;   OCR1AH:OCR1AL    
                                 
                                 	//  1 
                                 	//  TCNT1
00026a e000                      	ldi r16,0x00
00026b e010                      	ldi r17,0x00
00026c debe                      	rcall TIM16_WriteTCNT1 ;   TCNT1 r17:r16
                                 
                                 	//   OCR1A.  ,    .   OCR1AH:OCR1AL    
00026d ed00                      	ldi r16,SHAGOVIK_freq_minL
00026e e017                      	ldi r17,SHAGOVIK_freq_minH
00026f dec7                      	rcall TIM16_WriteOCR1A ;   OCR1A r17:r16
                                 
                                 
                                 	//  1 
                                 	//ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (1<<CS10) ;  1
                                 	//out TCCR1B,r16
000270 e001                      	ldi r16,0x01 
000271 9300 0112                 	sts SHAGOVIK_timer1_on,r16 ; ,  timer1 
                                 
                                 	//ldi r16,0b00000000
                                 	//out GICR,r16 ;  
                                 
000273 9100 0113                 	lds r16,INIT_FLAG ;   ,    
000275 3000                      	cpi r16,0x00
000276 f109                      	breq ok_exit
                                 
                                 	//     ,       
000277 9100 0114                 	lds r16,ENCODER_CONTR_MOT_PRESS_OK
000279 3001                      	cpi r16,0x01
00027a f0e9                      	breq ok_exit
                                 print_num:
                                 	//  
00027b 930f                      	push r16
00027c 931f                      	push r17
00027d 932f                      	push r18
00027e 933f                      	push r19
00027f 934f                      	push r20
000280 935f                      	push r21 
000281 936f                      	push r22
000282 937f                      	push r23
000283 938f                      	push r24
000284 939f                      	push r25
000285 93af                      	push r26
000286 93bf                      	push r27
                                 
                                 	//      
000287 e400                      	ldi r16,0x40
000288 de2e                      	rcall Set_cursor
                                 	
                                 	//     
000289 2fa9                      	mov r26,r25 
00028a 2f98                      	mov r25,r24
00028b d0f8                      	rcall lcd_print_number ;    
                                 
00028c 91bf                      	pop r27
00028d 91af                      	pop r26
00028e 919f                      	pop r25 
00028f 918f                      	pop r24
000290 917f                      	pop r23
000291 916f                      	pop r22
000292 915f                      	pop r21
000293 914f                      	pop r20
000294 913f                      	pop r19
000295 912f                      	pop r18
000296 911f                      	pop r17
000297 910f                      	pop r16
                                 ok_exit:
                                 	//       
000298 93f0 0117                 	sts SHAGOVIK_r31,r31
00029a 93e0 0118                 	sts SHAGOVIK_r30,r30
00029c 93d0 0119                 	sts SHAGOVIK_r29,r29
00029e 93c0 011a                 	sts SHAGOVIK_r28,r28
0002a0 93b0 011b                 	sts SHAGOVIK_r27,r27
0002a2 93a0 011c                 	sts SHAGOVIK_r26,r26
0002a4 9390 011d                 	sts SHAGOVIK_r25,r25
0002a6 9380 011e                 	sts SHAGOVIK_r24,r24
0002a8 9370 011f                 	sts SHAGOVIK_r23,r23
0002aa 9360 0126                 	sts SHAGOVIK_r22,r22
0002ac 9350 0127                 	sts SHAGOVIK_r21,r21
0002ae 9340 0128                 	sts SHAGOVIK_r20,r20
0002b0 9330 0129                 	sts SHAGOVIK_r19,r19
                                 
0002b2 9478                      sei ; 
0002b3 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
0002b4 0000                      Button_home_func: nop
0002b5 d5e6                      	rcall Clock_start_for_block //  ,     10 
                                 
0002b6 9aae                      	SBI PORTC,LED_home ;    HOME
                                 
                                 	//      ().   ,   
0002b7 99cf                      	SBIC PINA,INDSIGNAL ;  
0002b8 9adc                      	SBI PORTA,DIR ;  
                                 	
0002b9 9bcf                      	SBIS PINA,INDSIGNAL ;   
0002ba 98dc                      	CBI PORTA,DIR ;  
                                 
                                 	//     ,      
0002bb 9bdc                      	SBIS PORTA,DIR 
0002bc c005                      	rjmp edem_nazad
0002bd e0a0                      	ldi r26,0x00
0002be d258                      	rcall low_speed ;    
                                 
0002bf e060                      	ldi r22,HOME_SHAGOVIK_DELTA_HIGH_0 ;      0  
0002c0 e154                      	ldi r21,HOME_SHAGOVIK_DELTA_LOW_0  ;      0  
                                 	
0002c1 c002                      	rjmp home_next
                                 //   0 
                                 edem_nazad:
                                 	//   1 
0002c2 e0a1                      	ldi r26,0x01 /* ,      HOME.
                                 				    0 -    ,    2    ,      4 
                                 				    1 -     ,      ,     
                                 				    2 -    ,   1    
                                 				    3 -  ,     
                                 				    4 -   ,    1   
                                 				 */
0002c3 d24c                      	rcall fast_speed ;    
                                 home_next:
                                 	//  1 
                                 	//  TCNT1
0002c4 e000                      	ldi r16,0x00
0002c5 e010                      	ldi r17,0x00
0002c6 de64                      	rcall TIM16_WriteTCNT1 ;   TCNT1 r17:r16
                                 
                                 	//  1 
                                 	//ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (1<<CS10) ;  1
                                 	//out TCCR1B,r16
0002c7 e001                      	ldi r16,0x01 
0002c8 9300 0112                 	sts SHAGOVIK_timer1_on,r16 ; ,  timer1 
                                 
0002ca e000                      	ldi r16,0b00000000
0002cb bf0b                      	out GICR,r16 ;  
                                 
0002cc e970                      	ldi r23,SHAGOVIK_DELTA_L_LOW
0002cd e081                      	ldi r24,SHAGOVIK_DELTA_L_HIGH
                                 	//       
0002ce 93f0 0117                 	sts SHAGOVIK_r31,r31
0002d0 93e0 0118                 	sts SHAGOVIK_r30,r30
0002d2 93d0 0119                 	sts SHAGOVIK_r29,r29
0002d4 93c0 011a                 	sts SHAGOVIK_r28,r28
0002d6 93b0 011b                 	sts SHAGOVIK_r27,r27
0002d8 93a0 011c                 	sts SHAGOVIK_r26,r26
0002da 9390 011d                 	sts SHAGOVIK_r25,r25
0002dc 9380 011e                 	sts SHAGOVIK_r24,r24
0002de 9370 011f                 	sts SHAGOVIK_r23,r23
0002e0 9360 0126                 	sts SHAGOVIK_r22,r22
0002e2 9350 0127                 	sts SHAGOVIK_r21,r21
0002e4 9340 0128                 	sts SHAGOVIK_r20,r20
0002e6 9330 0129                 	sts SHAGOVIK_r19,r19
0002e8 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 Button_prog_func:
                                 	
                                 
0002e9 d5b2                      	rcall Clock_start_for_block //  ,     10 
                                 
                                 	// ,    
0002ea 9100 0134                 	lds r16,PROG_FUNC_WORK_STATUS_RAM ;     
0002ec 3001                      	cpi r16,0x01 
0002ed f009                      	breq prog_next1 ;     ,   
0002ee 9508                      	ret ;  
                                 
                                 prog_next1:
                                 	
0002ef d010                      	rcall blink_prog_led
                                 
                                 
                                 
                                 	//    
0002f0 9100 0107                 	lds r16,RAM_position_number
                                 
                                 	//        263 (26.3)
0002f2 e012                      	ldi r17,0x02
0002f3 9f01                      	mul r16,r17
0002f4 2d00                      	mov r16,r0
0002f5 e01a                      	ldi r17,0x0A
0002f6 0f10                      	add r17,r16
0002f7 2722                      	clr r18
                                 
0002f8 9100 010c                 	lds r16,SHAGOVIK_X2_HIGH_RAM  ;      
0002fa d1eb                      	rcall EEPROM_write
                                 
0002fb 9513                      	inc r17
0002fc 9100 010d                 	lds r16,SHAGOVIK_X2_LOW_RAM  ;      
0002fe d1e7                      	rcall EEPROM_write
                                 
                                 	
                                 
0002ff 9508                      ret
                                 
                                 blink_prog_led:
000300 94f8                      	cli
                                 	//    
000301 9aad                      	sbi PORTC,LED_prog
                                 		
                                 	// 
000302 e604                      	ldi r16,0x64
000303 dda6                      	rcall nopdelay_1ms
000304 98ad                      	cbi PORTC,LED_prog ;   
                                 
                                 	// 
000305 e604                      	ldi r16,0x64
000306 dda3                      	rcall nopdelay_1ms
000307 9aad                      	sbi PORTC,LED_prog ;   
                                 
                                 	// 
                                 	//ldi r16,0x64
                                 	//rcall nopdelay_1ms
                                 	//cbi PORTC,LED_prog ;   
000308 9478                      	sei
000309 9508                      ret
                                 
                                 
                                 Button_block_func:
                                 
                                 
00030a 9bac                      SBIS PORTC,LED_block ;     ,         
00030b c009                      rjmp block_on
                                 
                                 block_off: ;   
00030c 98ac                      CBI PORTC,LED_block
00030d e003                      ldi r16,0b00000011 
00030e 9300 0111                 sts access_to_button_flags,r16 ;    ,  
000310 e400                      ldi r16,0b01000000
000311 bf0a                      out GIFR,r16 ;    
000312 bf0b                      out GICR,r16 ;    INT0,    
                                 
000313 d588                      rcall Clock_start_for_block //  ,     10 
                                 
000314 9508                      ret
                                 
                                 block_on:;   
000315 9aac                      SBI PORTC,LED_block
000316 e001                      ldi r16,0b00000001 
000317 9300 0111                 sts access_to_button_flags,r16 ;    
000319 e000                      ldi r16,0b00000000
00031a bf0b                      out GICR,r16 ; INT0        INT0
                                 
00031b d588                      rcall Clock_stop_for_block //  ,     10 
                                 
00031c 9508                      ret
                                 
                                 
                                 // -  . : 10.0, 01.0, 00.1
                                 Button_step_func:
00031d d57e                      	rcall Clock_start_for_block //  ,     10 
                                 
00031e 9100 0104                 	lds r16,RAM_step_size ;      
                                 
000320 300a                      	cpi r16,0x0A ;    10 (01.0)
000321 f021                      	breq set_step_1
                                 
000322 3001                      	cpi r16,0x01 ;    1 (00.1)
000323 f021                      	breq set_step_2
                                 
                                 	;     100 (10.0)
000324 e001                      	ldi r16,0x01 ;    1 (00.1)
000325 c003                      	rjmp save_step
                                 
                                 	set_step_1:
000326 e604                      	ldi r16,0x64 ;    100 (10.0)
000327 c001                      	rjmp save_step
                                 
                                 	set_step_2:
000328 e00a                      	ldi r16,0x0A ;    10 (01.0)
                                 	//      
                                 	save_step:
000329 9300 0104                 	sts RAM_step_size,r16
                                 
                                 	//     
00032b 2f90                      	mov r25,r16 ;        
00032c 27aa                      	clr r26 
00032d e406                      	ldi r16,0x46
00032e dd88                      	rcall Set_cursor ;      
                                 
00032f d054                      	rcall lcd_print_number ;     
                                 
000330 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //    .    8 . 
                                 /*
                                 byte bukva_B[8]   = {B11110,B10000,B10000,B11110,B10001,B10001,B11110,B00000,}; //  ""
                                 byte bukva_G[8]   = {B11111,B10001,B10000,B10000,B10000,B10000,B10000,B00000,}; //  ""
                                 byte bukva_D[8]   = {B01111,B00101,B00101,B01001,B10001,B11111,B10001,B00000,}; //  ""
                                 byte bukva_ZH[8]  = {B10101,B10101,B10101,B11111,B10101,B10101,B10101,B00000,}; //  ""
                                 byte bukva_Z[8]   = {B01110,B10001,B00001,B00010,B00001,B10001,B01110,B00000,}; //  ""
                                 byte bukva_I[8]   = {B10001,B10011,B10011,B10101,B11001,B11001,B10001,B00000,}; //  ""
                                 byte bukva_IY[8]  = {B01110,B00000,B10001,B10011,B10101,B11001,B10001,B00000,}; //  ""
                                 byte bukva_L[8]   = {B00011,B00111,B00101,B00101,B01101,B01001,B11001,B00000,}; //  ""
                                 byte bukva_P[8]   = {B11111,B10001,B10001,B10001,B10001,B10001,B10001,B00000,}; //  ""
                                 byte bukva_Y[8]   = {B10001,B10001,B10001,B01010,B00100,B01000,B10000,B00000,}; //  ""
                                 byte bukva_F[8]   = {B00100,B11111,B10101,B10101,B11111,B00100,B00100,B00000,}; //  ""
                                 byte bukva_TS[8]  = {B10010,B10010,B10010,B10010,B10010,B10010,B11111,B00001,}; //  ""
                                 byte bukva_CH[8]  = {B10001,B10001,B10001,B01111,B00001,B00001,B00001,B00000,}; //  ""
                                 byte bukva_Sh[8]  = {B10101,B10101,B10101,B10101,B10101,B10101,B11111,B00000,}; //  ""
                                 byte bukva_Shch[8]= {B10101,B10101,B10101,B10101,B10101,B10101,B11111,B00001,}; //  ""
                                 byte bukva_Mz[8]  = {B10000,B10000,B10000,B11110,B10001,B10001,B11110,B00000,}; //  ""
                                 byte bukva_IYI[8] = {B10001,B10001,B10001,B11001,B10101,B10101,B11001,B00000,}; //  ""
                                 byte bukva_Yu[8]  = {B10010,B10101,B10101,B11101,B10101,B10101,B10010,B00000,}; //  ""
                                 byte bukva_Ya[8]  = {B01111,B10001,B10001,B01111,B00101,B01001,B10001,B00000,}; //  ""
                                 */
                                 Create_Char:
000331 e400                      	ldi r16,0b01000000 ;  7-       CGRAM,  DB6  ,     0x00
000332 2711                      	clr r17
000333 9310 0102                 	sts 0x0102,r17 ; RS  R/W  0  7-  
000335 dd8f                      	rcall LCD1602_send_command ;  
                                 
                                 	//  8    1-    0x00 
                                 	//  ""
000336 e115                      	ldi r17,0b10101
000337 e125                      	ldi r18,0b10101
000338 e135                      	ldi r19,0b10101
000339 e145                      	ldi r20,0b10101
00033a e155                      	ldi r21,0b10101
00033b e165                      	ldi r22,0b10101
00033c e17f                      	ldi r23,0b11111
00033d e080                      	ldi r24,0b00000
                                 	//    
00033e d01c                      	rcall write_new_symbol
                                 
                                 	//  8    2-    0x01 
                                 	//  ""
00033f e11f                      	ldi r17,0b11111
000340 e121                      	ldi r18,0b10001
000341 e130                      	ldi r19,0b10000
000342 e140                      	ldi r20,0b10000
000343 e150                      	ldi r21,0b10000
000344 e160                      	ldi r22,0b10000
000345 e170                      	ldi r23,0b10000
000346 e080                      	ldi r24,0b00000
                                 	//    
000347 d013                      	rcall write_new_symbol
                                 	
                                 	//  8    3-    0x02 
                                 	//  ""
000348 e11f                      	ldi r17,0b11111
000349 e121                      	ldi r18,0b10001
00034a e131                      	ldi r19,0b10001
00034b e141                      	ldi r20,0b10001
00034c e151                      	ldi r21,0b10001
00034d e161                      	ldi r22,0b10001
00034e e171                      	ldi r23,0b10001
00034f e080                      	ldi r24,0b00000
                                 	//    
000350 d00a                      	rcall write_new_symbol
                                 
                                 
                                 	//  8    3-    0x03 
                                 	//  ""
000351 e01e                      	ldi r17,0b01110
000352 e121                      	ldi r18,0b10001
000353 e031                      	ldi r19,0b00001
000354 e042                      	ldi r20,0b00010
000355 e051                      	ldi r21,0b00001
000356 e161                      	ldi r22,0b10001
000357 e07e                      	ldi r23,0b01110
000358 e080                      	ldi r24,0b00000
                                 	//    
000359 d001                      	rcall write_new_symbol
00035a 9508                      ret
                                 
                                 
                                 write_new_symbol:
                                 //    
00035b 2f01                      	mov r16,r17
00035c dd94                      	rcall Write_symbol
                                 
00035d 2f02                      	mov r16,r18
00035e dd92                      	rcall Write_symbol
                                 
00035f 2f03                      	mov r16,r19
000360 dd90                      	rcall Write_symbol
                                 
000361 2f04                      	mov r16,r20
000362 dd8e                      	rcall Write_symbol
                                 
000363 2f05                      	mov r16,r21
000364 dd8c                      	rcall Write_symbol
                                 
000365 2f06                      	mov r16,r22
000366 dd8a                      	rcall Write_symbol
                                 
000367 2f07                      	mov r16,r23
000368 dd88                      	rcall Write_symbol
                                 
000369 2f08                      	mov r16,r24
00036a dd86                      	rcall Write_symbol
00036b 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 // -      
                                 subtraction_2x2:
00036c 1b97                      SUB r25,r23 ;   
00036d 0ba8                      SBC r26,r24 ;   ,  
00036e 9508                      ret
                                 
                                 // -      
                                 addition_2x2:
00036f 0f97                      add r25,r23 ;   
000370 1fa8                      adc r26,r24 ;   ,  
000371 9508                      ret
                                 
                                 
                                 
                                 
                                 //       (    10).  r25 -  .  r16 - . r26,r26 / r24,r23
000372 0000                      division_2x2: nop
000373 2700                      	clr r16  ;  
000374 93af                      	push r26 ;     
000375 939f                      	push r25 ;      
                                 division_proc:
000376 1b97                      	sub r25,r23 ;         
000377 0ba8                      	sbc r26,r24 ; ,  
000378 9503                      	inc r16     ;    ,       (  )
000379 f7e0                      	brcc division_proc
                                 
00037a 950a                      	dec r16 ;  r16   
00037b 9f70                      	mul r23,r16 ;      ,      . 
00037c 919f                      	pop r25 ;     
00037d 91af                      	pop r26 ;     
00037e 1990                      	sub r25,r0  ;        ,    r25  
00037f 2e00                      	mov r0,r16  
000380 2f09                      	mov r16,r25 ;    r16
000381 2d90                      	mov r25,r0  ;     r25
000382 27aa                      	clr r26     ;  r26   
000383 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //     ,       , XX.X
000384 0000                      lcd_print_number: nop
                                 	//    
000385 932f                      	push r18
000386 931f                      	push r17
                                 
                                 	//  
000387 2722                      	clr r18 ; 
000388 2788                      	clr r24
                                 	cycle22:
000389 e07a                      	ldi r23,0x0A ;   10
00038a dfe7                      	rcall division_2x2 ;      10,    r16,       r25
00038b e380                      	ldi r24,0x30
00038c 0f08                      	add r16,r24 ;    30h,   30h   "0",    - 
00038d 2788                      	clr r24
                                 	//     
00038e 3020                      	cpi r18,0x00
00038f f041                      	breq save_r2 ;    r2
                                 
                                 	//     
000390 3021                      	cpi r18,0x01
000391 f021                      	breq save_r3 ;    r1
                                 
                                 	//     
000392 3022                      	cpi r18,0x02
000393 f001                      	breq save_r4 ;    r0
                                 
                                 	save_r4:
000394 2e40                      	mov r4,r16
000395 c003                      	rjmp incc
                                 
                                 	save_r3:
000396 2e30                      	mov r3,r16
000397 c001                      	rjmp incc
                                 
                                 	save_r2:
000398 2e20                      	mov r2,r16
                                 
                                 	incc:
000399 9523                      	inc r18 ;   
00039a 3023                      	cpi r18,0x03
00039b f769                      	brne cycle22
                                 
00039c 344c                      	cpi r20,0x4C
00039d f011                      	breq print_next ;      ,     
                                 
00039e 2d04                      	mov r16,r4
00039f dd51                      	rcall Write_symbol ;    
                                 
                                 print_next:
0003a0 2d03                      	mov r16,r3
0003a1 dd4f                      	rcall Write_symbol ;    
                                 
0003a2 344c                      	cpi r20,0x4C
0003a3 f011                      	breq print_next2 ;      ,    
                                 
0003a4 e20e                      	ldi r16,0x2E
0003a5 dd4b                      	rcall Write_symbol ;   "."
                                 print_next2:
0003a6 2d02                      	mov r16,r2
0003a7 dd49                      	rcall Write_symbol ;    
0003a8 2744                      	clr r20
0003a9 911f                      	pop r17
0003aa 912f                      	pop r18
0003ab 9508                      ret
                                 
                                 /*  Set name of position
                                 	For positions:
                                 	00 - PARK
                                 	01 - 450
                                 	02 - 650
                                 	03 - 900
                                 	04 - 1350
                                 */
0003ac 0000                      lcd_print_name_of_position: nop
0003ad 930f                      	push r16
0003ae 936f                      	push r22
0003af 937f                      	push r23
0003b0 938f                      	push r24
0003b1 939f                      	push r25
                                 
                                 	// check position number and print name
                                 	//if position number is 0
0003b2 3090                      	cpi r25,0x00 
0003b3 f041                      	breq print_PARK
                                 	//if position number is 1
0003b4 3091                      	cpi r25,0x01 
0003b5 f059                      	breq print_450
                                 	//if position number is 2
0003b6 3092                      	cpi r25,0x02
0003b7 f071                      	breq print_650
                                 	//if position number is 3
0003b8 3093                      	cpi r25,0x03
0003b9 f089                      	breq print_900
                                 	//if position number is 4
0003ba 3094                      	cpi r25,0x04
0003bb f0a1                      	breq print_1350
                                 
                                 print_PARK:
0003bc e560                      	ldi r22,SYM_P
0003bd e471                      	ldi r23,SYM_A
0003be e582                      	ldi r24,SYM_R
0003bf e49b                      	ldi r25,SYM_K
0003c0 c014                      	rjmp print_and_exit
                                 print_450:
0003c1 e360                      	ldi r22,DIG_0
0003c2 e374                      	ldi r23,DIG_4
0003c3 e385                      	ldi r24,DIG_5
0003c4 e390                      	ldi r25,DIG_0
0003c5 c00f                      	rjmp print_and_exit
                                 print_650:
0003c6 e360                      	ldi r22,DIG_0
0003c7 e376                      	ldi r23,DIG_6
0003c8 e385                      	ldi r24,DIG_5
0003c9 e390                      	ldi r25,DIG_0	
0003ca c00a                      	rjmp print_and_exit
                                 print_900:
0003cb e360                      	ldi r22,DIG_0
0003cc e379                      	ldi r23,DIG_9
0003cd e380                      	ldi r24,DIG_0
0003ce e390                      	ldi r25,DIG_0
0003cf c005                      	rjmp print_and_exit
                                 print_1350:
0003d0 e361                      	ldi r22,DIG_1
0003d1 e373                      	ldi r23,DIG_3
0003d2 e385                      	ldi r24,DIG_5
0003d3 e390                      	ldi r25,DIG_0
0003d4 c000                      	rjmp print_and_exit
                                 
                                 print_and_exit:
0003d5 e40c                      	ldi r16,0x4C
0003d6 dce0                      	rcall Set_cursor 
                                 
0003d7 2f06                      	mov r16,r22
0003d8 dd18                      	rcall Write_symbol
                                 
0003d9 2f07                      	mov r16,r23
0003da dd16                      	rcall Write_symbol
                                 
0003db 2f08                      	mov r16,r24
0003dc dd14                      	rcall Write_symbol
                                 
0003dd 2f09                      	mov r16,r25
0003de dd12                      	rcall Write_symbol
                                 
0003df 919f                      	pop r25
0003e0 918f                      	pop r24
0003e1 917f                      	pop r23
0003e2 916f                      	pop r22
0003e3 910f                      	pop r16
0003e4 9508                      ret
                                 
0003e5 0000                      lcd_print_number_or_name_of_position: nop
0003e6 3095                      	cpi r25,0x05
0003e7 f410                      	brsh print_number1 //branch if same or higher
0003e8 dfc3                      	rcall lcd_print_name_of_position
0003e9 9508                      	ret
                                 
                                 print_number1:
0003ea e40c                      	ldi r16,0x4C
0003eb dccb                      	rcall Set_cursor 
                                 	
0003ec e200                      	ldi r16,0x20
0003ed dd03                      	rcall Write_symbol ;   " "
                                 
0003ee df95                      	rcall lcd_print_number ;   
                                 
0003ef e200                      	ldi r16,0x20
0003f0 dd00                      	rcall Write_symbol ;   " "
0003f1 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 //  .    100    
0003f2 0000                      button_press: nop
                                 
0003f3 fd10                      	SBRC r17,0 ;       
0003f4 c00a                      	rjmp next  ;     
                                 
                                 	//  
0003f5 2722                      	clr r18 ;  
                                 
                                 	//  
0003f6 2700                      	clr r16 
0003f7 bf02                      	out TCNT0,r16 ;    0
0003f8 e00b                      	ldi r16,0b00001011  ; WGM01 = 1 - CTC 
0003f9 bf03                      	out TCCR0,r16 ;     64
0003fa b708                      	in r16,TIFR ;   r16,     
0003fb 6002                      	ori r16,0b00000010 
0003fc bf08                      	out TIFR,r16 ;   
0003fd 6011                      	SBR r17,1 ;    
0003fe 9508                      	ret ;   
                                 
                                 next: 
0003ff ff11                      	SBRS r17,1 ;    
000400 9508                      	ret ;   
                                 
000401 9523                      	inc r18 ;    
000402 7f1d                      	CBR r17,2 ;         0
                                 
000403 fd12                      	SBRC r17,2 ;       
000404 c007                      	rjmp main_process ;      
                                 	
000405 fd14                      	SBRC r17,4 ;          
000406 c008                      	rjmp end_process ;      
                                 
                                 //       
                                 debounce_process:
000407 302a                      	cpi r18,debounce_time ;    
000408 f4c1                      	brne exit ;      ,  
000409 6014                      	SBR r17,4 ;   , ,    
00040a 2722                      	clr r18   ;  ,         
00040b c008                      	rjmp check_pin ;    
                                 
                                 //  ,   
                                 main_process:
00040c 3124                      	cpi r18,check_pin_time ;       
00040d f041                      	breq finish ;  ,       ,    
00040e c005                      	rjmp check_pin
                                 
                                 //
                                 end_process:
00040f ff15                      	SBRS r17,5 ;       
000410 c003                      	rjmp check_pin ;    
                                     //      
000411 302a                      	cpi r18,debounce_end_time ;   debounce_end_time ,     
000412 f059                      	breq the_end ;   
000413 9508                      	ret
                                 
                                 //      ( )
                                 check_pin:
000414 f026                      	BRTS stop_end_exit ;     1,   ,     
000415 9508                      	ret ;  
                                 
                                 // 
                                 finish:
000416 6118                      	ori r17,0b00011000 ;  3- ,    ,   
                                                        ;  4- , ,         
000417 7f1b                      	CBR r17,4 ;  2- ,      main_process
000418 9508                      	ret
                                 
                                 //     ,    
                                 stop_end_exit:
000419 ff14                      	SBRS r17,4 ;    ,      (end_process)
00041a c003                      	rjmp the_end ;      ,    
00041b 6210                      	SBR r17,32 ;   ,         
00041c 2722                      	clr r18    ;   
00041d 9508                      	ret
                                 	the_end:
00041e 2700                      	clr r16
00041f bf03                      	out TCCR0,r16 ;  
000420 2711                      	clr r17 ;   
                                 
                                 exit:
000421 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //   
000422 0000                      Button_up: nop
000423 ff10                      	SBRS r17,0 ;   ,       - 
000424 c005                      	rjmp step_up_next1 ;  
                                 	//      ,  ,     
000425 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
000427 3001                      	cpi r16,RAM_BUTTON_UP ; 
000428 f009                      	breq step_up_next1 ;     ,    
000429 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_up_next1:
00042a b306                      	in r16,PINB ;     
00042b 9500                      	com r16 ;   .   ,      = 0.
00042c fb04                      	BST r16,PB4 ;      
00042d fd10                      	SBRC r17,0 ;    1,    
00042e c005                      	rjmp step_up_next3 ;         
00042f f40e                      	BRTC step_up_next2 ;           -   
000430 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_up_next2:
000431 e001                          ldi r16,RAM_BUTTON_UP
000432 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_up_next3:
000434 dfbd                      	rcall button_press ;    ,   -   100 
000435 931f                      	push r17 ;        
000436 932f                      	push r18
000437 fd13                      	SBRC r17,3 ;     ,   ,  ,   
000438 ddad                      	rcall Button_up_func ;  -,   
000439 912f                      	pop r18
00043a 911f                      	pop r17 ;  r17
00043b fd13                      	SBRC r17,3 ;     ,   ,  ,     
00043c 7f17                      	CBR r17,8 ;    ,     
00043d 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //   
00043e 0000                      Button_down: nop
00043f ff10                      	SBRS r17,0 ;   ,       - 
000440 c005                      	rjmp step_down_next1 ;  
                                 	//      ,  ,     
000441 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
000443 3002                      	cpi r16,RAM_BUTTON_DOWN ; 
000444 f009                      	breq step_down_next1 ;     ,    
000445 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_down_next1:
000446 b306                      	in r16,PINB ;     
000447 9500                      	com r16 ;   .   ,      = 0.
000448 fb03                      	BST r16,PB3 ;      
000449 fd10                      	SBRC r17,0 ;    1,    
00044a c005                      	rjmp step_down_next3 ;         
00044b f40e                      	BRTC step_down_next2 ;           -   
00044c 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_down_next2:
00044d e002                          ldi r16,RAM_BUTTON_DOWN
00044e 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_down_next3:
000450 dfa1                      	rcall button_press ;    ,   -   100 
000451 931f                      	push r17 ;        
000452 932f                      	push r18
000453 fd13                      	SBRC r17,3 ;     ,   ,  ,   
000454 dda6                      	rcall Button_down_func ;  -,   
000455 912f                      	pop r18
000456 911f                      	pop r17 ;  r17
000457 fd13                      	SBRC r17,3 ;     ,   ,  ,     
000458 7f17                      	CBR r17,8 ;    ,     
000459 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //   
00045a 0000                      Button_ok: nop
00045b ff10                      	SBRS r17,0 ;   ,       - 
00045c c005                      	rjmp step_ok_next1 ;  
                                 	//      ,  ,     
00045d 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
00045f 3003                      	cpi r16,RAM_BUTTON_OK ; 
000460 f009                      	breq step_ok_next1 ;     ,    
000461 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_ok_next1:
000462 b306                      	in r16,PINB ;     
000463 9500                      	com r16 ;   .   ,      = 0.
000464 fb02                      	BST r16,PB2 ;      
000465 fd10                      	SBRC r17,0 ;    1,    
000466 c005                      	rjmp step_ok_next3 ;         
000467 f40e                      	BRTC step_ok_next2 ;           -   
000468 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_ok_next2:
000469 e003                          ldi r16,RAM_BUTTON_OK
00046a 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_ok_next3:
00046c df85                      	rcall button_press ;    ,   -   100 
00046d 931f                      	push r17 ;        
00046e 932f                      	push r18
00046f fd13                      	SBRC r17,3 ;     ,   ,  ,   
000470 dd9f                      	rcall Button_ok_func ;  -,   
000471 912f                      	pop r18
000472 911f                      	pop r17 ;  r17
000473 fd13                      	SBRC r17,3 ;     ,   ,  ,     
000474 7f17                      	CBR r17,8 ;    ,     
000475 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //   
000476 0000                      Button_home: nop
000477 ff10                      	SBRS r17,0 ;   ,       - 
000478 c005                      	rjmp step_home_next1 ;  
                                 	//      ,  ,     
000479 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
00047b 3004                      	cpi r16,RAM_BUTTON_HOME ; 
00047c f009                      	breq step_home_next1 ;     ,    
00047d 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_home_next1:
00047e b309                      	in r16,PINA ;     
00047f 9500                      	com r16 ;   .   ,      = 0.
000480 fb01                      	BST r16,PA1 ;      
000481 fd10                      	SBRC r17,0 ;    1,    
000482 c005                      	rjmp step_home_next3 ;         
000483 f40e                      	BRTC step_home_next2 ;           -   
000484 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_home_next2:
000485 e004                          ldi r16,RAM_BUTTON_HOME
000486 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_home_next3:
000488 df69                      	rcall button_press ;    ,   -   100 
000489 931f                      	push r17 ;        
00048a 932f                      	push r18
00048b fd13                      	SBRC r17,3 ;     ,   ,  ,   
00048c de27                      	rcall Button_home_func ;  -,   
00048d 912f                      	pop r18
00048e 911f                      	pop r17 ;  r17
00048f fd13                      	SBRC r17,3 ;     ,   ,  ,     
000490 7f17                      	CBR r17,8 ;    ,     
000491 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 //   
000492 0000                      Button_prog: nop
000493 ff10                      	SBRS r17,0 ;   ,       - 
000494 c005                      	rjmp step_prog_next1 ;  
                                 	//      ,  ,     
000495 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
000497 3005                      	cpi r16,RAM_BUTTON_PROG ; 
000498 f009                      	breq step_prog_next1 ;     ,    
000499 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_prog_next1:
00049a b309                      	in r16,PINA ;     
00049b 9500                      	com r16 ;   .   ,      = 0.
00049c fb00                      	BST r16,PA0 ;      
00049d fd10                      	SBRC r17,0 ;    1,    
00049e c005                      	rjmp step_prog_next3 ;         
00049f f40e                      	BRTC step_prog_next2 ;           -   
0004a0 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_prog_next2:
0004a1 e005                          ldi r16,RAM_BUTTON_PROG
0004a2 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_prog_next3:
0004a4 df4d                      	rcall button_press ;    ,   -   100 
0004a5 931f                      	push r17 ;        
0004a6 932f                      	push r18
0004a7 fd13                      	SBRC r17,3 ;     ,   ,  ,   
0004a8 de40                      	rcall Button_prog_func ;  -,   
0004a9 912f                      	pop r18
0004aa 911f                      	pop r17 ;  r17
0004ab fd13                      	SBRC r17,3 ;     ,   ,  ,     
0004ac 7f17                      	CBR r17,8 ;    ,     
0004ad 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //   
0004ae 0000                      Button_step: nop
0004af ff10                      	SBRS r17,0 ;   ,       - 
0004b0 c005                      	rjmp step_step_next1 ;  
                                 	//      ,  ,     
0004b1 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
0004b3 3006                      	cpi r16,RAM_BUTTON_STEP ; 
0004b4 f009                      	breq step_step_next1 ;     ,    
0004b5 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 step_step_next1:
0004b6 b309                      	in r16,PINA ;     
0004b7 9500                      	com r16 ;   .   ,      = 0.
0004b8 fb02                      	BST r16,PA2 ;      
0004b9 fd10                      	SBRC r17,0 ;    1,    
0004ba c005                      	rjmp step_step_next3 ;         
0004bb f40e                      	BRTC step_step_next2 ;           -   
0004bc 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 step_step_next2:
0004bd e006                          ldi r16,RAM_BUTTON_STEP
0004be 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 step_step_next3:
0004c0 df31                      	rcall button_press ;    ,   -   100 
0004c1 931f                      	push r17 ;        
0004c2 932f                      	push r18
0004c3 fd13                      	SBRC r17,3 ;     ,   ,  ,   
0004c4 de58                      	rcall Button_step_func ;  -,   
0004c5 912f                      	pop r18
0004c6 911f                      	pop r17 ;  r17
0004c7 fd13                      	SBRC r17,3 ;     ,   ,  ,     
0004c8 7f17                      	CBR r17,8 ;    ,     
0004c9 9508                      ret
                                 
                                 
                                 
                                 //   
0004ca 0000                      Button_block: nop
0004cb ff10                      	SBRS r17,0 ;   ,       - 
0004cc c005                      	rjmp block_block_next1 ;  
                                 	//      ,  ,     
0004cd 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON ;   ,    
0004cf 3007                      	cpi r16,RAM_BUTTON_BLOCK ; 
0004d0 f009                      	breq block_block_next1 ;     ,    
0004d1 9508                      	ret ;     ,   , 
                                 
                                 //             
                                 block_block_next1:
0004d2 b306                      	in r16,PINB ;     
0004d3 9500                      	com r16 ;   .   ,      = 0.
0004d4 fb01                      	BST r16,PB1 ;      
0004d5 fd10                      	SBRC r17,0 ;    1,    
0004d6 c005                      	rjmp block_block_next3 ;         
0004d7 f40e                      	BRTC block_block_next2 ;           -   
0004d8 9508                      	ret ;          ,   
                                 
                                 //     ,       ,   ,    
                                 block_block_next2:
0004d9 e007                          ldi r16,RAM_BUTTON_BLOCK
0004da 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16
                                 block_block_next3:
0004dc df15                      	rcall button_press ;    ,   -   100 
0004dd 931f                      	push r17 ;        
0004de 932f                      	push r18
0004df fd13                      	SBRC r17,3 ;     ,   ,  ,   
0004e0 de29                      	rcall Button_block_func ;  -,   
0004e1 912f                      	pop r18
0004e2 911f                      	pop r17 ;  r17
0004e3 fd13                      	SBRC r17,3 ;     ,   ,  ,     
0004e4 7f17                      	CBR r17,8 ;    ,     
0004e5 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
0004e6 0000                      EEPROM_write: nop
0004e7 94f8                      	cli ;  , ..           r16,r17,r18
                                 
                                 	//     
0004e8 99e1                      	sbic EECR,EEWE
0004e9 cffc                      	rjmp EEPROM_write
                                 	//   (r18:r17)   
0004ea bb2f                      	out EEARH, r18
0004eb bb1e                      	out EEARL, r17
                                 	//   (r16)   ,   
0004ec bb0d                      	out EEDR,r16
                                 	//     EEMWE
0004ed 9ae2                      	sbi EECR,EEMWE
                                 	//    EEPROM   EEWE   EECR
0004ee 9ae1                      	sbi EECR,EEWE
                                 
0004ef 9478                      	sei
0004f0 9508                      ret
                                 
                                 
                                 EEPROM_read:
                                 	//     
0004f1 94f8                      	cli
                                 
0004f2 99e1                      	sbic EECR,EEWE
0004f3 cffd                      	rjmp EEPROM_read
                                 	//   (r18:r17)   
0004f4 bb2f                      	out EEARH, r18
0004f5 bb1e                      	out EEARL, r17
                                 	//    EEPROM   EERE   EECR
0004f6 9ae0                      	sbi EECR,EERE
                                 	//     
0004f7 b30d                      	in r16,EEDR
                                 
0004f8 9478                      	sei
0004f9 9508                      ret
                                 
                                 
                                 
                                 
                                 // -   . r19:r18 * r17:r16. -  r7:r6:r5:r4
                                 umnoj_mul_2x2:
0004fa 2477                      clr r7 ;      - 
0004fb 2466                      clr r6 ;    3-  - 
0004fc 2455                      clr r5 ;    2-  - 
0004fd 2444                      clr r4 ;      - 
0004fe e040                      ldi r20,0x00 ; 
                                 
0004ff 9f20                      mul r18,r16 ;        
000500 0c40                      add r4,r0 ; 
000501 1c51                      adc r5,r1
000502 1e64                      adc r6,r20
000503 1e74                      adc r7,r20
000504 9f21                      mul r18,r17 ;        
000505 0c50                      add r5,r0
000506 1c61                      adc r6,r1
000507 1e74                      adc r7,r20
000508 9f30                      mul r19,r16 ;        
000509 0c50                      add r5,r0
00050a 1c61                      adc r6,r1
00050b 1e74                      adc r7,r20
00050c 9f31                      mul r19,r17 ;        
00050d 0c60                      add r6,r0
00050e 1c71                      adc r7,r1
00050f 9508                      ret
                                 
                                 
                                 //   HOME.    
                                 fast_speed:
                                 //   OCR1A     HOME
000510 ea0b                      	ldi r16,HOME_SHAGOVIK_freq_maxL
000511 e012                      	ldi r17,HOME_SHAGOVIK_freq_maxH
000512 dc24                      	rcall TIM16_WriteOCR1A ;   OCR1A r17:r16
                                 
                                 	//  TCNT1
000513 e000                      	ldi r16,0x00
000514 e010                      	ldi r17,0x00
000515 dc15                      	rcall TIM16_WriteTCNT1 ;   TCNT1 r17:r16
000516 9508                      ret
                                 
                                 //   HOME.    
                                 low_speed:
                                 //   OCR1A     HOME
000517 ed00                      	ldi r16,HOME_SHAGOVIK_freq_minL
000518 e017                      	ldi r17,HOME_SHAGOVIK_freq_minH
000519 dc1d                      	rcall TIM16_WriteOCR1A ;   OCR1A r17:r16
                                 
                                 	//  TCNT1
00051a e000                      	ldi r16,0x00
00051b e010                      	ldi r17,0x00
00051c dc0e                      	rcall TIM16_WriteTCNT1 ;   TCNT1 r17:r16
00051d 9508                      ret
                                 
                                 otladka:
                                 	
                                 /*
                                 	ldi r16,0x01
                                 	sts RAM_step_size,r16
                                 	ldi r16,0x00
                                 	sts SHAGOVIK_X2_HIGH_RAM ,r16
                                 	sts RAM_position_number,r16
                                 	ldi r19,0x63
                                 	go:
                                 	push r16
                                 	rcall Button_up_func
                                 	pop r16
                                 	clr r30
                                 	sts SHAGOVIK_X2_HIGH_RAM ,r30
                                 	rcall EXT_INT0
                                 	inc r16
                                 	push r16
                                 	rcall Button_prog_func
                                 	pop r16
                                 	dec r19
                                 	brne go
                                 	*/
                                 	/*
                                 	ldi r19,0x64
                                 	ldi r16,0x00
                                 	sts SHAGOVIK_X2_HIGH_RAM ,r16
                                 	sts RAM_position_number,r16
                                 	go1:
                                 	rcall Button_up_func
                                 	inc r16
                                 	push r16
                                 	rcall get_position_value_from_eeprom
                                 	rcall Button_prog_func
                                 	pop r16
                                 	dec r19
                                 	brne go1
                                 	*/
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 	//      
                                 	/*ldi r19,0x64
                                 	ldi r17,0x00
                                 	otladka1:
                                 	clr r18
                                 	ldi r16,0x00 ; 3- 
                                 	rcall EEPROM_write
                                 	inc r17
                                 	dec r19
                                 	brne otladka1
                                 	*/
                                 	/*
                                 	ldi r16,0x01
                                 	sts RAM_position_number,r16
                                 
                                 	//        263 (26.3)
                                 	ldi r17,0x02
                                 	mul r17,r16
                                 	ldi r17,0x0A
                                 	add r17,r0
                                 	clr r18
                                 	ldi r16,0x01 ;     
                                 	rcall EEPROM_write
                                 	ldi r16,0x01
                                 	sts SHAGOVIK_X2_HIGH_RAM ,r16
                                 
                                 	inc r17
                                 	ldi r16,0x07 ;    
                                 	rcall EEPROM_write
                                 	ldi r16,0x07
                                 	sts SHAGOVIK_X2_LOW_RAM ,r16
                                 
                                 	ldi r16,0x0A
                                 	sts RAM_step_size,r16
                                 	*/
                                 	
00051e 9508                      ret
                                 
                                 //  ,    2
                                 interrupt_process:
00051f 9100 0112                 	lds r16,SHAGOVIK_timer1_on ;     1 (  )
000521 ff00                      	SBRS r16,0 ;   0 ,    ,   1  
000522 9508                      	ret ;    -
                                 	//  timer1
000523 e009                      	ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (1<<CS10) ;  1
000524 bd0e                      	out TCCR1B,r16
                                 	//   0
000525 b709                      	in r16,TIMSK
000526 7f0d                      	andi r16,0b11111101  
000527 bf09                      	out TIMSK,r16 
                                 wait_untill_timer1_stop:
                                 	//rcall lcd_printing_number
000528 d0e6                      	rcall encoder_print_num ;      2,   
000529 9100 0112                 	lds r16,SHAGOVIK_timer1_on ;     1 (  )
00052b fd00                      	SBRC r16,0 ; 
00052c cffb                      	rjmp wait_untill_timer1_stop
00052d e010                      	ldi r17,0x00
00052e 9508                      ret
                                 
                                 
                                 
                                 home_and_go_to_last_position:
                                 	// ,            
                                 	//     
00052f e020                      	ldi r18,0x00
000530 e012                      	ldi r17,0x02 ; EEPROM  0x0002
000531 dfbf                      	rcall EEPROM_read
                                 	//           (    HOME)
000532 9bc9                      	SBIS PINA,1 ;   HOME ,    
000533 c01b                      	rjmp hag_1
                                 
000534 99b1                      	SBIC PINB,1 ;   BLOCK ,    hag_1
000535 c019                      	rjmp hag_1
                                 
000536 99b2                      	SBIC PINB,2 ;   OK ,    hag_1
000537 c017                      	rjmp hag_1
                                 
                                 
                                 	//    ,       . .    ,   0xff  0x00
000538 3000                      	cpi r16,0x00
000539 f061                      	breq set0xff
                                 	//   0
00053a 9100 0109                 	lds r16,SHAGOVIK_X0_LOW_RAM
00053c e013                      	ldi r17,0x03
00053d 2722                      	clr r18
00053e dfa7                      	rcall EEPROM_write
00053f 9100 0108                 	lds r16,SHAGOVIK_X0_HIGH_RAM
000541 e014                      	ldi r17,0x04
000542 2722                      	clr r18
000543 dfa2                      	rcall EEPROM_write
000544 2700                      	clr r16
000545 c001                      	rjmp save_auto_to_eeprom
                                 set0xff:
000546 ef0f                      	ldi r16,0xFF ;     EEPROM
                                 save_auto_to_eeprom:
000547 e020                      	ldi r18,0x00
000548 e012                      	ldi r17,0x02 ; EEPROM  0x0002
000549 df9c                      	rcall EEPROM_write ;     
00054a 3000                      	cpi r16,0x00 ;   . . -  0,     
00054b f061                      	breq auto_on ;     0xFF,   
                                 	wait_press_of_ok1:
00054c 99c9                      	SBIC PINA,1
00054d cffe                      	rjmp wait_press_of_ok1
                                 	//CBI PORTC,LED_ok ;    
00054e c01a                      	rjmp ext99
                                 //         
                                 hag_1:
00054f 3000                      	cpi r16,0x00 ;   . . -  0,     
                                 	//brne auto_on ;     0xFF,   
000550 f039                      	breq auto_on ;     0xFF,   
                                 
000551 99b1                      	SBIC PINB,1 ;   BLOCK ,    ext99
000552 c016                      	rjmp ext99
                                 
000553 99b2                      	SBIC PINB,2 ;   OK ,    ext99
000554 c014                      	rjmp ext99
                                 	//  ,    
                                 	//    
                                 	//SBI PORTC,LED_ok
                                 wait_press_of_ok:
000555 99c9                      	SBIC PINA,1
000556 cffe                      	rjmp wait_press_of_ok
                                 	//CBI PORTC,LED_ok ;    
000557 c011                      	rjmp ext99
                                 auto_on:
000558 e000                      	ldi r16,0x00
000559 9300 0113                 	sts INIT_FLAG,r16 ; ,     ,   
00055b e004                      	ldi r16,RAM_BUTTON_HOME
00055c 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,    HOME
00055e dd55                      	rcall Button_home_func ;    
00055f dfbf                      	rcall interrupt_process ;  ,     
000560 dc6a                      	rcall get_position_value_from_eeprom ;  ,     
000561 e003                      	ldi r16,RAM_BUTTON_OK
000562 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,    OK
000564 dcab                      	rcall Button_ok_func ;   ,     
000565 dfb9                      	rcall interrupt_process ;  ,     
000566 e001                      	ldi r16,0x01
000567 9300 0113                 	sts INIT_FLAG,r16 ; ,    ,      HOME,        
                                 ext99:
000569 e001                          ldi r16,0x01
00056a 9300 0113                 	sts INIT_FLAG,r16 ; ,    ,      HOME,        
00056c 9508                      ret
                                 
                                 
                                 
                                 save_many_value_to_eeprom:
00056d e000                      	ldi r16,0x00 ;  
00056e e020                      	ldi r18,0x00 ;     
00056f e01a                      	ldi r17,0x0A ;     
000570 e634                      	ldi r19,0x64 ;       
                                 	save_many_cycle:
000571 df74                      	rcall EEPROM_Write
000572 e041                      	ldi r20,0x01
000573 0f14                      	add r17,r20 ;   ,     
                                 	
000574 953a                      	dec r19
000575 f7d9                      	brne save_many_cycle ;     r19 ,     
000576 e000                      	ldi r16,0x00 ;  
000577 e020                      	ldi r18,0x00 ;     
000578 e010                      	ldi r17,0x00 ;     
000579 df6c                      	rcall EEPROM_Write
00057a 9508                      ret
                                 
                                 /*
                                 lcd_printing_number:
                                 	cpi r21,SHAGOVIK_DELTA_L
                                 	brne print_exit
                                 	//      
                                 	rcall push_group_registers
                                 	push r25
                                 	push r24
                                 	ldi r16,0x40
                                 	rcall Set_cursor
                                 	pop r24
                                 	pop r25
                                 	//     
                                 	mov r26,r25 
                                 	mov r25,r24
                                 	rcall lcd_print_number ;    
                                 	rcall pop_group_registers
                                 print_exit:
                                 ret
                                 */
                                 
                                 
00057b 0000                      TIM2_COMP: nop
                                 	
00057c 930f                      	push r16
00057d 931f                      	push r17
00057e 932f                      	push r18
00057f 933f                      	push r19
000580 934f                      	push r20
                                 	//  SREG,        breq, brne  ..   .      ,   push  pop
000581 b70f                      	in r16,SREG
000582 9300 012b                 	sts SREG_temp,r16 
                                 
                                 	//rcall millis //    
                                 	
                                 
000584 2700                      	clr r16
000585 bd04                      	out TCNT2,r16
                                 	//     
000586 9120 0131                 	lds r18,TIM2_counter_high
000588 9110 0130                 	lds r17,TIM2_counter_low
00058a e001                      	ldi r16,0x01
                                 
                                 	//  
00058b 0f10                      	add r17,r16
00058c 2700                      	clr r16
00058d 1f20                      	adc r18,r16
                                 
                                 	//       0  520
00058e ef05                      	ldi r16,0xF5
00058f 1310                      	CPSE r17,r16
000590 c009                      	rjmp save_counter
000591 e001                      	ldi r16,0x01
000592 1320                      	CPSE r18,r16
000593 c006                      	rjmp save_counter
                                 //   521,  
                                 obnulenie_counter:
000594 2700                      	clr r16
000595 9300 0131                 	sts TIM2_counter_high,r16
000597 9300 0130                 	sts TIM2_counter_low,r16
000599 c004                      	rjmp tim2_ext
                                 //  
                                 save_counter:
00059a 9320 0131                 	sts TIM2_counter_high,r18
00059c 9310 0130                 	sts TIM2_counter_low,r17
                                 
                                 // 
                                 tim2_ext:
00059e 914f                      	pop r20
00059f 913f                      	pop r19
0005a0 912f                      	pop r18
0005a1 911f                      	pop r17
                                 	//  SREG,        breq, brne  ..   .      ,   push  pop
0005a2 9100 012b                 	lds r16,SREG_temp
0005a4 bf0f                      	out SREG,r16
0005a5 910f                      	pop r16 ;   ( - interrupt_process)
0005a6 9518                      reti
                                 
                                 
                                 
                                 
                                 //    
                                 EXT_INT0:
0005a7 930f                          push r16
0005a8 931f                          push r17
0005a9 932f                      	push r18
0005aa 933f                      	push r19
0005ab 934f                      	push r20
0005ac 935f                      	push r21 
0005ad 936f                      	push r22
0005ae 937f                      	push r23
0005af 938f                      	push r24
0005b0 939f                      	push r25
0005b1 93af                      	push r26
0005b2 93bf                      	push r27
                                 
                                 	
                                 
                                 	//  SREG,        breq, brne  ..   .      ,   push  pop
0005b3 b70f                      	in r16,SREG
0005b4 9300 012b                 	sts SREG_temp,r16 
                                 
0005b6 9100 0134                 	lds r16,PROG_FUNC_WORK_STATUS_RAM
0005b8 3000                      	cpi r16,0x00
0005b9 f159                      	breq ext_int0_exit
                                 
0005ba d2e1                      	rcall Clock_start_for_block //  ,     10 
                                 
0005bb 9bcb                      SBIS PINA,B1 ;   ,  1   B1 (  )
0005bc c00e                      rjmp rotate_forward ;    B1 0,    
                                 
                                 rotate_reverse:
                                 /*       */
                                 //  
0005bd 91a0 0132                 lds r26,SHAGOVIK_X_TRULY_HIGH_RAM  ;       
0005bf 9190 0133                 lds r25,SHAGOVIK_X_TRULY_LOW_RAM   ;       
                                 // 
0005c1 2788                      clr r24 ;    
0005c2 9170 0104                 lds r23,RAM_step_size ;   (  ) 
                                 //   ()   (),    
0005c4 dda7                      rcall subtraction_2x2 ;    (r26-r25 - r24-r23)
0005c5 3faf                      cpi r26,0xFF    ;         65000,     ,
0005c6 f009                      breq obnulenie	;      , ..   
                                 
0005c7 c014                      rjmp save_position ;     
                                 obnulenie:
0005c8 2799                      clr r25
0005c9 27aa                      clr r26
0005ca c011                      rjmp save_position ;     
                                 
                                 rotate_forward:
                                 /*       */
                                 //  
0005cb 91a0 0132                 lds r26,SHAGOVIK_X_TRULY_HIGH_RAM  ;       
0005cd 9190 0133                 lds r25,SHAGOVIK_X_TRULY_LOW_RAM   ;       
                                 // 
0005cf 2788                      clr r24 ;    
0005d0 9170 0104                 lds r23,RAM_step_size ;   (  ) 
                                 //   ( )   ( ),    
0005d2 dd9c                      rcall addition_2x2 ;    (r26-r25 + r24-r23)
                                 //         700 (70.0 ) (0x02BC)
0005d3 30a2                      cpi r26,0x02 ;    
0005d4 f428                      BRSH priravnenie_max ;       0x03    
0005d5 3f95                      cpi r25,0xF5 ;     - ,     
0005d6 f028                      BRLO save_position ;       0xBD,    
0005d7 30a1                      cpi r26,0x01 ;          0x02,     700
0005d8 f009                      breq priravnenie_max
                                 ;     700 (70.0),    
0005d9 c002                      rjmp save_position
                                 priravnenie_max:
0005da e0a1                      ldi r26,0x01
0005db ef94                      ldi r25,0xF4 ;    700 (70.0)
                                 
                                 save_position:
0005dc 93a0 010c                 sts SHAGOVIK_X2_HIGH_RAM,r26 ;      
0005de 9390 010d                 sts SHAGOVIK_X2_LOW_RAM,r25  ;      
                                 
0005e0 93a0 0132                 sts SHAGOVIK_X_TRULY_HIGH_RAM ,r26 ;      
0005e2 9390 0133                 sts SHAGOVIK_X_TRULY_LOW_RAM,r25  ;      
                                 
                                 /*
                                 ldi r16,0x40
                                 rcall Set_cursor ;      
                                 rcall lcd_print_number ;    [r26][r25] ()   
                                 */
0005e4 d010                      rcall controlling_motor
                                 
                                 ext_int0_exit:
                                 	//  SREG,        breq, brne  ..   .      ,   push  pop
0005e5 9100 012b                 	lds r16,SREG_temp
0005e7 bf0f                      	out SREG,r16
                                 
0005e8 91bf                      	pop r27
0005e9 91af                      	pop r26
0005ea 919f                      	pop r25 
0005eb 918f                      	pop r24
0005ec 917f                      	pop r23
0005ed 916f                      	pop r22
0005ee 915f                      	pop r21
0005ef 914f                      	pop r20
0005f0 913f                      	pop r19
0005f1 912f                      	pop r18
0005f2 911f                      	pop r17
0005f3 910f                      	pop r16
0005f4 9518                      reti
                                 
                                 //         
                                 controlling_motor:
                                 	
                                 	//  ,          
0005f5 e001                      	ldi r16,0x01
0005f6 9300 0114                 	sts ENCODER_CONTR_MOT_PRESS_OK,r16 
0005f8 9300 0115                 	sts ENCODER_CONTR_MOT_PRINT_X2,r16
0005fa 9300 0116                 	sts ENCODER_CONTR_MOT_ENCODER_PROCESSING,r16 ; ,      
0005fc 9508                      ret
                                 
                                 //         ,     
                                 check_encoder_press:
0005fd 9100 0114                 	lds r16,ENCODER_CONTR_MOT_PRESS_OK
0005ff 3001                      	cpi r16,0x01
000600 f469                      	brne c_e_p_exit
000601 e001                      	ldi r16,0x01
000602 9300 0116                     sts ENCODER_CONTR_MOT_ENCODER_PROCESSING,r16 ; ,      
000604 e003                      	ldi r16,RAM_BUTTON_OK
000605 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,      - ,      , ..    
000607 dc08                      	rcall Button_ok_func    //    
                                 	
                                 	//     3 ,         EEPROM
000608 e001                      	ldi r16,0x01
000609 9300 012c                 	sts ENCODER_CONTR_MOT_SAVE_X,r16
00060b 2700                      	clr r16
00060c 9300 0114                 	sts ENCODER_CONTR_MOT_PRESS_OK,r16 // ,   
                                 c_e_p_exit: ; 
                                 	
00060e 9508                      ret
                                 
                                 encoder_print_num:
                                 	//cli
00060f 9100 0115                 	lds r16,ENCODER_CONTR_MOT_PRINT_X2 ;        (  )
000611 3001                      	cpi r16,0x01
000612 f451                      	brne exit001 ;     ,   
                                 	//sei
                                 	//     
000613 e400                      	ldi r16,0x40
000614 daa2                      	rcall Set_cursor ;      
                                 	
000615 91a0 010c                 	lds r26,SHAGOVIK_X2_HIGH_RAM ;       2
000617 9190 010d                 	lds r25,SHAGOVIK_X2_LOW_RAM  ;       2
                                 
000619 dd6a                      	rcall lcd_print_number ;    [r26][r25] ()   
00061a 2700                      	clr r16
00061b 9300 0115                 	sts ENCODER_CONTR_MOT_PRINT_X2,r16 ;  
                                 exit001:
                                 //sei
00061d 9508                      ret
                                 
                                 //      EEPROM        ,   .     
                                 //   ,     . -      EEPROM
                                 save_position_X_after_3_sec:
00061e 932f                      	push r18
00061f 933f                      	push r19
000620 934f                      	push r20
                                 	//     
000621 9140 012f                 	lds r20,ENCODER_CONTR_MOT_SAVE_X_COUNTER_HIGH
000623 9130 012e                 	lds r19,ENCODER_CONTR_MOT_SAVE_X_COUNTER_MID
000625 9120 012d                 	lds r18,ENCODER_CONTR_MOT_SAVE_X_COUNTER_LOW
                                 	//    
000627 9100 012c                 	lds r16,ENCODER_CONTR_MOT_SAVE_X
                                 
                                 	//  .
000629 3001                      	cpi r16,0x01
00062a f461                      	brne spx_next1
                                 flag_1: //    1
                                 	//     
00062b e021                      	ldi r18,0x01
00062c 2733                      	clr r19
00062d 2744                      	clr r20
00062e 9340 012f                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_HIGH,r20
000630 9330 012e                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_MID,r19
000632 9320 012d                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_LOW,r18
000634 2700                      	clr r16
000635 9300 012c                 	sts ENCODER_CONTR_MOT_SAVE_X,r16 ;  
                                 spx_next1: //    0
                                 	//     .    0,   
000637 2700                      	clr r16
000638 1320                      	CPSE r18,r16
000639 c005                      	rjmp spx_next2 ; 
00063a 1330                      	CPSE r19,r16
00063b c003                      	rjmp spx_next2 ; 
00063c 1340                      	CPSE r20,r16
00063d c001                      	rjmp spx_next2 ; 
00063e c028                      	rjmp spx_exit
                                 spx_next2: //     0
                                 	//  1  
00063f e001                      	ldi r16,0x01
000640 0f20                      	add r18,r16
000641 2700                      	clr r16
000642 1f30                      	adc r19,r16
000643 1f40                      	adc r20,r16
                                 	//      (    )
000644 ef0f                      	ldi r16,ENCODER_CONTR_MOT_SAVE_X_TIME_LOW
000645 1320                      	CPSE r18,r16
000646 c01a                      	rjmp spx_next3
000647 ef0f                      	ldi r16,ENCODER_CONTR_MOT_SAVE_X_TIME_MID
000648 1330                      	CPSE r19,r16
000649 c017                      	rjmp spx_next3
00064a e001                      	ldi r16,ENCODER_CONTR_MOT_SAVE_X_TIME_HIGH
00064b 1340                      	CPSE r20,r16
00064c c014                      	rjmp spx_next3
                                 final_time1: //      (  )
                                 	//       
00064d 9100 0109                 	lds r16,SHAGOVIK_X0_LOW_RAM
                                 	//    EEPROM   0x0003
                                 
00064f 94f8                      	cli
                                 
000650 e013                      	ldi r17,0x03
000651 e020                      	ldi r18,0x00
000652 de93                      	rcall EEPROM_write
                                 
                                 	//       
000653 9100 0108                 	lds r16,SHAGOVIK_X0_HIGH_RAM
                                 	//    EEPROM   0x0004
000655 e014                      	ldi r17,0x04
000656 e020                      	ldi r18,0x00
000657 de8e                      	rcall EEPROM_write
                                 
000658 9478                      	sei
                                 
                                 	//    
000659 2722                      	clr r18
00065a 9320 012f                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_HIGH,r18
00065c 9320 012e                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_MID,r18
00065e 9320 012d                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_LOW,r18
000660 c006                      	rjmp spx_exit
                                 spx_next3: //       (   )
                                 	//   
000661 9340 012f                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_HIGH,r20
000663 9330 012e                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_MID,r19
000665 9320 012d                 	sts ENCODER_CONTR_MOT_SAVE_X_COUNTER_LOW,r18
                                 spx_exit:
000667 914f                      pop r20
000668 913f                      pop r19
000669 912f                      pop r18
00066a 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //      
                                 TIM1_COMPA: 
00066b 9add                      	SBI PORTA,STEP ;  1  PA5(STEP)
00066c 0000                      	nop ;  TMC2100   85 
00066d 0000                      	nop ;  65*2=130
00066e 98dd                      	CBI PORTA,STEP ;  0  PA5(STEP)
                                 
00066f d22c                      	rcall Clock_start_for_block //          10 
                                 
                                 	//rcall push_group_registers
000670 930f                      	push r16 //   (  interrupt_process)
                                 
                                 	//  SREG,        breq, brne  ..   .      ,   push  pop
000671 b70f                      	in r16,SREG
000672 9300 012b                 	sts SREG_temp,r16 
                                 	// ,      
000674 931f                      	push r17
000675 932f                      	push r18
000676 933f                      	push r19
000677 934f                      	push r20
000678 935f                      	push r21 
000679 936f                      	push r22
00067a 937f                      	push r23
00067b 938f                      	push r24
00067c 939f                      	push r25
00067d 93af                      	push r26
00067e 93bf                      	push r27
00067f 93cf                      	push r28
000680 93df                      	push r29
000681 93ef                      	push r30
000682 93ff                      	push r31
                                 
                                 	//       
000683 91f0 0117                 	lds r31,SHAGOVIK_r31
000685 91e0 0118                 	lds r30,SHAGOVIK_r30
000687 91d0 0119                 	lds r29,SHAGOVIK_r29
000689 91c0 011a                 	lds r28,SHAGOVIK_r28
00068b 91b0 011b                 	lds r27,SHAGOVIK_r27
00068d 91a0 011c                 	lds r26,SHAGOVIK_r26
00068f 9190 011d                 	lds r25,SHAGOVIK_r25
000691 9180 011e                 	lds r24,SHAGOVIK_r24
000693 9170 011f                 	lds r23,SHAGOVIK_r23
000695 9160 0126                 	lds r22,SHAGOVIK_r22
000697 9150 0127                 	lds r21,SHAGOVIK_r21
000699 9140 0128                 	lds r20,SHAGOVIK_r20
00069b 9130 0129                 	lds r19,SHAGOVIK_r19
                                 	//     HOME
00069d 9100 0103                 	lds r16,RAM_ACTIVE_BUTTON
00069f ff00                      	SBRS r16,0 ;   0  ,    ,     ,    ,     
0006a0 c0ad                      	rjmp home_func ;    ,   ,    
                                 
                                 
                                 	
                                 	
                                 
                                 //   0,1 
                                 do_0_1mm:
0006a1 e001                      	ldi r16,0x01
0006a2 1b50                      	sub r21,r16
0006a3 f019                      	breq check_for_zero
0006a4 2700                      	clr r16
0006a5 0b60                      	sbc r22,r16
0006a6 c115                      	rjmp exit_but_ok
                                 
                                 check_for_zero:
0006a7 2700                      	clr r16
0006a8 0b60                      	sbc r22,r16
0006a9 f009                      	breq obrabotka
0006aa c111                      	rjmp exit_but_ok
                                 
                                 	//dec r21 ;   1/16 
                                 	//breq obrabotka ;    0,1 ,  :  ,       ....
                                 	//rjmp exit1 ;   
                                 
                                 //  ,       ....
                                 obrabotka:
0006ab e950                      	ldi r21,SHAGOVIK_DELTA_L_LOW
0006ac e061                      	ldi r22,SHAGOVIK_DELTA_L_HIGH
                                 	;  r31:30  ,   ,  r29:r28  ,  r27:r26     r25:r24  
                                 	;  r22    
0006ad 9bdc                      	SBIS PORTA,DIR ;   
0006ae c01c                      	rjmp nazad ;   DIR ,   
                                 
                                 //   
                                 vpered:
                                 	//     0,1  (0x01),      
0006af e001                      	ldi r16,0x01
0006b0 2711                      	clr r17
0006b1 0f80                      	add r24,r16
0006b2 1f91                      	adc r25,r17
                                 	//  ,  ,     ,   ,  
0006b3 13e8                      	CPSE r30,r24 ;  ,  . 
0006b4 c003                      	rjmp next13 ;   ,  
0006b5 13f9                      	CPSE r31,r25 ;  ,  . 
0006b6 c001                      	rjmp next13 ;   ,  
0006b7 c073                      	rjmp THE_END1 ;  
                                 
                                 	next13:
                                 	//  ,   
0006b8 2f08                      	mov r16,r24
0006b9 2f19                      	mov r17,r25 ;    ,   
                                 
                                 	//     
0006ba e020                      	ldi r18,0x00
0006bb 13d2                      	CPSE r29,r18
0006bc c00b                      	rjmp chast1
0006bd 13c2                      	CPSE r28,r18
0006be c009                      	rjmp chast1
                                 //   2  
                                 chast2:
                                 	//     2   X
0006bf 93ef                      	push r30
0006c0 93ff                      	push r31
0006c1 1be0                      	sub r30,r16
0006c2 0bf1                      	sbc r31,r17
0006c3 2f0e                      	mov r16,r30
0006c4 2f1f                      	mov r17,r31
0006c5 91ff                      	pop r31
0006c6 91ef                      	pop r30
0006c7 c01a                      	rjmp pid1
                                 //   1  
                                 chast1:
                                 	//         0
0006c8 1b0a                      	sub r16,r26
0006c9 0b1b                      	sbc r17,r27
                                 
0006ca c017                      	rjmp pid1 ;  ,       
                                 
                                 
                                 //    
                                 nazad:
                                 	//     0,1  (0x01),      
0006cb e001                      	ldi r16,0x01
0006cc 2711                      	clr r17
0006cd 1b80                      	sub r24,r16
0006ce 0b91                      	sbc r25,r17
                                 	//  ,  ,     ,   ,  
0006cf 13e8                      	CPSE r30,r24 ;  ,  . 
0006d0 c003                      	rjmp next14 ;   ,  
0006d1 13f9                      	CPSE r31,r25 ;  ,  . 
0006d2 cfe5                      	rjmp next13 ;   ,  
0006d3 c057                      	rjmp THE_END1 ;  
                                 
                                 	next14:
                                 	//  ,   
0006d4 2f0a                      	mov r16,r26
0006d5 2f1b                      	mov r17,r27 ;    0,   
                                 
                                 	//     
0006d6 e020                      	ldi r18,0x00
0006d7 13d2                      	CPSE r29,r18
0006d8 c007                      	rjmp chast11
0006d9 13c2                      	CPSE r28,r18
0006da c005                      	rjmp chast11
                                 //   2  
                                 chast22:
                                 	//        X2
0006db 2f08                      	mov r16,r24
0006dc 2f19                      	mov r17,r25
                                 
0006dd 1b0e                      	sub r16,r30
0006de 0b1f                      	sbc r17,r31
0006df c002                      	rjmp pid1
                                 //   1  
                                 chast11:
                                 	//     0     
0006e0 1b08                      	sub r16,r24
0006e1 0b19                      	sbc r17,r25
                                 	//     X   2
                                 	//     0     
                                 	
                                 
                                 //    
                                 pid1:
                                 /*
                                 	//  
                                 	push r16
                                 	push r17
                                 	push r20
                                 	push r21 
                                 	push r23
                                 	push r24
                                 	push r25
                                 	push r26
                                 	push r27
                                 
                                 	//      
                                 	ldi r16,0x40
                                 	rcall Set_cursor
                                 	
                                 	//     
                                 	mov r26,r25 
                                 	mov r25,r24
                                 	rcall lcd_print_number ;    
                                 
                                 	pop r27
                                 	pop r26
                                 	pop r25 
                                 	pop r24
                                 	pop r23
                                 	pop r21
                                 	pop r20
                                 	pop r17
                                 	pop r16
                                 	*/
                                 	//      
0006e2 e62c                      	ldi r18,SHAGOVIK_pid_prop ;   r16 
0006e3 2733                      	clr r19 ;   
0006e4 de15                      	rcall umnoj_mul_2x2 ;  r19:r18 * r17:r16. -  r7:r6:r5:r4
0006e5 2d17                      	mov r17,r7 ;   ,      
0006e6 2d06                      	mov r16,r6 ;   ,      
                                 	// ,     ( ,   r29:r28   )
0006e7 2722                      	clr r18
0006e8 13d2                      	CPSE r29,r18 ;   ,  
0006e9 c01c                      	rjmp chast_puti1 ;    ,      
0006ea 13c2                      	CPSE r28,r18 ;   ,  
0006eb c01a                      	rjmp chast_puti1 ;    ,      
                                 
                                 
                                 /*  -   :
                                    OCR1A = |(X2 - X)| * Freq(min)
                                       STEP       2   .
                                           .
                                 */
                                 chast_puti2:
                                 	//      ,   . .     
0006ec 3010                      	cpi r17,0x00 
0006ed f551                      	brne priravn_OCR1A_min;    65535,     OCR1A
0006ee 3000                      	cpi r16,0x00
0006ef f541                      	brne priravn_OCR1A_min;    65535,     OCR1A
                                 
0006f0 2d15                      	mov r17,r5 ;  delta * kp   
0006f1 2d04                      	mov r16,r4
                                 	
0006f2 e037                      	ldi r19,SHAGOVIK_freq_minH ;    OCR1A
0006f3 ed20                      	ldi r18,SHAGOVIK_freq_minL
                                 
                                 	// OCR1A(MAX) - delta * Kp
0006f4 1b20                      	sub r18,r16
0006f5 0b31                      	sbc r19,r17 
                                 	
0006f6 f038                      	BRLO priravn_OCR1A_min_2 ;     ,        
                                 	//  r19:r18 
0006f7 3032                      	cpi r19,SHAGOVIK_freq_maxH
0006f8 f028                      	BRCS priravn_OCR1A_min_2
0006f9 3a2b                      	cpi r18,SHAGOVIK_freq_maxL
0006fa f440                      	BRCC higher2 ; 
0006fb 3032                      	cpi r19,SHAGOVIK_freq_maxH
0006fc f009                      	breq priravn_OCR1A_min_2
0006fd c005                      	rjmp higher2
                                 
                                 
                                 priravn_OCR1A_min_2:
                                 	//   OCR1A     
0006fe 9100 0110                 	lds r16,SHAGOVIK_OCR1A_BOTTOM_LOW_RAM
000700 9110 010f                 	lds r17,SHAGOVIK_OCR1A_BOTTOM_HIGH_RAM
000702 c026                      	rjmp set_OCR1A
                                 higher2:
000703 2f13                      	mov r17,r19 ;    OCR1A
000704 2f02                      	mov r16,r18
000705 c023                      	rjmp set_OCR1A
                                 /*
                                 	//      ,   . .     ( )
                                 	cpi r17,0x00 
                                 	brne priravn_OCR1A_max;    65535,     OCR1A
                                 	cpi r16,0x00
                                 	brne priravn_OCR1A_max;    65535,     OCR1A
                                 
                                 	mov r17,r5
                                 	mov r16,r4
                                 	
                                 	//   OCR1A,       
                                 	lds r19,SHAGOVIK_OCR1A_BOTTOM_HIGH_RAM
                                 	lds r18,SHAGOVIK_OCR1A_BOTTOM_LOW_RAM
                                 	
                                 	//   
                                 	ldi r19,SHAGOVIK_freq_minH
                                 	ldi r18,SHAGOVIK_freq_minL
                                 
                                 
                                 	sub r18,r16
                                 	sbc r19,r17
                                 
                                 	BRCS priravn_OCR1A_max //   ,     65535,    
                                 
                                 	//  r17:r16 
                                 	cpi r17,SHAGOVIK_freq_minH
                                 	BRCS lower1
                                 	cpi r16,SHAGOVIK_freq_minL
                                 	BRCC priravn_OCR1A_max ; 
                                 	cpi r17,SHAGOVIK_freq_minH
                                 	breq lower1
                                 
                                 priravn_OCR1A_max:
                                 	//   OCR1A.  
                                 	ldi r16,SHAGOVIK_freq_minL
                                 	ldi r17,SHAGOVIK_freq_minH
                                 	rjmp set_OCR1A
                                 lower1:
                                 	rjmp set_OCR1A
                                 	*/
                                 
                                 
                                 
                                 //      .      OCR1A: OCR1A = OCR1A(MAX) - delta * Kp
                                 //  OCR1A(MAX) -     ,    SHAGOVIK_freq_min;
                                 // delta - ,        
                                 chast_puti1:
                                 	//      ,   . .     
000706 3010                      	cpi r17,0x00 
000707 f481                      	brne priravn_OCR1A_min;    65535,     OCR1A
000708 3000                      	cpi r16,0x00
000709 f471                      	brne priravn_OCR1A_min;    65535,     OCR1A
                                 
00070a 2d15                      	mov r17,r5 ;  delta * kp   
00070b 2d04                      	mov r16,r4
                                 	
00070c e037                      	ldi r19,SHAGOVIK_freq_minH ;    OCR1A
00070d ed20                      	ldi r18,SHAGOVIK_freq_minL
                                 
                                 	// OCR1A(MAX) - delta * Kp
00070e 1b20                      	sub r18,r16
00070f 0b31                      	sbc r19,r17 
                                 
000710 f038                      	BRLO priravn_OCR1A_min ;     ,     
                                 	//  r19:r18 
000711 3032                      	cpi r19,SHAGOVIK_freq_maxH
000712 f028                      	BRCS priravn_OCR1A_min
000713 3a2b                      	cpi r18,SHAGOVIK_freq_maxL
000714 f430                      	BRCC higher1 ; 
000715 3032                      	cpi r19,SHAGOVIK_freq_maxH
000716 f009                      	breq priravn_OCR1A_min
000717 c003                      	rjmp higher1
                                 
                                 
                                 priravn_OCR1A_min:
                                 	//   OCR1A.  
000718 ea0b                      	ldi r16,SHAGOVIK_freq_maxL
000719 e012                      	ldi r17,SHAGOVIK_freq_maxH
00071a c002                      	rjmp check_half_way ;      
                                 higher1:
00071b 2f13                      	mov r17,r19 ;    OCR1A
00071c 2f02                      	mov r16,r18
                                 //      
                                 check_half_way:
00071d 138c                      	CPSE r24,r28
00071e c00a                      	rjmp set_OCR1A
00071f 139d                      	CPSE r25,r29
000720 c008                      	rjmp set_OCR1A
                                 	//     , 
                                 	/*
                                 	mov r27,r29
                                 	mov r26,r28 ; X1   0
                                 	*/
000721 2fbf                      	mov r27,r31
000722 2fae                      	mov r26,r30 ; X2   0
000723 27dd                      	clr r29
000724 27cc                      	clr r28 ;  1,  ,      
                                 	
                                 	//     OCR1A,       
000725 9310 010f                 	sts SHAGOVIK_OCR1A_BOTTOM_HIGH_RAM,r17
000727 9300 0110                 	sts SHAGOVIK_OCR1A_BOTTOM_LOW_RAM,r16
                                 set_OCR1A:
000729 da0d                      	rcall TIM16_WriteOCR1A ;   OCR1A r17:r16
00072a c091                      	rjmp exit_but_ok ;   
                                 THE_END1:
                                 	
00072b 98af                      	CBI PORTC,7 ;    
00072c e008                      	ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (0<<CS10) ; 
00072d bd0e                      	out TCCR1B,r16 ;  
                                 
                                 	//    ,   
00072e 9390 0108                 	sts SHAGOVIK_X0_HIGH_RAM,r25
000730 9380 0109                 	sts SHAGOVIK_X0_LOW_RAM,r24
000732 9390 0132                 	sts SHAGOVIK_X_TRULY_HIGH_RAM,r25 ;     
000734 9380 0133                 	sts SHAGOVIK_X_TRULY_LOW_RAM,r24 ;     
                                 	//      
                                 	//   EEPROM  
000736 e001                      	ldi r16,0x01
000737 9300 012c                 	sts ENCODER_CONTR_MOT_SAVE_X,r16
                                 	//     ,     
000739 9100 0116                 	lds r16,ENCODER_CONTR_MOT_ENCODER_PROCESSING
00073b 3001                      	cpi r16,0x01
                                 
00073c f029                      	breq if_encoder //      
00073d e400                      	ldi r16,0x40
00073e d978                      	rcall Set_cursor
                                 	
                                 	//     
00073f 2fa9                      	mov r26,r25 
000740 2f98                      	mov r25,r24
000741 dc42                      	rcall lcd_print_number ;    
                                 
                                 if_encoder:
000742 e000                      	ldi r16,0x00
000743 9300 0116                     sts ENCODER_CONTR_MOT_ENCODER_PROCESSING,r16 ;  
                                 
000745 e400                      	ldi r16,0b01000000
000746 bf0b                      	out GICR,r16 ;  
                                 
000747 b709                      	in r16,TIMSK
000748 6002                      	ori r16,0b00000010  
000749 bf09                      	out TIMSK,r16 ;   0
                                 
00074a e000                      	ldi r16,0x00 
00074b 9300 0112                 	sts SHAGOVIK_timer1_on,r16 ; ,  timer1 
00074d c06e                      	rjmp exit_but_ok ;   
                                 
                                 //    
                                 home_func:
                                 	//   0,1 
                                 do_0_1mm_home:
00074e e001                      	ldi r16,0x01
00074f 1b70                      	sub r23,r16
000750 f019                      	breq check_for_zero_home
000751 2700                      	clr r16
000752 0b80                      	sbc r24,r16
000753 c068                      	rjmp exit_but_ok
                                 
                                 check_for_zero_home:
000754 2700                      	clr r16
000755 0b80                      	sbc r24,r16
000756 f009                      	breq obrabotka_home
000757 c064                      	rjmp exit_but_ok
                                 	/*  (stage1):
                                 	   0 -    ,    2    ,      4 
                                 	   1 -     ,      ,     
                                 	   2 -    ,   1    
                                 	   3 -  ,     
                                 	   4 -   ,    1   
                                 	*/
                                 obrabotka_home:
000758 e970                      	ldi r23,SHAGOVIK_DELTA_L_LOW
000759 e081                      	ldi r24,SHAGOVIK_DELTA_L_HIGH
                                 
00075a 30a0                      	cpi r26,0x00 
00075b f041                      	breq stage0 
                                 
00075c 30a1                      	cpi r26,0x01
00075d f089                      	breq stage1 
                                 
00075e 30a2                      	cpi r26,0x02
00075f f0c9                      	breq stage2 
                                 
000760 30a3                      	cpi r26,0x03
000761 f121                      	breq stage3 
                                 
000762 30a4                      	cpi r26,0x04
000763 f149                      	breq stage4 
                                 
                                 //    ,    2    ,      4 
                                 stage0:
                                 	//      2 
                                 	//      
000764 e001                      	ldi r16,0x01
000765 1b50                      	sub r21,r16
000766 2700                      	clr r16
000767 0b60                      	sbc r22,r16
                                 
000768 3050                      	cpi r21,0x00
000769 f511                      	brne zapasnoi_exit
00076a 3060                      	cpi r22,0x00
00076b f501                      	brne zapasnoi_exit ;  r22:r21    ,  
                                 
                                 	//   2 , 
00076c e0a3                      	ldi r26,0x03 ;    3   
00076d 98dc                      	CBI PORTA,DIR ;     
                                 	//     4
                                 	//ldi r22,HOME_SHAGOVIK_DELTA_HIGH_4 
                                 	//ldi r21,HOME_SHAGOVIK_DELTA_LOW_4  
00076e c04d                      rjmp exit1
                                 
                                 //     ,      ,     
                                 stage1:
                                 	//      
00076f b309                      	in r16,PINA
000770 ff07                      	SBRS r16,INDSIGNAL 
000771 c04a                      	rjmp exit1
                                 	//    ,     2
                                 	//rcall low_speed ;   
000772 e0a2                      	ldi r26,0x02 ;    2   
000773 9adc                      	SBI PORTA,DIR ;     
                                 	//     2
000774 e060                      	ldi r22,HOME_SHAGOVIK_DELTA_HIGH_2 
000775 e154                      	ldi r21,HOME_SHAGOVIK_DELTA_LOW_2 
000776 e604                      	ldi r16,0x64
000777 d932                      	rcall nopdelay_1ms
000778 c043                      rjmp exit1
                                 
                                 //    ,   1    
                                 stage2:
                                 	//      1 
                                 	//      
000779 e001                      	ldi r16,0x01
00077a 1b50                      	sub r21,r16
00077b 2700                      	clr r16
00077c 0b60                      	sbc r22,r16
                                 
00077d 2700                      	clr r16
00077e 3050                      	cpi r21,0x00
00077f f461                      	brne zapasnoi_exit
000780 3060                      	cpi r22,0x00
000781 f451                      	brne zapasnoi_exit ;  r22:r21    ,  
                                 	//   1 , 
000782 dd94                      	rcall low_speed ;    
000783 e0a3                      	ldi r26,0x03 ;    3   
000784 98dc                      	CBI PORTA,DIR ;     
000785 c036                      rjmp exit1
                                 
                                 //  ,     
                                 stage3:
                                 	//      
000786 b309                      	in r16,PINA
000787 ff07                      	SBRS r16,INDSIGNAL 
000788 c033                      	rjmp exit1
                                 	//    ,     4
000789 e0a4                      	ldi r26,0x04 ;    4 
                                 	//     4
00078a e060                      	ldi r22,HOME_SHAGOVIK_DELTA_HIGH_4 
00078b e051                      	ldi r21,HOME_SHAGOVIK_DELTA_LOW_4  
                                 zapasnoi_exit:
00078c c02f                      rjmp exit1
                                 
                                 //   ,    1   
                                 stage4:
                                 	//      1 
                                 	//      
00078d e001                      	ldi r16,0x01
00078e 1b50                      	sub r21,r16
00078f 2700                      	clr r16
000790 0b60                      	sbc r22,r16
                                 
000791 2700                      	clr r16
000792 3050                      	cpi r21,0x00
000793 f7c1                      	brne zapasnoi_exit
000794 3060                      	cpi r22,0x00
000795 f7b1                      	brne zapasnoi_exit ;  r22:r21    ,  
                                 	//   1     , 
000796 98ae                      	CBI PORTC,LED_home ;    HOME
000797 e008                      	ldi r16, (1<<WGM12) | (0<<WGM13) | (0<<CS12) | (0<<CS11) | (0<<CS10) ; 
000798 bd0e                      	out TCCR1B,r16 ;  
                                 
                                 	//     ,   ,          
000799 2799                      	clr r25
00079a 2788                      	clr r24
00079b 9390 0108                 	sts SHAGOVIK_X0_HIGH_RAM,r25
00079d 9380 0109                 	sts SHAGOVIK_X0_LOW_RAM,r24
00079f 9390 0132                 	sts SHAGOVIK_X_TRULY_HIGH_RAM,r25 ;     
0007a1 9380 0133                 	sts SHAGOVIK_X_TRULY_LOW_RAM,r24 ;     
0007a3 9390 010c                 	sts SHAGOVIK_X2_HIGH_RAM,r25  
0007a5 9380 010d                 	sts SHAGOVIK_X2_LOW_RAM,r24  
                                 	
                                 	//   EEPROM  
0007a7 e001                      	ldi r16,0x01
0007a8 9300 012c                 	sts ENCODER_CONTR_MOT_SAVE_X,r16
                                 
0007aa 9100 0113                 	lds r16,INIT_FLAG
0007ac 3000                      	cpi r16,0x00
0007ad f029                      	breq home_next1 ;    ,    ,       0
                                 
                                 	//     
0007ae e400                      	ldi r16,0x40
0007af d907                      	rcall Set_cursor
                                 	
                                 	//     
0007b0 2fa9                      	mov r26,r25 
0007b1 2f98                      	mov r25,r24
0007b2 dbd1                      	rcall lcd_print_number ;    
                                 
                                 
                                 home_next1:
                                 
0007b3 e400                      	ldi r16,0b01000000
0007b4 bf0b                      	out GICR,r16 ;  
                                 
0007b5 b709                      	in r16,TIMSK
0007b6 6002                      	ori r16,0b00000010  
0007b7 bf09                      	out TIMSK,r16 ;   0
                                 
0007b8 e000                      	ldi r16,0x00 
0007b9 9300 0112                 	sts SHAGOVIK_timer1_on,r16 ; ,  timer1 
0007bb c000                      rjmp exit1
                                 
                                 exit_but_ok:
                                 //    ,           
                                 	
                                 exit1:
                                 //       
0007bc 93f0 0117                 	sts SHAGOVIK_r31,r31
0007be 93e0 0118                 	sts SHAGOVIK_r30,r30
0007c0 93d0 0119                 	sts SHAGOVIK_r29,r29
0007c2 93c0 011a                 	sts SHAGOVIK_r28,r28
0007c4 93b0 011b                 	sts SHAGOVIK_r27,r27
0007c6 93a0 011c                 	sts SHAGOVIK_r26,r26
0007c8 9390 011d                 	sts SHAGOVIK_r25,r25
0007ca 9380 011e                 	sts SHAGOVIK_r24,r24
0007cc 9370 011f                 	sts SHAGOVIK_r23,r23
0007ce 9360 0126                 	sts SHAGOVIK_r22,r22
0007d0 9350 0127                 	sts SHAGOVIK_r21,r21
0007d2 9340 0128                 	sts SHAGOVIK_r20,r20
0007d4 9330 0129                 	sts SHAGOVIK_r19,r19
                                 	// ,      
0007d6 91ff                      	pop r31
0007d7 91ef                      	pop r30
0007d8 91df                      	pop r29
0007d9 91cf                      	pop r28
0007da 91bf                      	pop r27
0007db 91af                      	pop r26
0007dc 919f                      	pop r25 
0007dd 918f                      	pop r24
0007de 917f                      	pop r23
0007df 916f                      	pop r22
0007e0 915f                      	pop r21
0007e1 914f                      	pop r20
0007e2 913f                      	pop r19
0007e3 912f                      	pop r18
0007e4 911f                      	pop r17
                                 //  
                                 //  SREG,        breq, brne  ..   .      ,   push  pop
0007e5 9100 012b                 	lds r16,SREG_temp
0007e7 bf0f                      	out SREG,r16
0007e8 910f                      	pop r16 ;   ( - interrupt_process)
0007e9 9518                      reti
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 //     .   -          -
                                 test_random:
0007ea 99c9                      	SBIC PINA,1 ;   HOME ,   
0007eb 9508                      	ret ;  
                                 
0007ec 99b1                      	SBIC PINB,1 ;   BLOCK ,   
0007ed 9508                      	ret ;  
                                 
                                 
                                 	//        
0007ee b306                      	in r16,PINB
0007ef fd02                      	SBRC r16,2 ;     ,   .  
0007f0 c001                      	rjmp test_start ;   ,   
0007f1 9508                      	ret ;   
                                 
                                 
                                 test_start: ;  
                                 	//      ,   ,   .
                                 	//   . 
                                 	//ldi r18,0x00
                                 	//ldi r17,0x02 ; EEPROM  0x0002
                                 	//rcall EEPROM_read
                                 
                                 	//cpi r16,0xFF ;   
                                 	//breq test_random_next2 ;       
                                 
                                 test_auto_on: ;  
0007f2 e000                      	ldi r16,0x00
0007f3 9300 0113                 	sts INIT_FLAG,r16 ; ,     ,   
0007f5 e004                      	ldi r16,RAM_BUTTON_HOME
0007f6 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,    HOME
0007f8 dabb                      	rcall Button_home_func ;    
0007f9 dd25                      	rcall interrupt_process ;  ,     
0007fa d9d0                      	rcall get_position_value_from_eeprom ;  ,     
0007fb e003                      	ldi r16,RAM_BUTTON_OK
0007fc 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,    OK
0007fe da11                      	rcall Button_ok_func ;   ,     
0007ff dd1f                      	rcall interrupt_process ;  ,     
000800 e001                      	ldi r16,0x01
000801 9300 0113                 	sts INIT_FLAG,r16 ; ,    ,      HOME,        
                                 
                                 
                                 test_random_next2: ;  
                                 	//   2,     
000803 e00f                      	ldi r16,0b00001111 ; CTC; 1024 Precaler
000804 bd05                      	out TCCR2,r16 
                                 
000805 2700                      	clr r16
000806 bd04                      	out TCNT2,r16 ;  
                                 
000807 e00f                      	ldi r16,0x0F ; 15 ~ 1 
000808 bd03                      	out OCR2,r16
                                 
000809 b709                      	in r16,TIMSK
00080a 6800                      	ori r16,0b10000000 ;   
00080b bf09                      	out TIMSK,r16
                                 
00080c 94f8                      	cli
00080d 2700                      	clr r16
00080e 2711                      	clr r17
00080f 9310 0131                 	sts TIM2_counter_high,r17
000811 9300 0130                 	sts TIM2_counter_low,r16
000813 9478                      	sei
                                 //  
                                 while1:
000814 daf5                      	rcall Button_block_func
000815 ef0f                      	ldi r16,0xFF
000816 d893                      	rcall nopdelay_1ms
000817 ef0f                      	ldi r16,0xFF
000818 d891                      	rcall nopdelay_1ms
000819 ef0f                      	ldi r16,0xFF
00081a d88f                      	rcall nopdelay_1ms
00081b ef0f                      	ldi r16,0xFF
00081c d88d                      	rcall nopdelay_1ms
00081d ef0f                      	ldi r16,0xFF
00081e d88b                      	rcall nopdelay_1ms
00081f ef0f                      	ldi r16,0xFF
000820 d889                      	rcall nopdelay_1ms
000821 ef0f                      	ldi r16,0xFF
000822 d887                      	rcall nopdelay_1ms
000823 ef0f                      	ldi r16,0xFF
000824 d885                      	rcall nopdelay_1ms
000825 ef0f                      	ldi r16,0xFF
000826 d883                      	rcall nopdelay_1ms
000827 ef0f                      	ldi r16,0xFF
000828 d881                      	rcall nopdelay_1ms
000829 ef0f                      	ldi r16,0xFF
00082a d87f                      	rcall nopdelay_1ms
00082b ef0f                      	ldi r16,0xFF
00082c d87d                      	rcall nopdelay_1ms
00082d ef0f                      	ldi r16,0xFF
00082e d87b                      	rcall nopdelay_1ms
00082f ef0f                      	ldi r16,0xFF
000830 d879                      	rcall nopdelay_1ms
000831 ef0f                      	ldi r16,0xFF
000832 d877                      	rcall nopdelay_1ms
000833 ef0f                      	ldi r16,0xFF
000834 d875                      	rcall nopdelay_1ms
000835 dad4                      	rcall Button_block_func
                                 
000836 9110 0131                 	lds r17,TIM2_counter_high
000838 9100 0130                 	lds r16,TIM2_counter_low
                                 	//ldi r17,0x01
                                 	//ldi r16,0x2c
00083a 9310 010c                 	sts SHAGOVIK_X2_HIGH_RAM,r17 ;      
00083c 9300 010d                     sts SHAGOVIK_X2_LOW_RAM,r16  ;      
                                 	
                                 	
00083e 931f                      	push r17
00083f 930f                      	push r16
000840 e003                      	ldi r16,RAM_BUTTON_OK
000841 9300 0103                 	sts RAM_ACTIVE_BUTTON,r16 ; ,    OK
000843 d9cc                      	rcall Button_ok_func ;    
                                 
000844 dcda                      	rcall interrupt_process ;  ,     
                                 	
000845 910f                      	pop r16
000846 911f                      	pop r17
                                 
000847 cfcc                      	rjmp while1
                                 
000848 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 /*
                                 get_adc_value:
                                 	ldi r16,0b11000111 
                                 	out ADCSRA,r16    ; ADC enable; Start conversation; Prescaler for freq  = 128
                                 //   6   ADCSRA 
                                 wait_value:
                                 	in r16,ADCSRA
                                 	SBRC r16,6
                                 	rjmp wait_value ;   Start conversation ,        
                                 	*/
                                 
                                 
                                 ;     EEPROM,       0  (r18 - 1) ( 0  99)
                                 set_value_of_positions_to_eeprom:
                                 	//    BLOCK   OK,     
                                 
                                 	//     OK    
000849 b306                      	in r16,PINB
00084a fd02                      	SBRC r16,2 ;   OK  ,   .  
00084b c001                      	rjmp check_block ;  OK ,      BLOCK
00084c 9508                      	ret ;   
                                 
                                 check_block:
                                 	//     BLOCK    
00084d b306                      	in r16,PINB
00084e fd01                      	SBRC r16,1 ;   BLOCK  ,   .  
00084f c001                      	rjmp clear_values_start ;  BLOCK ,    
000850 9508                      	ret ;   
                                 
                                 clear_values_start:
                                 	
000851 e624                      	ldi r18,0x64 ;        
000852 2711                      	clr r17 ; 
000853 9310 010c                 	sts SHAGOVIK_X2_HIGH_RAM,r17 ;   0
000855 9310 010d                 	sts SHAGOVIK_X2_LOW_RAM,r17 ;   0
000857 9310 0107                 	sts RAM_position_number,r17  ;   
                                 //   
                                 go1:
                                 	;   EEPROM  SHAGOVIK_X2_HIGH_RAM  RAM_position_number
                                 	//    
000859 931f                      	push r17
00085a 932f                      	push r18
00085b 9aad                      	sbi PORTC,LED_prog
                                 	//    
00085c 9100 0107                 	lds r16,RAM_position_number
                                 
                                 	//        263 (26.3)
00085e e012                      	ldi r17,0x02
00085f 9f01                      	mul r16,r17
000860 2d00                      	mov r16,r0
000861 e01a                      	ldi r17,0x0A
000862 0f10                      	add r17,r16
000863 2722                      	clr r18
                                 
000864 9100 010c                 	lds r16,SHAGOVIK_X2_HIGH_RAM  ;      
000866 dc7f                      	rcall EEPROM_write
                                 
000867 9513                      	inc r17
000868 9100 010d                 	lds r16,SHAGOVIK_X2_LOW_RAM  ;      
00086a dc7b                      	rcall EEPROM_write
00086b 98ad                      	cbi PORTC,LED_prog
00086c 912f                      	pop r18
00086d 911f                      	pop r17
                                 
00086e 9513                      	inc r17
00086f 9310 0107                 	sts RAM_position_number,r17 ;   
000871 952a                      	dec r18 
000872 f731                      	brne go1 ;  r18   ,  
                                 
                                 	//       
000873 2700                      	clr r16
000874 e010                      	ldi r17,0x00
000875 2722                      	clr r18
000876 dc6f                      	rcall EEPROM_write
                                 
000877 9513                      	inc r17
000878 dc6d                      	rcall EEPROM_write
000879 9513                      	inc r17
00087a dc6b                      	rcall EEPROM_write
00087b 9513                      	inc r17
00087c dc69                      	rcall EEPROM_write
00087d 9513                      	inc r17
00087e dc67                      	rcall EEPROM_write
                                 	
                                 
                                 
00087f 9508                      ret
                                 
                                 
                                 //     ,      
                                 check_block_prog_ok:
                                 
                                 	//ldi r16,0x00
                                 	//sts PROG_FUNC_WORK_STATUS_RAM,r16 ;       . 0 -    . 1 - .
                                 
000880 9bc8                      	SBIS PINA,0 ;   PROG ,   
000881 9508                      	ret ;  
                                 
000882 9bb1                      	SBIS PINB,1 ;   BLOCK ,   
000883 9508                      	ret ;  
                                 
000884 9bb2                      	SBIS PINB,2 ;   OK ,   
000885 9508                      	ret ;  
                                 
                                 	//      ,    
000886 e001                      	ldi r16,0x01
000887 9300 0134                 	sts PROG_FUNC_WORK_STATUS_RAM,r16 ;       . 0 -    . 1 - .
000889 9300 013c                 	sts EXIT_FROM_SETTINGS_CLK_FLAG,r16
                                 
                                 	//  BLOCK
00088b 98ac                      	CBI PORTC,LED_block
00088c e003                      	ldi r16,0b00000011 
00088d 9300 0111                 	sts access_to_button_flags,r16 ;    ,  
00088f e400                      	ldi r16,0b01000000
000890 bf0a                      	out GIFR,r16 ;    
000891 bf0b                      	out GICR,r16 ;    INT0,    
000892 d009                      	rcall Clock_start_for_block //  ,     10 
                                 
000893 940e 0300                 	call blink_prog_led //    PROG
                                 
                                 //     BLOCK
                                 wait_block_release:
000895 99b1                      	SBIC PINB,1 ;   ,   . 
000896 cffe                      	rjmp wait_block_release
                                 
                                 //     HOME
                                 wait_home_release:
000897 99c9                      	SBIC PINA,1 ;   ,   . 
000898 cffe                      	rjmp wait_home_release
                                 
                                 //     OK
                                 wait_ok_release:
000899 99b2                      	SBIC PINB,2 ;   ,   . 
00089a cffe                      	rjmp wait_ok_release
                                 
00089b 9508                      ret
                                 
                                 // ,   ,       10 .        
                                 Clock_start_for_block:
00089c 930f                      	push r16
00089d e001                      	ldi r16,0x01
00089e 9300 0138                 	sts SET_BLOCK_CLK_FLAG,r16
0008a0 9300 013c                 	sts EXIT_FROM_SETTINGS_CLK_FLAG,r16 //         
0008a2 910f                      	pop r16
0008a3 9508                      ret
                                 
                                 //    
                                 Clock_stop_for_block:
0008a4 930f                      	push r16
0008a5 2700                      	clr r16
0008a6 9300 0138                 	sts SET_BLOCK_CLK_FLAG,r16
0008a8 9300 0135                 	sts SET_BLOCK_CLK_COUNTER_HIGH,r16
0008aa 9300 0136                 	sts SET_BLOCK_CLK_COUNTER_MID,r16
0008ac 9300 0137                 	sts SET_BLOCK_CLK_COUNTER_LOW,r16
0008ae 910f                      	pop r16
0008af 9508                      ret
                                 /*
                                 millis:
                                 //     
                                 	lds r20,MILLIS_1
                                 	lds r19,MILLIS_2
                                 	lds r18,MILLIS_3
                                 	lds r17,MILLIS_4
                                 
                                 	//     
                                 	ldi r16,0x01
                                 	add r17,r16
                                 	clr r16
                                 	adc r18,r16
                                 	adc r19,r16
                                 	adc r20,r16
                                 
                                 	//     
                                 	sts MILLIS_1,r20
                                 	sts MILLIS_2,r19
                                 	sts MILLIS_3,r18
                                 	sts MILLIS_4,r17
                                 ret
                                 */
                                 
                                 
                                 
                                 
                                 set_block_clk:
0008b0 930f                      	push r16
0008b1 932f                      	push r18
0008b2 933f                      	push r19
0008b3 934f                      	push r20
                                 	//     
0008b4 9140 0135                 	lds r20,SET_BLOCK_CLK_COUNTER_HIGH
0008b6 9130 0136                 	lds r19,SET_BLOCK_CLK_COUNTER_MID
0008b8 9120 0137                 	lds r18,SET_BLOCK_CLK_COUNTER_LOW
                                 	//    
0008ba 9100 0138                 	lds r16,SET_BLOCK_CLK_FLAG
                                 
                                 	//  .
0008bc 3001                      	cpi r16,0x01
0008bd f461                      	brne set_block_spx_next1
                                 set_block_flag: //    1
                                 	//     
0008be e021                      	ldi r18,0x01
0008bf 2733                      	clr r19
0008c0 2744                      	clr r20
0008c1 9340 0135                 	sts SET_BLOCK_CLK_COUNTER_HIGH,r20
0008c3 9330 0136                 	sts SET_BLOCK_CLK_COUNTER_MID,r19
0008c5 9320 0137                 	sts SET_BLOCK_CLK_COUNTER_LOW,r18
0008c7 2700                      	clr r16
0008c8 9300 0138                 	sts SET_BLOCK_CLK_FLAG,r16 ;  
                                 set_block_spx_next1: //    0
                                 	//     .    0,   
0008ca 2700                      	clr r16
0008cb 1320                      	CPSE r18,r16
0008cc c005                      	rjmp set_block_spx_next2 ; 
0008cd 1330                      	CPSE r19,r16
0008ce c003                      	rjmp set_block_spx_next2 ; 
0008cf 1340                      	CPSE r20,r16
0008d0 c001                      	rjmp set_block_spx_next2 ; 
0008d1 c022                      	rjmp set_block_spx_exit
                                 set_block_spx_next2: //     0
                                 	//  1  
0008d2 e001                      	ldi r16,0x01
0008d3 0f20                      	add r18,r16
0008d4 2700                      	clr r16
0008d5 1f30                      	adc r19,r16
0008d6 1f40                      	adc r20,r16
                                 	//      (    )
0008d7 ef0f                      	ldi r16,SET_BLOCK_CLK_TIME_LOW
0008d8 1320                      	CPSE r18,r16
0008d9 c014                      	rjmp set_block_spx_next3
0008da ef0f                      	ldi r16,SET_BLOCK_CLK_TIME_MID
0008db 1330                      	CPSE r19,r16
0008dc c011                      	rjmp set_block_spx_next3
0008dd e008                      	ldi r16,SET_BLOCK_CLK_TIME_HIGH
0008de 1340                      	CPSE r20,r16
0008df c00e                      	rjmp set_block_spx_next3
                                 set_block_final_time: //      (  )
                                 	//   
0008e0 9aac                      	SBI PORTC,LED_block
0008e1 e001                      	ldi r16,0b00000001 
0008e2 9300 0111                 	sts access_to_button_flags,r16 ;    
0008e4 e000                      	ldi r16,0b00000000
0008e5 bf0b                      	out GICR,r16 ; INT0        INT0
                                 
                                 
                                 	//    
0008e6 2722                      	clr r18
0008e7 9320 0135                 	sts SET_BLOCK_CLK_COUNTER_HIGH,r18
0008e9 9320 0136                 	sts SET_BLOCK_CLK_COUNTER_MID,r18
0008eb 9320 0137                 	sts SET_BLOCK_CLK_COUNTER_LOW,r18
0008ed c006                      	rjmp set_block_spx_exit
                                 set_block_spx_next3: //       (   )
                                 	//   
0008ee 9340 0135                 	sts SET_BLOCK_CLK_COUNTER_HIGH,r20
0008f0 9330 0136                 	sts SET_BLOCK_CLK_COUNTER_MID,r19
0008f2 9320 0137                 	sts SET_BLOCK_CLK_COUNTER_LOW,r18
                                 set_block_spx_exit:
0008f4 914f                      pop r20
0008f5 913f                      pop r19
0008f6 912f                      pop r18
0008f7 910f                      pop r16
0008f8 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 exit_from_settings_mode_clk:
                                 
0008f9 930f                      	push r16
0008fa 932f                      	push r18
0008fb 933f                      	push r19
0008fc 934f                      	push r20
                                 
                                 	// ,        ,   ,    
0008fd 9100 0134                 	lds r16,PROG_FUNC_WORK_STATUS_RAM // 0 -    . 1 - .
0008ff 3000                      	cpi r16,0x00 //    ,    
000900 f1f1                      	breq exit_from_settings_spx_exit
                                 
                                 	//     
000901 9140 0139                 	lds r20,EXIT_FROM_SETTINGS_CLK_COUNTER_HIGH
000903 9130 013a                 	lds r19,EXIT_FROM_SETTINGS_CLK_COUNTER_MID
000905 9120 013b                 	lds r18,EXIT_FROM_SETTINGS_CLK_COUNTER_LOW
                                 	//    
000907 9100 013c                 	lds r16,EXIT_FROM_SETTINGS_CLK_FLAG
                                 
                                 	//  .
000909 3001                      	cpi r16,0x01
00090a f461                      	brne exit_from_settings_spx_next1
                                 exit_from_settings_flag: //    1
                                 	//     
00090b e021                      	ldi r18,0x01
00090c 2733                      	clr r19
00090d 2744                      	clr r20
00090e 9340 0139                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_HIGH,r20
000910 9330 013a                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_MID,r19
000912 9320 013b                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_LOW,r18
000914 2700                      	clr r16
000915 9300 013c                 	sts EXIT_FROM_SETTINGS_CLK_FLAG,r16 ;  
                                 exit_from_settings_spx_next1: //    0
                                 	//     .    0,   
000917 2700                      	clr r16
000918 1320                      	CPSE r18,r16
000919 c005                      	rjmp exit_from_settings_spx_next2 ; 
00091a 1330                      	CPSE r19,r16
00091b c003                      	rjmp exit_from_settings_spx_next2 ; 
00091c 1340                      	CPSE r20,r16
00091d c001                      	rjmp exit_from_settings_spx_next2 ; 
00091e c020                      	rjmp exit_from_settings_spx_exit
                                 exit_from_settings_spx_next2: //     0
                                 	//  1  
00091f e001                      	ldi r16,0x01
000920 0f20                      	add r18,r16
000921 2700                      	clr r16
000922 1f30                      	adc r19,r16
000923 1f40                      	adc r20,r16
                                 	//      (    )
000924 ef0f                      	ldi r16,EXIT_FROM_SETTINGS_CLK_TIME_LOW
000925 1320                      	CPSE r18,r16
000926 c012                      	rjmp exit_from_settings_spx_next3
000927 ef0f                      	ldi r16,EXIT_FROM_SETTINGS_CLK_TIME_MID
000928 1330                      	CPSE r19,r16
000929 c00f                      	rjmp exit_from_settings_spx_next3
00092a e008                      	ldi r16,EXIT_FROM_SETTINGS_CLK_TIME_HIGH
00092b 1340                      	CPSE r20,r16
00092c c00c                      	rjmp exit_from_settings_spx_next3
                                 exit_from_settings_final_time: //      (  )
                                 	//    ,    
00092d e000                      	ldi r16,0x00
00092e 9300 0134                 	sts PROG_FUNC_WORK_STATUS_RAM,r16
000930 98ad                      	cbi PORTC,LED_prog //     PROG
                                 
                                 	//    
000931 2722                      	clr r18
000932 9320 0139                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_HIGH,r18
000934 9320 013a                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_MID,r18
000936 9320 013b                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_LOW,r18
000938 c006                      	rjmp exit_from_settings_spx_exit
                                 exit_from_settings_spx_next3: //       (   )
                                 	//   
000939 9340 0139                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_HIGH,r20
00093b 9330 013a                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_MID,r19
00093d 9320 013b                 	sts EXIT_FROM_SETTINGS_CLK_COUNTER_LOW,r18
                                 exit_from_settings_spx_exit:
00093f 914f                      pop r20
000940 913f                      pop r19
000941 912f                      pop r18
000942 910f                      pop r16
                                 
000943 9508                      ret
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 ;EXT_INT0: reti
000944 9518                      EXT_INT1: reti
000945 9518                      EXT_INT2: reti
                                 ;TIM2_COMP: reti
000946 9518                      TIM2_OVF: reti
000947 9518                      TIM1_CAPT: reti
                                 ;TIM1_COMPA: reti
000948 9518                      TIM1_COMPB: reti
000949 9518                      TIM1_OVF: reti
                                 ;TIM0_COMP: reti
00094a 9518                      TIM0_OVF: reti
00094b 9518                      SPI_STC: reti
00094c 9518                      USART_RXC: reti
00094d 9518                      USART_UDRE: reti
00094e 9518                      USART_TXC: reti
00094f 9518                      ADC1: reti
000950 9518                      EE_RDY: reti
000951 9518                      ANA_COMP: reti
000952 9518                      TWI: reti
000953 9518                      SPM_RDY: reti
                                 
                                 


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATmega32" register use summary:
x  :   0 y  :   0 z  :   1 r0 :  11 r1 :   4 r2 :   2 r3 :   2 r4 :   6 
r5 :   6 r6 :   6 r7 :   6 r8 :   0 r9 :   0 r10:   0 r11:   0 r12:   0 
r13:   0 r14:   0 r15:   0 r16: 657 r17: 198 r18: 140 r19:  59 r20:  55 
r21:  27 r22:  36 r23:  33 r24:  54 r25:  80 r26:  60 r27:  28 r28:  16 
r29:  16 r30:  28 r31:  28 
Registers used: 25 out of 35 (71.4%)

"ATmega32" instruction use summary:
.lds  :   0 .sts  :   0 adc   :  18 add   :  16 adiw  :   0 and   :   0 
andi  :  13 asr   :   0 bclr  :   0 bld   :   0 brbc  :   0 brbs  :   0 
brcc  :   3 brcs  :   2 break :   0 breq  :  47 brge  :   0 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :   3 brlt  :   0 brmi  :   0 
brne  :  27 brpl  :   1 brsh  :   2 brtc  :   7 brts  :   1 brvc  :   0 
brvs  :   0 bset  :   0 bst   :   7 call  :   6 cbi   :  12 cbr   :   9 
clc   :   0 clh   :   0 cli   :  10 cln   :   0 clr   :  93 cls   :   0 
clt   :   0 clv   :   0 clz   :   0 com   :   7 cp    :   0 cpc   :   0 
cpi   :  72 cpse  :  35 dec   :   7 eor   :   0 fmul  :   0 fmuls :   0 
fmulsu:   0 icall :   0 ijmp  :   0 in    :  43 inc   :  12 jmp   :  21 
ld    :   1 ldd   :   0 ldi   : 319 lds   : 107 lpm   :   0 lsl   :   5 
lsr   :   2 mov   :  61 movw  :   0 mul   :   8 muls  :   0 mulsu :   0 
neg   :   0 nop   :  32 or    :   3 ori   :  11 out   :  76 pop   :  91 
push  :  91 rcall : 220 ret   : 101 reti  :  20 rjmp  : 133 rol   :   0 
ror   :   2 sbc   :  19 sbci  :   0 sbi   :  14 sbic  :  14 sbis  :   9 
sbiw  :   0 sbr   :   4 sbrc  :  28 sbrs  :  20 sec   :   0 seh   :   0 
sei   :   7 sen   :   0 ser   :   0 ses   :   0 set   :   0 sev   :   0 
sez   :   0 sleep :   0 spm   :   0 st    :   0 std   :   0 sts   : 182 
sub   :  18 subi  :   0 swap  :   0 tst   :   0 wdr   :   0 
Instructions used: 53 out of 113 (46.9%)

"ATmega32" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x0012a8   4776      0   4776   32768  14.6%
[.dseg] 0x000060 0x000060      0      0      0    2048   0.0%
[.eseg] 0x000000 0x000000      0      0      0    1024   0.0%

Assembly complete, 0 errors, 0 warnings
